<!DOCTYPE html>
    <html>
      <head>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <meta />
        
    <title>安全与网络相关注意事项_通用规则|微信支付商户文档中心</title><meta>
    <meta>
    
    
    
    
  
      </head>
      <body>
        
        <div><section><header><div><div><div><a><img></a></div><div><a>首页</a><a>接入指引</a><a>产品中心</a><a>解决方案</a><a>文档中心</a><a>接入微信支付</a></div><div><div> 文档中心 </div><img></div></div></div><div><img><div><a>首页</a><a>接入指引</a><a>产品中心</a><a>解决方案</a><a>文档中心</a><a>接入微信支付</a></div></div></header><section><div><div><div><div><a>产品文档（V2）</a><a>通用规则</a><a>SDK&amp;开发工具</a><a>更新日志</a></div></div><div><div><div><img><div>通用规则</div></div></div><div><button><span> 技术咨询 </span></button></div></div></div></div></section><section><aside><div><div><ul><li><section><p><span><span>接入规范</span></span><span></span></p><ul><li><div><a><span>商户收银台H5大字号规范</span></a></div></li><li><div><a><span>微信支付二维码规范</span></a></div></li></ul></section></li><li><div><a><span>安全规范</span></a></div></li><li><section><p><span><span>名词表</span></span><span></span></p><ul><li><div><a><span>支付模式</span></a></div></li><li><div><a><span>名词解释</span></a></div></li><li><div><a><span>参数规定</span></a></div></li></ul></section></li><li><section><p><span><span>API安全</span></span><span></span></p><ul><li><div><a><span>最佳安全实践</span></a></div></li><li><div><a><span>安全与网络相关注意事项</span></a></div></li><li><div><a><span>HTTPS服务器配置</span></a></div></li><li></li><li></li><li></li><li></li><li></li><li></li></ul></section></li><li><section><p><span><span>最佳实践</span></span><span></span></p><ul><li><div><a><span>支付回调和查单实现指引</span></a></div></li><li><div><a><span>回调通知注意事项</span></a></div></li><li><div><a><span>专线商户Notify升级指引</span></a></div></li><li><div><a><span>支付验收指引</span></a></div></li><li><div><a><span>跨城冗灾方案</span></a></div></li><li></li></ul></section></li></ul></div></div></aside><main><div><main><div><div><h1>安全与网络相关注意事项</h1><span> 更新时间：2024.11.18</span><div><div><html><head></head><body><div><div><div><h2><span>1、服务器SSL版本说明</span></h2></div><div><p><span><span>由于低版本的SSL存在高危漏洞，需要确认您系统所使用的SSL版本是否需要升级，详细说明请见</span></span><span><span><a>公众平台SSL安全策略说明</a></span></span></p></div><div><p><span><span>Java开发可以参考Oracle网站的说明：[</span></span><span><span><a>Oracle&nbsp;Java&nbsp;disable&nbsp;SSL3</a></span></span><span><span>]</span></span></p></div><div><h2>2、IPV6相关</h2></div><div><p><span><span>如果您的服务器开启了IPv6支持，由于当前互联网对IPv6支持不完整，导致在DNS解析时通常会碰到超时问题；</span></span></p></div><div><p><span><span>建议在调用支付API时，显示指定使用IPv4解析.</span></span></p></div><div><p><span><span>PHP程序使用curl调用参考代码如下：</span></span></p></div><div><img><pre><span><span>1</span><span><span>if(defined('CURLOPT_IPRESOLVE')&nbsp;&amp;&amp;&nbsp;defined('CURL_IPRESOLVE_V4'))</span><span>
</span></span></span><span><span>2</span><span><span>{</span><span>
</span></span></span><span><span>3</span><span><span>curl_setopt($ch,&nbsp;CURLOPT_IPRESOLVE,&nbsp;CURL_IPRESOLVE_V4);</span><span>
</span></span></span><span><span>4</span><span><span>}</span></span></span></pre></div><div><h2>3、无法连接微信服务器,访问api.mch.weixin.qq.com超时</h2></div><div><p><span><span>a. 是否存在跨运营商访问的情况,详见</span></span><span><span><a>网络超时的定位</a></span></span><br><span>可以ping api.mch.weixin.qq.com查询对应的解析IP</span><br><span>通过访问ip.qq.com获取出口IP，也可以根据商户侧服务器的外网IP确认</span><br><span>b. 是否使用curl库访问</span><br><span>需要指定参数使用ipv4，具体可参考http://www.jb51.net/article/39788.htm</span><br><span>c. 确认java程序使用的HttpClient的版本是否&lt;=4.3.4</span><br><span>可升级HttpClient到4.3.6版本</span><br><span>d.如有疑问，请通过在线</span><span><span><a>技术咨询</a></span></span><span>联系我们；</span></p></div></div><p>&nbsp;</p></div></body></html></div><div></div></div><div><div><div> 文档是否有帮助 </div><div><button><i></i>是 </button><button><i></i>否 </button></div></div></div><div><div><div> 更多支持 </div><div><a>开发文档(服务商)</a><a>开发文档(V2版)</a><a>开发者社区</a><a>微信开放平台</a><a>微信公众平台</a><a>腾讯客服</a></div></div></div></div><div><div><div><div><div> 文档是否有帮助 </div><div><button><i></i>是 </button><button><i></i>否 </button></div></div></div><div><div><a><span>1、服务器SSL版本说明</span></a></div><div><a><span>2、IPV6相关</span></a></div><div><a><span>3、无法连接微信服务器,访问api.mch.weixin.qq.com超时</span></a></div></div><div><a><i></i><span>AI开发助手</span></a></div></div><div><div><div><img><img><div> 元宝AI </div></div><div><div><img><img><div> 反馈 </div></div><div><img><img><div> 目录 </div></div><div><img><img><div> 置顶 </div></div></div></div></div></div></div></main><footer><div> Powered By Tencent &amp; Tenpay Copyright 2005-2025 Tenpay All Rights Reserved. </div><div> Powered By Tencent &amp; Tenpay<br>Copyright 2005-2025 Tenpay All Rights Reserved. </div></footer></div></main></section></section></div>
        <div></div>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </body>
    </html>