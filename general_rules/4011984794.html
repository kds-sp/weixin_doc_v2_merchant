<!DOCTYPE html>
    <html>
      <head>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <meta />
        
    <title>专线商户Notify升级指引_通用规则|微信支付商户文档中心</title><meta>
    <meta>
    
    
    
    
  
      </head>
      <body>
        
        <div><section><header><div><div><div><a><img></a></div><div><a>首页</a><a>接入指引</a><a>产品中心</a><a>解决方案</a><a>文档中心</a><a>接入微信支付</a></div><div><div> 文档中心 </div><img></div></div></div><div><img><div><a>首页</a><a>接入指引</a><a>产品中心</a><a>解决方案</a><a>文档中心</a><a>接入微信支付</a></div></div></header><section><div><div><div><div><a>产品文档（V2）</a><a>通用规则</a><a>SDK&amp;开发工具</a><a>更新日志</a></div></div><div><div><div><img><div>通用规则</div></div></div><div><button><span> 技术咨询 </span></button></div></div></div></div></section><section><aside><div><div><ul><li><section><p><span><span>接入规范</span></span><span></span></p><ul><li><div><a><span>商户收银台H5大字号规范</span></a></div></li><li><div><a><span>微信支付二维码规范</span></a></div></li></ul></section></li><li><div><a><span>安全规范</span></a></div></li><li><section><p><span><span>名词表</span></span><span></span></p><ul><li><div><a><span>支付模式</span></a></div></li><li><div><a><span>名词解释</span></a></div></li><li><div><a><span>参数规定</span></a></div></li></ul></section></li><li><section><p><span><span>API安全</span></span><span></span></p><ul><li><div><a><span>最佳安全实践</span></a></div></li><li><div><a><span>安全与网络相关注意事项</span></a></div></li><li><div><a><span>HTTPS服务器配置</span></a></div></li><li></li><li></li><li></li><li></li><li></li><li></li></ul></section></li><li><section><p><span><span>最佳实践</span></span><span></span></p><ul><li><div><a><span>支付回调和查单实现指引</span></a></div></li><li><div><a><span>回调通知注意事项</span></a></div></li><li><div><a><span>专线商户Notify升级指引</span></a></div></li><li><div><a><span>支付验收指引</span></a></div></li><li><div><a><span>跨城冗灾方案</span></a></div></li><li></li></ul></section></li></ul></div></div></aside><main><div><main><div><div><h1>专线商户Notify升级指引</h1><span> 更新时间：2024.11.18</span><div><div><html><head></head><body><div><div><div><h2><span>案例</span></h2></div><div><p><span><span>A商户在做专线IP的变更时，A商户的支付下单全部需要调整，每次变更每次都需要调整</span></span></p></div><div><h2>为什么要做notify_url改造</h2></div><div><p><span><span>1、虚拟域名主要用来做冗灾，业务在多条线路上切换，不用考虑回调地址变更。</span></span></p></div><div><p><span><span>2、当商户做专线新增或迁移的时候，不需要商户的交易系统配合调整，不需要修改 notify_url， 如果我们做了改造将ip都改为*****.wxpay.local 域名的形式，后续商户侧变更IP微信支付将AAAAAA.wxpay.local 解析为新的专线 IP 即可，商户侧应用层不需要任何调整。而且微信支付和商户之间也能够更好的解耦，未来做变更配合时，也会更有把握，业务稳定的运行，对于双方来说，都是有好处的</span></span></p></div><div><h2>改造流程</h2></div><div><p><span><span>1、商户确定一个虚拟域名，比如 ***.wxpay.local 。商户可自定义第三级域名，且需保持商户域名的唯一性。</span></span></p></div><div><p><span><span>2、商户支付下单接口参数notify_url不再使用固定专线IP，而使用域名。</span></span></p></div><div><p><span><span>例如：原IP调用的notify_url:"http://131.XX.XXX.44:8080/payscope/callback"。</span></span><br><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;改造后的notify_url:"http://***.wxpay.local:8080/payscope/callback"。</span></span></p></div><div><p><span><span>3、微信支付侧会配置域名解析***.wxpay.local解析为具体的业务IP，如果有多条专线，将做动态解析。</span></span></p></div><div><p><span><span>4、当专线故障，商户不需要再更换notify_url，系统会自动通过多个链路发送支付通知。</span></span></p></div><div><p><span><span>5、商户侧可以指定优先回调的专线，具体见《</span></span><span><span><a>微信支付商户系统跨城冗灾升级指引</a></span></span><span>》</span></p></div><p>&nbsp;</p></div><p>&nbsp;</p></div></body></html></div><div></div></div><div><div><div> 文档是否有帮助 </div><div><button><i></i>是 </button><button><i></i>否 </button></div></div></div><div><div><div> 更多支持 </div><div><a>开发文档(服务商)</a><a>开发文档(V2版)</a><a>开发者社区</a><a>微信开放平台</a><a>微信公众平台</a><a>腾讯客服</a></div></div></div></div><div><div><div><div><div> 文档是否有帮助 </div><div><button><i></i>是 </button><button><i></i>否 </button></div></div></div><div><div><a><span>案例</span></a></div><div><a><span>为什么要做notify_url改造</span></a></div><div><a><span>改造流程</span></a></div></div><div><a><i></i><span>AI开发助手</span></a></div></div><div><div><div><img><img><div> 元宝AI </div></div><div><div><img><img><div> 反馈 </div></div><div><img><img><div> 目录 </div></div><div><img><img><div> 置顶 </div></div></div></div></div></div></div></main><footer><div> Powered By Tencent &amp; Tenpay Copyright 2005-2025 Tenpay All Rights Reserved. </div><div> Powered By Tencent &amp; Tenpay<br>Copyright 2005-2025 Tenpay All Rights Reserved. </div></footer></div></main></section></section></div>
        <div></div>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </body>
    </html>