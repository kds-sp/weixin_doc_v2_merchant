<!DOCTYPE html>
    <html lang="zh-CN">
      <head>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <meta charset="UTF-8" />
        
    <title>支付验收指引_通用规则|微信支付商户文档中心</title><meta property="og:title" content="支付验收指引_通用规则|微信支付商户文档中心">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
    
    
    
  
      </head>
      <body>
        
        <div id="app"><section class="t-layout" data-v-45cd89fe><header class="t-layout__header wrap" data-v-45cd89fe data-v-24ca267f><div class="header" data-v-24ca267f><div class="header-wrap" data-v-24ca267f><div class="logo" data-v-24ca267f><a href="https://pay.weixin.qq.com/" data-v-24ca267f><img class="logo-partner" src="https://wx.gtimg.com/pay/img/common/logo.svg?v=20190327" alt data-v-24ca267f></a></div><div class="link" data-v-24ca267f><a href="https://pay.weixin.qq.com/index.php/core/home/login?return_url=%2F" class="" data-v-24ca267f>首页</a><a href="https://pay.weixin.qq.com/static/applyment_guide/applyment_index.shtml" class="" data-v-24ca267f>接入指引</a><a href="https://pay.weixin.qq.com/static/product/product_index.shtml" class="" data-v-24ca267f>产品中心</a><a href="https://pay.weixin.qq.com/static/solution/solution_index.shtml" class="" data-v-24ca267f>解决方案</a><a href="https://pay.weixin.qq.com/doc/v2" class="selected" data-v-24ca267f>文档中心</a><a href="http://pay.weixin.qq.com/index.php/apply/applyment_home/guide_normal" class="btn-primary btn-apply" target="_blank" data-v-24ca267f>接入微信支付</a></div><div class="navbar-toggle" data-v-24ca267f><div class="navbar-toggle__des" data-v-24ca267f> 文档中心 </div><img class="navbar-toggle__icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/55b0d9d534b0ccd145bcbe8e932f3053_80x80.svg" alt data-v-24ca267f></div></div></div><div class="navbar-collapse" data-v-24ca267f><img class="close-icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/cbbd950ece1f5688079a7f55da0798f9_48x48.svg" alt data-v-24ca267f><div class="link" data-v-24ca267f><a href="https://pay.weixin.qq.com/index.php/core/home/login?return_url=%2F" class="" data-v-24ca267f>首页</a><a href="https://pay.weixin.qq.com/static/applyment_guide/applyment_index.shtml" class="" data-v-24ca267f>接入指引</a><a href="https://pay.weixin.qq.com/static/product/product_index.shtml" class="" data-v-24ca267f>产品中心</a><a href="https://pay.weixin.qq.com/static/solution/solution_index.shtml" class="" data-v-24ca267f>解决方案</a><a href="https://pay.weixin.qq.com/doc/v3/partner/4012069852" class="selected" data-v-24ca267f>文档中心</a><a href="https://pay.weixin.qq.com/index.php/apply/applyment_home/guide_normal" class="btn-primary btn-apply" target="_blank" data-v-24ca267f>接入微信支付</a></div></div></header><section class="t-layout subnavbar-layout" data-v-45cd89fe><div class="sub-navbar" data-v-204f5510><div class="sub-navbar-wrap" data-v-204f5510><div class="segment-nav" data-v-204f5510><div class="segment-nav-left" data-v-204f5510><a href="javascript:" class="" data-v-204f5510>产品文档（V2）</a><a href="javascript:" class="selected" data-v-204f5510>通用规则</a><a href="javascript:" class="" data-v-204f5510>SDK&amp;开发工具</a><a href="javascript:" class="" data-v-204f5510>更新日志</a></div></div><div class="segment-nav-box" data-v-204f5510><div class="segment-nav-toggle" data-v-204f5510><div class="sub-navbar-toggle" data-v-204f5510><img class="sub-navbar-toggle__icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/6926a37e3d500f8a9446546bb16252ad_80x80.svg" alt="" data-v-204f5510><div class="sub-navbar-toggle__des" data-v-204f5510>通用规则</div></div></div><div class="online-service" data-v-204f5510><button class="t-button t-button--variant-base t-button--theme-primary" type="button" href tabindex="0" data-v-204f5510><span class="t-button__text"> 技术咨询 </span></button></div></div></div></div></section><section class="t-layout content-layout" data-v-45cd89fe><aside class="t-layout__sider wrap" id="sidebar" data-v-45cd89fe data-v-c3fa0a07><div class="sidebar" data-v-c3fa0a07><div class="inner" data-v-c3fa0a07><ul class="sidebar-links sidebar-links-spacing" data-v-c3fa0a07><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading ellipsis"><span><span>接入规范</span></span><span class="up arrow"></span></p><ul class="sidebar-links sidebar-group-items"><li><div><a href="4011939746.html" class="sidebar-link ellipsis"><span>商户收银台H5大字号规范</span></a></div></li><li><div><a href="4011939778.html" class="sidebar-link ellipsis"><span>微信支付二维码规范</span></a></div></li></ul></section></li><li><div><a href="4011985891.html" class="font sidebar-link ellipsis"><span>安全规范</span></a></div></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading ellipsis"><span><span>名词表</span></span><span class="up arrow"></span></p><ul class="sidebar-links sidebar-group-items"><li><div><a href="4011939826.html" class="sidebar-link ellipsis"><span>支付模式</span></a></div></li><li><div><a href="4011939975.html" class="sidebar-link ellipsis"><span>名词解释</span></a></div></li><li><div><a href="4011941162.html" class="sidebar-link ellipsis"><span>参数规定</span></a></div></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading ellipsis"><span><span>API安全</span></span><span class="up arrow"></span></p><ul class="sidebar-links sidebar-group-items"><li><div><a href="4011941549.html" class="sidebar-link ellipsis"><span>最佳安全实践</span></a></div></li><li><div><a href="4011984638.html" class="sidebar-link ellipsis"><span>安全与网络相关注意事项</span></a></div></li><li><div><a href="4012197402.html" class="sidebar-link ellipsis"><span>HTTPS服务器配置</span></a></div></li><li></li><li></li><li></li><li></li><li></li><li></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="open sidebar-heading ellipsis"><span><span>最佳实践</span></span><span class="up arrow"></span></p><ul class="sidebar-links sidebar-group-items"><li><div><a href="4011984682.html" class="sidebar-link ellipsis"><span>支付回调和查单实现指引</span></a></div></li><li><div><a href="4011984721.html" class="sidebar-link ellipsis"><span>回调通知注意事项</span></a></div></li><li><div><a href="4011984794.html" class="sidebar-link ellipsis"><span>专线商户Notify升级指引</span></a></div></li><li><div><a href="4011984810.html" class="active sidebar-link ellipsis"><span>支付验收指引</span></a></div></li><li><div><a href="4011984887.html" class="sidebar-link ellipsis"><span>跨城冗灾方案</span></a></div></li><li></li></ul></section></li></ul></div></div></aside><main class="t-layout__content" data-v-45cd89fe><div class="page-container" data-v-45cd89fe><main class="page" data-v-45cd89fe><div class="page-inner-container" data-v-45cd89fe><div id="page-content" class="page-content" data-v-45cd89fe><h1 class="content-title" data-v-45cd89fe>支付验收指引</h1><span class="last-updated-date" data-v-45cd89fe> 更新时间：2025.03.21</span><div id="main-content" class="theme-default-content" data-v-45cd89fe><div data-v-45cd89fe><html><head></head><body><div class="iwiki-wrapper"><div class="iwiki-wrapper"><div><h2 class="iwiki-h2" id="阅读对象"><span>阅读对象</span></h2></div><div><p class="iwiki-p"><span><span>本文阅读对象为：商户自有系统（包括但不限于：在线购物平台、人工收银系统、自动化智能收银系统、APP应用等）负责微信支付功能测试的测试及开发人员。</span></span></p></div><div><h2 class="iwiki-h2" id="测试说明"><span>测试说明</span></h2></div><div><h3 class="iwiki-h3" id="一、概述"><span>一、概述</span></h3></div><div><p class="iwiki-p"><span><span>为保证商户接入质量，提升交易安全及用户体验，微信支付的合作服务商在正式上线交易前，建议先根据本文指引完成正常与异常情况的测试。</span></span></p></div><div><h3 class="iwiki-h3" id="二、仿真测试系统"><span>二、仿真测试系统</span></h3></div><div><p class="iwiki-p"><span><span>为降低商户测试门槛，微信支付团队开发了一套独立的仿真测试系统。该系统分为两种用例类型：支付成功用例与支付异常用例。支付成功用例根据测试用例金额的不同返回不同的响应报文，支付异常用例的识别将通过 Http Header 中添加异常头 Wechatpay-Negative-Test: {用例名} 识别。沙箱系统将通过识别用例名返回对应的异常信息。</span></span></p></div><div><p class="iwiki-p"><span class="iwiki-inlineExtension-outer iwiki-border-none"><img src="https://gtimg.wechatpay.cn/resource/xres/mmpaydoc/static/img/2924e5108584cc531009f0f10045ba83.png" name="image.png" class="iwiki-image iwiki-border-none" type="image" width="672" height="476.28"></span> </p></div><div><p class="iwiki-p"><span><span>图1 微信支付仿真测试系统</span></span></p></div><p class="iwiki-p"><span><span>图1为微信支付仿真测试系统（后简称仿真系统）的简化原理图。仿真系统的API协议与正式API完全相同（</span></span><span><span><a href="https://pay.weixin.qq.com/doc/v2/merchant/4011936530" target="_blank">API接口文档</a></span></span><span>）。商户开发者只需将正式API的调用URL增加一层 </span><span><span>xdc/apiv2sandbox</span></span><span> 路径，即可对接到仿真系统。</span></p><p class="iwiki-p"><span><span>例如，付款码支付URL：https://api.mch.weixin.qq.com/pay/micropay</span></span></p><p class="iwiki-p"><span><span>变更为：https://api.mch.weixin.qq.com/</span></span><span><span>xdc/apiv2sandbox</span></span><span><span>/pay/micropay。</span></span></p><table cellspacing="0" cellpadding="0" border="0" class=" iwiki-commonTable" width="100%"><tbody><tr><td class="iwiki-panel" width="100%"><table cellspacing="0" cellpadding="0" border="0" class="iwiki-panel-innerTable iwiki-panel-type-success iwiki-commonTable" width="100%"><tbody><tr><td class="iwiki-panel-iconTd success" width="24" height="24" valign="top"><svg focusable="false" aria-hidden="true" viewBox="0 0 16 16"><path d="M8 1C4.13 1 1 4.13 1 8C1 11.87 4.13 15 8 15C11.87 15 15 11.87 15 8C15 4.13 11.87 1 8 1ZM11.05 6.59L7.51 10.13C7.41 10.23 7.25 10.23 7.16 10.13L4.95 7.92C4.85 7.82 4.85 7.66 4.95 7.57L5.3 7.22C5.4 7.12 5.56 7.12 5.65 7.22L7.33 8.9L10.34 5.89C10.44 5.79 10.6 5.79 10.69 5.89L11.04 6.24C11.14 6.34 11.14 6.5 11.04 6.59H11.05Z" fill="currentColor"></path></svg></td><td class="iwiki-panel-inner" width="100%"><p class="iwiki-p"><span><span><span>注意：</span></span></span></p><p class="iwiki-p"><span><span>目前只支持</span></span><span class="iwiki-inlineExtension-outer iwiki-border-none"><span><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="design-iconfont" width="16" height="16"><path d="M12.5,1.25H3.5c-.69,0-1.25,.56-1.25,1.25V13.5c0,.69,.56,1.25,1.25,1.25H12.5c.69,0,1.25-.56,1.25-1.25V2.5c0-.69-.56-1.25-1.25-1.25ZM4.75,3.75h.48c.11,0,.21,.08,.24,.19l.39,1.45,.39-1.45c.03-.11,.13-.19,.24-.19h.62c.11,0,.21,.08,.24,.19l.39,1.45,.39-1.45c.03-.11,.13-.19,.24-.19h.48c.16,0,.28,.16,.24,.31l-.8,3c-.03,.11-.13,.19-.24,.19h-.62c-.11,0-.21-.08-.24-.19l-.39-1.45-.39,1.45c-.03,.11-.13,.19-.24,.19h-.62c-.11,0-.21-.08-.24-.19l-.8-3c-.04-.16,.08-.31,.24-.31Zm3.25,8.25c0,.14-.11,.25-.25,.25h-3c-.14,0-.25-.11-.25-.25v-.5c0-.14,.11-.25,.25-.25h3c.14,0,.25,.11,.25,.25v.5Zm3.5-2.5c0,.14-.11,.25-.25,.25H4.75c-.14,0-.25-.11-.25-.25v-.5c0-.14,.11-.25,.25-.25h6.5c.14,0,.25,.11,.25,.25v.5Z" fill="#0052d9"></path></svg></span><a href="https://gtimg.wechatpay.cn/resource/xres/mmpaydoc/static/attachment/0352bc9cab5292c1262cc6c1ffd3fc21/付款码支付成功用例.docx" name="付款码支付成功用例.docx" class="iwiki-attachment-link" type="attachment" download="付款码支付成功用例.docx">付款码支付成功用例.docx</a></span></span><span>与</span><span class="iwiki-inlineExtension-outer iwiki-border-none"><span><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="design-iconfont" width="16" height="16"><path d="M12.5,1.25H3.5c-.69,0-1.25,.56-1.25,1.25V13.5c0,.69,.56,1.25,1.25,1.25H12.5c.69,0,1.25-.56,1.25-1.25V2.5c0-.69-.56-1.25-1.25-1.25ZM4.75,3.75h.48c.11,0,.21,.08,.24,.19l.39,1.45,.39-1.45c.03-.11,.13-.19,.24-.19h.62c.11,0,.21,.08,.24,.19l.39,1.45,.39-1.45c.03-.11,.13-.19,.24-.19h.48c.16,0,.28,.16,.24,.31l-.8,3c-.03,.11-.13,.19-.24,.19h-.62c-.11,0-.21-.08-.24-.19l-.39-1.45-.39,1.45c-.03,.11-.13,.19-.24,.19h-.62c-.11,0-.21-.08-.24-.19l-.8-3c-.04-.16,.08-.31,.24-.31Zm3.25,8.25c0,.14-.11,.25-.25,.25h-3c-.14,0-.25-.11-.25-.25v-.5c0-.14,.11-.25,.25-.25h3c.14,0,.25,.11,.25,.25v.5Zm3.5-2.5c0,.14-.11,.25-.25,.25H4.75c-.14,0-.25-.11-.25-.25v-.5c0-.14,.11-.25,.25-.25h6.5c.14,0,.25,.11,.25,.25v.5Z" fill="#0052d9"></path></svg></span><a href="https://gtimg.wechatpay.cn/resource/xres/mmpaydoc/static/attachment/1875b3a6d006115eedc63f3db6d8f153/付款码支付异常用例.docx" name="付款码支付异常用例.docx" class="iwiki-attachment-link" type="attachment" download="付款码支付异常用例.docx">付款码支付异常用例.docx</a></span></span><span>中的接口调用，下单接口：https://api.mch.weixin.qq.com/pay/unifiedorder 等目前暂不支持使用</span></p></td></tr></tbody></table></td></tr></tbody></table><p class="iwiki-p"><span><span>仿真系统与生产环境完全独立，包括存储层。商户在仿真系统所做的所有交易（如下单、支付、查询）均为无资金流的假数据，即：用户无需真实扣款，商户也不会有资金入账。代金券同理，沙箱环境中无需商户真实制券与发券，亦不会出现真实扣券情况。测试仿真测试系统的API验签密钥需从API获取:</span></span></p><p class="iwiki-p"><span><span><span>获取验签秘钥API：</span></span></span></p><div class="iwiki-tableNode-wrapper"><table class="iwiki-tableNode" width="100%"><colgroup><col><col></colgroup><tbody><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>请求Url</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>https://api.mch.weixin.qq.com/xdc/apiv2getsignkey/sign/getsignkey</span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>是否需要证书</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>否</span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>请求方式</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>POST</span></span></p></td></tr></tbody></table></div><p class="iwiki-p"><span><span><span>请求参数：</span></span></span></p><div class="iwiki-tableNode-wrapper"><table class="iwiki-tableNode" width="100%"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>字段名</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>字段</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>必填</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>示例值</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>类型</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>说明</span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>商户号</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>mch_id</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>是</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>1305638280</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>String(32)</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>微信支付分配的微信商户号</span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>随机字符串</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>nonce_str</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>是</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>5K8264ILTKCH16CQ2502SI8ZNMTM67VS</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>String(32)</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>随机字符串，不长于32位</span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>签名</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>sign</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>是</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>5K8264ILTKCH16CQ2502SI8ZNMTM67VS</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>String(32)</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>签名值</span></span></p></td></tr></tbody></table></div><p class="iwiki-p"><span><span><span>返回参数：</span></span></span></p><div class="iwiki-tableNode-wrapper"><table class="iwiki-tableNode" width="100%"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>字段名</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>字段</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>必填</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>示例值</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>类型</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>说明</span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>返回状态码</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>return_code</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>是</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>SUCCESS</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>String(16)</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>SUCCESS/FAIL&nbsp;此字段是通信标识，非交易标识</span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>返回信息</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>return_msg</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>否</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>签名失败</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>String(128)</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>返回信息，如非空，为错误原因&nbsp;，签名失败&nbsp;，参数格式校验错误</span></span></p></td></tr></tbody></table></div><p class="iwiki-p"><span><span>以下字段在return_code 为SUCCESS的时有返回。</span></span></p><div class="iwiki-tableNode-wrapper"><table class="iwiki-tableNode" width="100%"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>字段名</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>字段</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>必填</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>示例值</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>类型</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="#f4f5f9" valign="middle"><p class="iwiki-p"><span><span>说明</span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>商户号</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>mch_id</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>是</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>1305638280</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>String(32)</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>微信支付分配的微信商户号</span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>沙箱密钥</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>sandbox_signkey</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>否</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>013467007045764</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>String(32)</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>返回的沙箱密钥</span></span></p></td></tr></tbody></table></div><p class="iwiki-p"><span><span>商户接入仿真系统的交互流程示例：</span></span></p><ol class="iwiki-ol"><li class="iwiki-li"><p class="iwiki-p"><span>商户发起付款码支付请求，使用POST方式调用 https://api.mch.weixin.qq.com/</span><span><span>xdc/apiv2sandbox</span></span><span>/pay/micropay</span></p></li><li class="iwiki-li"><p class="iwiki-p"><span>带</span><span><span>xdc/apiv2sandbox</span></span><span>的https请求会被nginx路由到仿真系统。仿真系统根据对应用例返回预期报文给商户。同时，落地该笔请求数据；</span></p></li><li class="iwiki-li"><p class="iwiki-p"><span>商户发起查单，调用 https://api.mch.weixin.qq.com/</span><span><span>xdc/apiv2sandbox</span></span><span>/pay/orderquery，带上微信订单号（transaction_id）或商户内部单号（out_trade_no）；</span></p></li><li class="iwiki-li"><p class="iwiki-p"><span>仿真系统收到查单请求后，根据单号及金额返回预期的查单结果给商户</span></p></li></ol><h3 class="iwiki-h3" id="三、测试流程"><span>三、测试流程</span></h3><div><p class="iwiki-p"><span class="iwiki-inlineExtension-outer iwiki-border-none"><img src="https://gtimg.wechatpay.cn/resource/xres/mmpaydoc/static/img/2f559e0c9498966bcd4721b659d57599.png" name="image.png" class="iwiki-image iwiki-border-none" type="image" width="647" height="341.29249999999996"></span> </p></div><div><p class="iwiki-p"><span><span>图2 商户接入测试流程</span></span></p></div><p class="iwiki-p"><span><span>如图2，商户在收到微信支付审核通过的邮件后，即可用邮件中提供的开发者信息，启动测试测试工作。测试开始后，测试负责人可按照下表步骤操作：</span></span></p><div class="iwiki-tableNode-wrapper"><table class="iwiki-tableNode" width="100%"><colgroup><col><col><col></colgroup><tbody><tr><th colspan="1" rowspan="1" class="iwiki-tableHeader" bgcolor="#f4f5f9" align="left" valign="top"><p class="iwiki-p"><span><span>步骤</span></span></p></th><th colspan="1" rowspan="1" class="iwiki-tableHeader" bgcolor="#f4f5f9" align="left" valign="top"><p class="iwiki-p"><span><span>准备项</span></span></p></th><th colspan="1" rowspan="1" class="iwiki-tableHeader" bgcolor="#f4f5f9" align="left" valign="top"><p class="iwiki-p"><span><span>说明</span></span></p></th></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>1</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>商户通过审核，收到审核通过的邮件。</span></span></p><p class="iwiki-p"><span><span>邮件中包含了商户的MCHID、APPID及密码等开发者信息。</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>/</span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>2</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>测试硬件全部到位，且被测的APP已被成功安装在硬件。</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>1、付款码支付：被测app已被安装至收银台平板，机具或扫码枪功能正常</span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>3</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>按照本文下方测试用例进行测试</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>/</span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>4</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>修改代码或配置中所有微信支付api的链接，对接仿真系统。</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>例如：付款码支付现网的api</span></span></p><p class="iwiki-p"><span><span>https://api.mch.weixin.qq.com/pay/micropay</span></span></p><p class="iwiki-p"><span><span>变更为：</span></span></p><p class="iwiki-p"><span><span>https://api.mch.weixin.qq.com/</span></span><span><span>xdc/apiv2sandbox</span></span><span><span>/pay/micropay</span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>5</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>严格按照用例的顺序、金额执行用例，确保用例的检查点完全符合预期。</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>/</span></span></p></td></tr></tbody></table></div><h2 class="iwiki-h2" id="测试用例"><span>测试用例</span></h2><p class="iwiki-p"><span><span>请根据您需要开通的功能来选择相应的测试用例进行测试：</span></span></p><p class="iwiki-p"><span><span>◆ </span></span><span class="iwiki-inlineExtension-outer iwiki-border-none"><span><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="design-iconfont" width="16" height="16"><path d="M12.5,1.25H3.5c-.69,0-1.25,.56-1.25,1.25V13.5c0,.69,.56,1.25,1.25,1.25H12.5c.69,0,1.25-.56,1.25-1.25V2.5c0-.69-.56-1.25-1.25-1.25ZM4.75,3.75h.48c.11,0,.21,.08,.24,.19l.39,1.45,.39-1.45c.03-.11,.13-.19,.24-.19h.62c.11,0,.21,.08,.24,.19l.39,1.45,.39-1.45c.03-.11,.13-.19,.24-.19h.48c.16,0,.28,.16,.24,.31l-.8,3c-.03,.11-.13,.19-.24,.19h-.62c-.11,0-.21-.08-.24-.19l-.39-1.45-.39,1.45c-.03,.11-.13,.19-.24,.19h-.62c-.11,0-.21-.08-.24-.19l-.8-3c-.04-.16,.08-.31,.24-.31Zm3.25,8.25c0,.14-.11,.25-.25,.25h-3c-.14,0-.25-.11-.25-.25v-.5c0-.14,.11-.25,.25-.25h3c.14,0,.25,.11,.25,.25v.5Zm3.5-2.5c0,.14-.11,.25-.25,.25H4.75c-.14,0-.25-.11-.25-.25v-.5c0-.14,.11-.25,.25-.25h6.5c.14,0,.25,.11,.25,.25v.5Z" fill="#0052d9"></path></svg></span><a href="https://gtimg.wechatpay.cn/resource/xres/mmpaydoc/static/attachment/0352bc9cab5292c1262cc6c1ffd3fc21/付款码支付-成功用例.docx" name="付款码支付-成功用例.docx" class="iwiki-attachment-link" type="attachment" download="付款码支付-成功用例.docx">付款码支付-成功用例.docx</a></span></span></p><p class="iwiki-p"><span><span>◆ </span></span><span class="iwiki-inlineExtension-outer iwiki-border-none"><span><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="design-iconfont" width="16" height="16"><path d="M12.5,1.25H3.5c-.69,0-1.25,.56-1.25,1.25V13.5c0,.69,.56,1.25,1.25,1.25H12.5c.69,0,1.25-.56,1.25-1.25V2.5c0-.69-.56-1.25-1.25-1.25ZM4.75,3.75h.48c.11,0,.21,.08,.24,.19l.39,1.45,.39-1.45c.03-.11,.13-.19,.24-.19h.62c.11,0,.21,.08,.24,.19l.39,1.45,.39-1.45c.03-.11,.13-.19,.24-.19h.48c.16,0,.28,.16,.24,.31l-.8,3c-.03,.11-.13,.19-.24,.19h-.62c-.11,0-.21-.08-.24-.19l-.39-1.45-.39,1.45c-.03,.11-.13,.19-.24,.19h-.62c-.11,0-.21-.08-.24-.19l-.8-3c-.04-.16,.08-.31,.24-.31Zm3.25,8.25c0,.14-.11,.25-.25,.25h-3c-.14,0-.25-.11-.25-.25v-.5c0-.14,.11-.25,.25-.25h3c.14,0,.25,.11,.25,.25v.5Zm3.5-2.5c0,.14-.11,.25-.25,.25H4.75c-.14,0-.25-.11-.25-.25v-.5c0-.14,.11-.25,.25-.25h6.5c.14,0,.25,.11,.25,.25v.5Z" fill="#0052d9"></path></svg></span><a href="https://gtimg.wechatpay.cn/resource/xres/mmpaydoc/static/attachment/1875b3a6d006115eedc63f3db6d8f153/付款码支付-异常用例.docx" name="付款码支付-异常用例.docx" class="iwiki-attachment-link" type="attachment" download="付款码支付-异常用例.docx">付款码支付-异常用例.docx</a></span></span></p><p class="iwiki-p">&nbsp;</p><p class="iwiki-p">&nbsp;</p></div><p class="iwiki-p">&nbsp;</p></div></body></html></div><div class="hr-line" data-v-45cd89fe></div></div><div class="feedback-and-moresupport" data-v-45cd89fe><div class="feedback-box" data-v-45cd89fe data-v-77eca616><div class="feedback-panel-text" data-v-77eca616> 文档是否有帮助 </div><div class="feedback-panel-choices" data-v-77eca616><button class="feedback-option" data-v-77eca616><i class="icon help-icon" data-v-77eca616></i>是 </button><button class="feedback-option" data-v-77eca616><i class="icon no-help-icon" data-v-77eca616></i>否 </button></div></div></div><div class="relative-doc-and-moresupport" data-v-45cd89fe><div class="more-support" data-v-45cd89fe data-v-e0c53a30><div class="more-support__title" data-v-e0c53a30> 更多支持 </div><div class="more-support__lists" data-v-e0c53a30><a href="https://pay.weixin.qq.com/doc/v3/partner/4012069852" target="_blank" data-v-e0c53a30>开发文档(服务商)</a><a href="https://pay.weixin.qq.com/doc/v2" target="_blank" data-v-e0c53a30>开发文档(V2版)</a><a href="https://developers.weixin.qq.com/community/pay" target="_blank" data-v-e0c53a30>开发者社区</a><a href="https://open.weixin.qq.com/" target="_blank" data-v-e0c53a30>微信开放平台</a><a href="https://mp.weixin.qq.com/" target="_blank" data-v-e0c53a30>微信公众平台</a><a href="https://kf.qq.com/product/wechatpaymentmerchant.html" target="_blank" data-v-e0c53a30>腾讯客服</a></div></div></div></div><div class="sub-sidebar" data-v-45cd89fe data-v-7f9bf920><div class="toc" data-v-7f9bf920><div class="mb32" data-v-7f9bf920><div class="feedback-box" data-v-7f9bf920 data-v-77eca616><div class="feedback-panel-text" data-v-77eca616> 文档是否有帮助 </div><div class="feedback-panel-choices" data-v-77eca616><button class="feedback-option" data-v-77eca616><i class="icon help-icon" data-v-77eca616></i>是 </button><button class="feedback-option" data-v-77eca616><i class="icon no-help-icon" data-v-77eca616></i>否 </button></div></div></div><div class="toc-container mb40" data-v-7f9bf920 data-v-c65b4426><div class="toc-h2 toc-active toc-item" data-v-c65b4426><a href="4011984810.html#阅读对象" title="阅读对象" class="ellipsis" data-v-c65b4426><span data-v-c65b4426>阅读对象</span></a></div><div class="toc-h2 toc-item" data-v-c65b4426><a href="4011984810.html#测试说明" title="测试说明" class="ellipsis" data-v-c65b4426><span data-v-c65b4426>测试说明</span></a></div><div class="toc-h3 toc-item" data-v-c65b4426><a href="4011984810.html#一、概述" title="一、概述" class="ellipsis" data-v-c65b4426><span data-v-c65b4426>一、概述</span></a></div><div class="toc-h3 toc-item" data-v-c65b4426><a href="4011984810.html#二、仿真测试系统" title="二、仿真测试系统" class="ellipsis" data-v-c65b4426><span data-v-c65b4426>二、仿真测试系统</span></a></div><div class="toc-h3 toc-item" data-v-c65b4426><a href="4011984810.html#三、测试流程" title="三、测试流程" class="ellipsis" data-v-c65b4426><span data-v-c65b4426>三、测试流程</span></a></div><div class="toc-h2 toc-item" data-v-c65b4426><a href="4011984810.html#测试用例" title="测试用例" class="ellipsis" data-v-c65b4426><span data-v-c65b4426>测试用例</span></a></div></div><div class="support-container" data-v-7f9bf920 data-v-787fd1f1><a href="https://support.pay.weixin.qq.com/aidevhelper?from=wechatpaydoc" target="_blank" class="support-btn" data-v-787fd1f1><i class="support-icon" data-v-787fd1f1></i><span class="support-text" data-v-787fd1f1>AI开发助手</span></a></div></div><div class="toc-mobile" data-v-7f9bf920><div class="sub-sidebar-group" data-v-7f9bf920 data-v-08ae15f6><div class="group-item" data-v-08ae15f6><img class="group-icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202509/441b156fa07f0548ddda2a0b711b478e_20x20.svg" alt="" data-v-08ae15f6><img class="group-icon-hover" src="https://gtimg.wechatpay.cn/resource/xres/img/202509/441b156fa07f0548ddda2a0b711b478e_20x20.svg" alt="" data-v-08ae15f6><div class="group-info" data-v-08ae15f6> 元宝AI </div></div><div class="group-items" data-v-08ae15f6><div class="group-item" data-v-08ae15f6><img class="group-icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/5c7b6ed2432ae0401a49a60329a1c5c9_80x80.svg" alt="" data-v-08ae15f6><img class="group-icon-hover" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/c2c45e34bb7e9c67c51b22550d44b813_80x80.svg" alt="" data-v-08ae15f6><div class="group-info" data-v-08ae15f6> 反馈 </div></div><div class="group-item" data-v-08ae15f6><img class="group-icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/55b0d9d534b0ccd145bcbe8e932f3053_80x80.svg" alt="" data-v-08ae15f6><img class="group-icon-hover" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/88d0ba6a5d2578733aa9f3c586f07224_80x80.svg" alt="" data-v-08ae15f6><div class="group-info" data-v-08ae15f6> 目录 </div></div><div class="group-item" data-v-08ae15f6><img class="group-icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/70ba1309ab6ade7e84f4f6d006c15621_48x49.png" alt="" data-v-08ae15f6><img class="group-icon-hover" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/eb04b4d41529b9413c0cba2a825c9d95_48x49.png" alt="" data-v-08ae15f6><div class="group-info" data-v-08ae15f6> 置顶 </div></div></div></div></div></div></div></main><footer class="t-layout__footer footer" data-v-45cd89fe><div class="footer-copyright" data-v-45cd89fe> Powered By Tencent &amp; Tenpay Copyright 2005-2025 Tenpay All Rights Reserved. </div><div class="footer-copyright footer-copyright-mobile" data-v-45cd89fe> Powered By Tencent &amp; Tenpay<br data-v-45cd89fe>Copyright 2005-2025 Tenpay All Rights Reserved. </div></footer></div></main></section></section></div>
        <div id="teleported"></div>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </body>
    </html>