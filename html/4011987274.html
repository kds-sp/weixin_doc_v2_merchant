<!DOCTYPE html>
    <html>
      <head>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <meta />
        
    <title>小程序纯签约_产品文档（V2）|微信支付商户文档中心</title><meta>
    <meta>
    
    
    
    
  
      </head>
      <body>
        
        <div><section><header><div><div><div><a><img></a></div><div><a>首页</a><a>接入指引</a><a>产品中心</a><a>解决方案</a><a>文档中心</a><a>接入微信支付</a></div><div><div> 文档中心 </div><img></div></div></div><div><img><div><a>首页</a><a>接入指引</a><a>产品中心</a><a>解决方案</a><a>文档中心</a><a>接入微信支付</a></div></div></header><section><div><div><div><div><a>产品文档（V2）</a><a>通用规则</a><a>SDK&amp;开发工具</a><a>更新日志</a></div></div><div><div><div><img><div>产品文档（V2）</div></div></div><div><button><span> 技术咨询 </span></button></div></div></div></div></section><section><aside><div><div><ul><li><section><p><span><span>支付产品</span></span><span></span></p><ul><li><section><p><span><span>付款码支付</span></span><span></span></p></section></li><li><section><p><span><span>JSAPI支付</span></span><span></span></p></section></li><li><section><p><span><span>Native支付</span></span><span></span></p></section></li><li><section><p><span><span>APP支付</span></span><span></span></p></section></li><li><section><p><span><span>H5支付</span></span><span></span></p></section></li><li><section><p><span><span>小程序支付</span></span><span></span></p></section></li></ul></section></li><li><section><p><span><span>运营工具</span></span><span></span></p><ul><li><section><p><span><span>现金红包</span></span><span></span></p></section></li><li><section><p><span><span>小程序红包</span></span><span></span></p></section></li><li><section><p><span><span>付款到银行卡</span></span><span></span></p></section></li><li></li><li><section><p><span><span>委托代扣</span></span><span></span></p><ul><li><div><a><span>产品介绍</span></a></div></li><li><section><p><span><span>接入指引</span></span><span></span></p></section></li><li><section><p><span><span>API列表</span></span><span></span></p><ul><li><section><p><span><span>纯签约API</span></span><span></span></p><ul><li><div><a><span>公众号纯签约</span></a></div></li><li><div><a><span>APP纯签约</span></a></div></li><li><div><a><span>小程序纯签约</span></a></div></li><li><div><a><span>H5纯签约</span></a></div></li><li><div><a><span>APP调起签约</span></a></div></li></ul></section></li><li><section><p><span><span>支付中签约</span></span><span></span></p></section></li><li><section><p><span><span>扣款及解约API</span></span><span></span></p></section></li><li><section><p><span><span>查询及回调通知API</span></span><span></span></p></section></li><li><section><p><span><span>基础API</span></span><span></span></p></section></li></ul></section></li><li><div><a><span>常见问题</span></a></div></li></ul></section></li><li></li><li></li></ul></section></li><li><section><p><span><span>扩展工具</span></span><span></span></p><ul><li><section><p><span><span>分账</span></span><span></span></p></section></li><li><section><p><span><span>清关报关</span></span><span></span></p></section></li><li></li><li></li><li></li></ul></section></li></ul></div></div></aside><main><div><main><div><div><h1>小程序纯签约</h1><span> 更新时间：2025.09.24</span><div><div><html><head></head><body><div><div><p><span><span>商户可以通过请求此接口唤起小程序委托代扣的签约页面</span></span></p></div><table><tbody><tr><td><table><tbody><tr><td><svg><path></path></svg></td><td><div><p><span><span><span>注意：</span></span></span></p></div><ul><li><p><span>用户在微信的页面中完成代扣签约后，微信会同时将签约信息通过异步通知的方式通知给商户后台。如果用户放弃签约或签约失败则不通知。</span></p></li></ul><div><p><span><span><span>商户流程介绍：</span></span></span></p></div><p><span><span>1.用户从商户小程序发起签约请求&nbsp;(商户需确认委托代扣权限已开通，模板已审批通过，小程序APPID与商户号已绑定)。</span></span></p><p><span><span>2.商户将签约请求参数按照规则拼接之后，通过小程序跳转，向签约小程序发起签约请求。</span></span></p><p><span><span>3.用户在微信签约小程序选择支付方式完成签约。</span></span></p><p><span><span>4.微信将签约结果返回给商户。</span></span></p></td></tr></tbody></table></td></tr></tbody></table><div><h2><span>接口说明</span></h2></div><div><p><span><span><span>适用对象：</span></span></span><span><span>直连商户</span></span></p></div><div><p><span><span><span>请求URL：</span></span></span><span><span>&nbsp;wx.navigateToMiniProgram(OBJECT)接口</span></span></p></div><div><p><span><span><span>接口兼容：</span></span></span><span><span>&nbsp;iOS 微信客户端 6.5.9 版本开始支持，Android 客户端即将在 6.5.10 版本开始支持</span></span></p></div><div><h2><span>OBJECT参数说明</span></h2></div><div><table><colgroup><col><col><col><col><col></colgroup><tbody><tr><th><p><span><span>参数名</span></span></p></th><th><p><span><span>变量</span></span></p></th><th><p><span><span>类型[长度限制]</span></span></p></th><th><p><span><span>必填</span></span></p></th><th><p><span><span>描述</span></span></p></th></tr><tr><td><p><span><span>微信签约小程序appid</span></span></p></td><td><p><span><span>appId</span></span></p></td><td><p><span><span>string[1,32]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>固定值&nbsp;：wxbd687630cd02ce1d</span></span><br><span><span>请在小程序配置文件app.json的配置项navigateToMiniProgramAppIdList中增加此appid</span></span><br><span><span>示例值：wxbd687630cd02ce1d</span></span></p></td></tr><tr><td><p><span><span>场景信息传递给小程序的数据</span></span></p></td><td><p><span><span>extraData</span></span></p></td><td><p><span><span>object</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>签约的请求参数，详情见extraData字段详细说明。</span></span></p></td></tr><tr><td><table><tbody><tr><td><img></td><td>场景信息传递给小程序的数据</td></tr><tr><td></td><td><div><table><colgroup><col><col><col><col><col></colgroup><tbody><tr><th><p><span><span>参数名</span></span></p></th><th><p><span><span>变量</span></span></p></th><th><p><span><span>类型[长度限制]</span></span></p></th><th><p><span><span>必填</span></span></p></th><th><p><span><span>描述</span></span></p></th></tr><tr><td><p><span><span>应用ID</span></span></p></td><td><p><span><span>appid</span></span></p></td><td><p><span><span>string[1,32]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>直连商户申请的公众号或移动应用appid。</span></span><br><span><span>示例值：wxcbda96de0b165486</span></span></p></td></tr><tr><td><p><span><span>商户号</span></span></p></td><td><p><span><span>mch_id</span></span></p></td><td><p><span><span>string[1,32]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>商户号是商户在微信申请微信支付成功后分配的账号ID，登录平台为pay.weixin.qq.com</span></span><br><span><span>示例值：1200009811</span></span></p></td></tr><tr><td><p><span><span>模板id</span></span></p></td><td><p><span><span>plan_id</span></span></p></td><td><p><span><span>string[1,28]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>协议模板id，设置路径见</span></span><span><a>开发步骤</a></span><span>。</span><br><span><span>示例值：12535</span></span></p></td></tr><tr><td><p><span><span>签约协议号</span></span></p></td><td><p><span><span>contract_code</span></span></p></td><td><p><span><span>string[1,128]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>商户侧的签约协议号，由商户生成，只能是数字、大小写字母的描述。</span></span><br><span><span>示例值：100000</span></span></p></td></tr><tr><td><p><span><span>请求序列号</span></span></p></td><td><p><span><span>request_serial</span></span></p></td><td><p><span><span>int&nbsp;64</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>商户请求签约时的序列号，要求唯一性。禁止使用0开头，序列号主要用于排序，不作为查询条件，纯数字，范围不能超过int64的范围（9223372036854775807）。</span></span><br><span><span>示例值：1000</span></span></p></td></tr><tr><td><p><span><span>用户账户展示名称</span></span></p></td><td><p><span><span>contract_display_account</span></span></p></td><td><p><span><span>string[1,128]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>签约用户的名称，用于用户签约页面的“开通账号”处进行展示，参数值不支持UTF8非3字节编码的字符，例如表情符号，所以请勿传微信昵称到该字段</span></span><br><span><span>示例值：微信代扣</span></span></p></td></tr><tr><td><p><span><span>回调通知url</span></span></p></td><td><p><span><span>notify_url</span></span></p></td><td><p><span><span>string[1,256]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>用于接收签约成功消息的回调通知地址，以http或https开头，通知url必须为外网可访问的url，不能携带参数。</span></span><br><span><span>请对notify_url参数值进行encode处理,注意是对参数值进行encode，例如参数为notify_url=“https://weixin.qq.com”，则需要encode的内容为https://weixin.qq.com。</span></span><br><span><span>携带参数类型需查看【</span></span><span><a>回调通知的接口文档</a></span><span>】</span><br><span><span>示例值：https://weixin.qq.com</span></span></p></td></tr><tr><td><p><span><span>签名</span></span></p></td><td><p><span><span>sign</span></span></p></td><td><p><span><span>string[1,32]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>详见</span></span><span><a>签名生成算法</a></span><br><span><span>示例值：C380BEC2BFD727A4B6845133519F3AD6</span></span></p></td></tr><tr><td><p><span><span>时间戳</span></span></p></td><td><p><span><span>timestamp</span></span></p></td><td><p><span><span>int&nbsp;64</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>系统当前时间，10位</span></span><br><span><span>示例值：1414488825</span></span></p></td></tr><tr><td><p><span><span>商户侧用户标识</span></span></p></td><td><p><span><span>outerid</span></span></p></td><td><p><span><span>string</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>用户在商户侧的标识</span></span><br><span><span>示例值：1414488825</span></span></p></td></tr></tbody></table></div></td></tr></tbody></table></td></tr><tr><td><p><span><span>打开小程序的页面路径</span></span></p></td><td><p><span><span>path</span></span></p></td><td><p><span><span>string[1,64]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>固定值：pages/index/index</span></span><br><span><span>示例值：pages/index/index</span></span></p></td></tr><tr><td><p><span><span>接口调用成功的回调函数</span></span></p></td><td><p><span><span>success</span></span></p></td><td><p><span><span>Function</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>&nbsp;&nbsp;-</span></span></p></td></tr><tr><td><p><span><span>接口调用失败的回调函数</span></span></p></td><td><p><span><span>fail</span></span></p></td><td><p><span><span>Function</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>&nbsp;&nbsp;-</span></span></p></td></tr><tr><td><p><span><span>接口调用结束的回调函数</span></span></p></td><td><p><span><span>complete</span></span></p></td><td><p><span><span>Function</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>调用成功、失败都会执行</span></span></p></td></tr></tbody></table></div><p><span><span>示例代码</span></span></p><div><img><pre><span><span>1</span><span><span>wx.navigateToMiniProgram({</span><span>
</span></span></span><span><span>2</span><span><span>    appId:'wxbd687630cd02ce1d',</span><span>
</span></span></span><span><span>3</span><span><span>    path:'pages/index/index',</span><span>
</span></span></span><span><span>4</span><span><span>    extraData:{</span><span>
</span></span></span><span><span>5</span><span><span>        appid:'wx426a3015555a46be',</span><span>
</span></span></span><span><span>6</span><span><span>        contract_code:'122',</span><span>
</span></span></span><span><span>7</span><span><span>        contract_display_account:'张三',</span><span>
</span></span></span><span><span>8</span><span><span>        mch_id:'1223816102',</span><span>
</span></span></span><span><span>9</span><span><span>        notify_url:'https://www.qq.com/test/papay',</span><span>
</span></span></span><span><span>10</span><span><span>        plan_id:'106',</span><span>
</span></span></span><span><span>11</span><span><span>        request_serial:123,</span><span>
</span></span></span><span><span>12</span><span><span>        timestamp:1414488825,</span><span>
</span></span></span><span><span>13</span><span><span>        sign:'FF1A406564EE701064450CA2149E2514'</span><span>
</span></span></span><span><span>14</span><span><span>    },</span><span>
</span></span></span><span><span>15</span><span><span>success(res) {</span><span>
</span></span></span><span><span>16</span><span><span>    // 成功跳转到签约小程序 </span><span>
</span></span></span><span><span>17</span><span><span>},</span><span>
</span></span></span><span><span>18</span><span><span>fail(res) {</span><span>
</span></span></span><span><span>19</span><span><span>    // 未成功跳转到签约小程序 </span><span>
</span></span></span><span><span>20</span><span><span>}</span><span>
</span></span></span><span><span>21</span><span><span>})</span></span></span></pre></div><p>&nbsp;</p><div><p><span>用户签约完成之后，会跳转回商户小程序，可通过onShow(OBJECT)所携带的参数判断判断用户由签约小程序返回商户小程序，OBJECT返回参数请查看</span><span><span><a>小程序开发文档onShow参数说明</a></span></span></p></div><div><h2><span>referrerInfo.extraData字段说明</span></h2></div><div><table><colgroup><col><col><col><col><col></colgroup><tbody><tr><th><p><span><span>参数名</span></span></p></th><th><p><span><span>变量</span></span></p></th><th><p><span><span>类型[长度限制]</span></span></p></th><th><p><span><span>必填</span></span></p></th><th><p><span><span>描述</span></span></p></th></tr><tr><td><p><span><span>返回码</span></span></p></td><td><p><span><span>return_code</span></span></p></td><td><p><span><span>string[1,16]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>客户端小程序收到的签约结果</span></span><br><span><span>SUCCESS:签约成功</span></span><br><span><span>FAIL:签约失败</span></span><br><span><span>示例值：SUCCESS</span></span></p></td></tr><tr><td><p><span><span>错误信息</span></span></p></td><td><p><span><span>return_msg</span></span></p></td><td><p><span><span>string[1,128]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>签约失败的错误信息</span></span><br><span><span>示例值：</span></span></p></td></tr><tr><td><p><span><span>委托代扣协议id</span></span></p></td><td><p><span><span>contract_id</span></span></p></td><td><p><span><span>string[1,32]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>签约成功后微信返回的委托代扣协议id</span></span><br><span><span>示例值：201710180325670965</span></span></p></td></tr></tbody></table></div><table><tbody><tr><td><table><tbody><tr><td><svg><path></path></svg></td><td><div><p><span><span><span>注意</span></span></span><span><span>：如果用户正常点击微信签约页的确定按钮返回商户小程序，那么会返回extraData&nbsp;; 如果用户点击浏览器左上角的返回，则不返回extraData</span></span></p></div></td></tr></tbody></table></td></tr></tbody></table><p><span><span>示例代码</span></span></p><div><img><pre><span><span>1</span><span><span>App</span><span>(</span><span>{</span><span>
</span></span></span><span><span>2</span><span><span>    </span><span>onShow</span><span>(</span><span>res</span><span>)</span><span> </span><span>{</span><span>
</span></span></span><span><span>3</span><span><span>        </span><span>if</span><span> </span><span>(</span><span>res</span><span>.</span><span>scene</span><span> </span><span>===</span><span> </span><span>1038</span><span>)</span><span> </span><span>{</span><span> </span><span>// 场景值1038：从被打开的小程序返回</span><span>
</span></span></span><span><span>4</span><span><span>            </span><span>const</span><span> </span><span>{</span><span> </span><span>appId</span><span>,</span><span> </span><span>extraData</span><span> </span><span>}</span><span> </span><span>=</span><span> </span><span>res</span><span>.</span><span>referrerInfo</span><span>
</span></span></span><span><span>5</span><span><span>            </span><span>if</span><span> </span><span>(</span><span>appId</span><span> </span><span>==</span><span> </span><span>'wxbd687630cd02ce1d'</span><span>)</span><span> </span><span>{</span><span> </span><span>// appId为wxbd687630cd02ce1d：从签约小程序跳转回来</span><span>
</span></span></span><span><span>6</span><span><span>                </span><span>if</span><span> </span><span>(</span><span>typeof</span><span> </span><span>extraData</span><span> </span><span>==</span><span> </span><span>'undefined'</span><span>)</span><span>{</span><span>
</span></span></span><span><span>7</span><span><span>                    </span><span>// TODO</span><span>
</span></span></span><span><span>8</span><span><span>                    </span><span>// 客户端小程序不确定签约结果，需要向商户侧后台请求确定签约结果</span><span>
</span></span></span><span><span>9</span><span><span>                    </span><span>return</span><span>;</span><span>
</span></span></span><span><span>10</span><span><span>                </span><span>}</span><span>
</span></span></span><span><span>11</span><span><span>                </span><span>if</span><span>(</span><span>extraData</span><span>.</span><span>return_code</span><span> </span><span>==</span><span> </span><span>'SUCCESS'</span><span>)</span><span>{</span><span>
</span></span></span><span><span>12</span><span><span>                    </span><span>// TODO</span><span>
</span></span></span><span><span>13</span><span><span>                    </span><span>// 客户端小程序签约成功，需要向商户侧后台请求确认签约结果</span><span>
</span></span></span><span><span>14</span><span><span>                    </span><span>var</span><span> </span><span>contract_id</span><span> </span><span>=</span><span> </span><span>extraData</span><span>.</span><span>contract_id</span><span>
</span></span></span><span><span>15</span><span><span>                    </span><span>return</span><span>;</span><span>
</span></span></span><span><span>16</span><span><span>                </span><span>}</span><span> </span><span>else</span><span> </span><span>{</span><span>
</span></span></span><span><span>17</span><span><span>                    </span><span>// TODO</span><span>
</span></span></span><span><span>18</span><span><span>                    </span><span>// 签约失败</span><span>
</span></span></span><span><span>19</span><span><span>                    </span><span>return</span><span>;</span><span>
</span></span></span><span><span>20</span><span><span>                </span><span>}</span><span>
</span></span></span><span><span>21</span><span><span>            </span><span>}</span><span>
</span></span></span><span><span>22</span><span><span>        </span><span>}</span><span>
</span></span></span><span><span>23</span><span><span>    </span><span>}</span><span>
</span></span></span><span><span>24</span><span><span>}</span><span>)</span><span>   </span></span></span></pre></div><p>&nbsp;</p></div></body></html></div><div></div></div><div><div><div> 文档是否有帮助 </div><div><button><i></i>是 </button><button><i></i>否 </button></div></div></div><div><div><div> 更多支持 </div><div><a>开发文档(服务商)</a><a>开发文档(V2版)</a><a>开发者社区</a><a>微信开放平台</a><a>微信公众平台</a><a>腾讯客服</a></div></div></div></div><div><div><div><div><div> 文档是否有帮助 </div><div><button><i></i>是 </button><button><i></i>否 </button></div></div></div><div><div><a><span>接口说明</span></a></div><div><a><span>OBJECT参数说明</span></a></div><div><a><span>referrerInfo.extraData字段说明</span></a></div></div><div><a><i></i><span>AI开发助手</span></a></div></div><div><div><div><img><img><div> 元宝AI </div></div><div><div><img><img><div> 反馈 </div></div><div><img><img><div> 目录 </div></div><div><img><img><div> 置顶 </div></div></div></div></div></div></div></main><footer><div> Powered By Tencent &amp; Tenpay Copyright 2005-2025 Tenpay All Rights Reserved. </div><div> Powered By Tencent &amp; Tenpay<br>Copyright 2005-2025 Tenpay All Rights Reserved. </div></footer></div></main></section></section></div>
        <div></div>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </body>
    </html>