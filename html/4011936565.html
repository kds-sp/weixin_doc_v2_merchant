<!DOCTYPE html>
    <html>
      <head>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <meta />
        
    <title>开发指引_产品文档（V2）|微信支付商户文档中心</title><meta>
    <meta>
    
    
    
    
  
      </head>
      <body>
        
        <div><section><header><div><div><div><a><img></a></div><div><a>首页</a><a>接入指引</a><a>产品中心</a><a>解决方案</a><a>文档中心</a><a>接入微信支付</a></div><div><div> 文档中心 </div><img></div></div></div><div><img><div><a>首页</a><a>接入指引</a><a>产品中心</a><a>解决方案</a><a>文档中心</a><a>接入微信支付</a></div></div></header><section><div><div><div><div><a>产品文档（V2）</a><a>通用规则</a><a>SDK&amp;开发工具</a><a>更新日志</a></div></div><div><div><div><img><div>产品文档（V2）</div></div></div><div><button><span> 技术咨询 </span></button></div></div></div></div></section><section><aside><div><div><ul><li><section><p><span><span>支付产品</span></span><span></span></p><ul><li><section><p><span><span>付款码支付</span></span><span></span></p></section></li><li><section><p><span><span>JSAPI支付</span></span><span></span></p></section></li><li><section><p><span><span>Native支付</span></span><span></span></p></section></li><li><section><p><span><span>APP支付</span></span><span></span></p></section></li><li><section><p><span><span>H5支付</span></span><span></span></p><ul><li><div><a><span>支付账户</span></a></div></li><li><div><a><span>场景介绍</span></a></div></li><li><div><a><span>案例介绍</span></a></div></li><li><div><a><span>业务流程</span></a></div></li><li><div><a><span>协议规则</span></a></div></li><li><div><a><span>开发指引</span></a></div></li><li><div><a><span>获取用户ip指引</span></a></div></li><li><section><p><span><span>API列表</span></span><span></span></p></section></li><li><div><a><span>常见问题</span></a></div></li></ul></section></li><li><section><p><span><span>小程序支付</span></span><span></span></p></section></li></ul></section></li><li><section><p><span><span>运营工具</span></span><span></span></p><ul><li><section><p><span><span>现金红包</span></span><span></span></p></section></li><li><section><p><span><span>小程序红包</span></span><span></span></p></section></li><li><section><p><span><span>付款到银行卡</span></span><span></span></p></section></li><li></li><li><section><p><span><span>委托代扣</span></span><span></span></p></section></li><li></li><li></li></ul></section></li><li><section><p><span><span>扩展工具</span></span><span></span></p><ul><li><section><p><span><span>分账</span></span><span></span></p></section></li><li><section><p><span><span>清关报关</span></span><span></span></p></section></li><li></li><li></li><li></li></ul></section></li></ul></div></div></aside><main><div><main><div><div><h1>开发指引</h1><span> 更新时间：2025.03.21</span><div><div><html><head></head><body><div><div><h2><span>接口流程图</span></h2></div><div><p><span><img></span> </p></div><p>&nbsp;</p><h2><span>安全标准规范流程图</span></h2><div><p><span><img></span> </p></div><p><span><span>1、 用户向商户系统后台请求下单，商户后台</span></span><span><span><span>必须做好安全校验</span></span></span></p><ul><li><p><span>当跨域请求不是</span><span><span><a>简单请求</a></span></span><span>时，浏览器会发起Options</span><span><span><a>预检请求</a></span></span><span>，此时商户后台需要支持Options请求且校验Origin头部，如果不在允许的白名单列表内，则返回403且不返回</span><code><span>Access-Control-Allow-*</span></code><span> 相关头部</span></p></li><li><p><span>针对GET/POST的跨域下单请求，商户后台需要校验Origin头部是否合法且用户Cookie是否完备（若用户未登陆则先引导登陆商户站点），否则返回403且不返回</span><code><span>Access-Control-Allow-*</span></code><span> 相关头部</span></p></li></ul><p><span><span>2、由商户后台向微信支付发起下单请求（</span></span><span><span><a>调用统一下单接口</a></span></span><span>）注：交易类型trade_type=MWEB</span></p><p><span><span>3、统一下单接口返回支付相关参数给商户后台，如支付跳转url（参数名“mweb_url”），商户通过mweb_url调起微信支付中间页</span></span></p><p><span><span>4、中间页进行H5权限的校验，安全性检查（此处常见错误请见下文）</span></span></p><p><span><span>5、如支付成功，商户后台会接收到微信侧的异步通知</span></span></p><p><span><span>6、用户在微信支付收银台完成支付或取消支付,返回商户页面（默认为返回支付发起页面）</span></span></p><p><span><span>7、商户在展示页面，引导用户主动发起支付结果的查询</span></span></p><p><span><span>8,、商户后台判断是否接收到微信侧的支付结果通知，如没有，后台调用我们的</span></span><span><span><a>订单查询接口</a></span></span><span>确认订单状态（查单实现可参考：</span><span><span><a>支付回调和查单实现指引</a></span></span><span>）</span></p><p><span><span>9、展示最终的订单支付结果给用户</span></span></p><table><tbody><tr><td><table><tbody><tr><td><svg><path></path></svg></td><td><div><p><span><span><span>注意：</span></span></span></p></div><ul><li><p><span>商户需按照安全规范进行接入，若因未遵循规范接入而出现安全问题，财付通将根据《</span><span><span><a>微信支付服务协议</a></span></span><span>》条款处理</span></p></li><li><p><span>以上图示，仅为示例，只供参考。请商户自行确认是否实现了跨越访问白名单限制和用户登录态校验。</span></p></li></ul></td></tr></tbody></table></td></tr></tbody></table><p>&nbsp;</p></div></body></html></div><div></div></div><div><div><div> 文档是否有帮助 </div><div><button><i></i>是 </button><button><i></i>否 </button></div></div></div><div><div><div> 更多支持 </div><div><a>开发文档(服务商)</a><a>开发文档(V2版)</a><a>开发者社区</a><a>微信开放平台</a><a>微信公众平台</a><a>腾讯客服</a></div></div></div></div><div><div><div><div><div> 文档是否有帮助 </div><div><button><i></i>是 </button><button><i></i>否 </button></div></div></div><div><div><a><span>接口流程图</span></a></div><div><a><span>安全标准规范流程图</span></a></div></div><div><a><i></i><span>AI开发助手</span></a></div></div><div><div><div><img><img><div> 元宝AI </div></div><div><div><img><img><div> 反馈 </div></div><div><img><img><div> 目录 </div></div><div><img><img><div> 置顶 </div></div></div></div></div></div></div></main><footer><div> Powered By Tencent &amp; Tenpay Copyright 2005-2025 Tenpay All Rights Reserved. </div><div> Powered By Tencent &amp; Tenpay<br>Copyright 2005-2025 Tenpay All Rights Reserved. </div></footer></div></main></section></section></div>
        <div></div>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </body>
    </html>