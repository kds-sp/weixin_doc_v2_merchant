<!DOCTYPE html>
    <html lang="zh-CN">
      <head>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <meta charset="UTF-8" />
        
    <title>开发指引_产品文档（V2）|微信支付商户文档中心</title><meta property="og:title" content="开发指引_产品文档（V2）|微信支付商户文档中心">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
    
    
    
  
      </head>
      <body>
        
        <div id="app"><section class="t-layout" data-v-45cd89fe><header class="t-layout__header wrap" data-v-45cd89fe data-v-24ca267f><div class="header" data-v-24ca267f><div class="header-wrap" data-v-24ca267f><div class="logo" data-v-24ca267f><a href="https://pay.weixin.qq.com/" data-v-24ca267f><img class="logo-partner" src="https://wx.gtimg.com/pay/img/common/logo.svg?v=20190327" alt data-v-24ca267f></a></div><div class="link" data-v-24ca267f><a href="https://pay.weixin.qq.com/index.php/core/home/login?return_url=%2F" class="" data-v-24ca267f>首页</a><a href="https://pay.weixin.qq.com/static/applyment_guide/applyment_index.shtml" class="" data-v-24ca267f>接入指引</a><a href="https://pay.weixin.qq.com/static/product/product_index.shtml" class="" data-v-24ca267f>产品中心</a><a href="https://pay.weixin.qq.com/static/solution/solution_index.shtml" class="" data-v-24ca267f>解决方案</a><a href="https://pay.weixin.qq.com/doc/v3/merchant/4012062524" class="selected" data-v-24ca267f>文档中心</a><a href="http://pay.weixin.qq.com/index.php/apply/applyment_home/guide_normal" class="btn-primary btn-apply" target="_blank" data-v-24ca267f>接入微信支付</a></div><div class="navbar-toggle" data-v-24ca267f><div class="navbar-toggle__des" data-v-24ca267f> 文档中心 </div><img class="navbar-toggle__icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/55b0d9d534b0ccd145bcbe8e932f3053_80x80.svg" alt data-v-24ca267f></div></div></div><div class="navbar-collapse" data-v-24ca267f><img class="close-icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/cbbd950ece1f5688079a7f55da0798f9_48x48.svg" alt data-v-24ca267f><div class="link" data-v-24ca267f><a href="https://pay.weixin.qq.com/index.php/core/home/login?return_url=%2F" class="" data-v-24ca267f>首页</a><a href="https://pay.weixin.qq.com/static/applyment_guide/applyment_index.shtml" class="" data-v-24ca267f>接入指引</a><a href="https://pay.weixin.qq.com/static/product/product_index.shtml" class="" data-v-24ca267f>产品中心</a><a href="https://pay.weixin.qq.com/static/solution/solution_index.shtml" class="" data-v-24ca267f>解决方案</a><a href="https://pay.weixin.qq.com/doc/v3/partner/4012069852" class="selected" data-v-24ca267f>文档中心</a><a href="https://pay.weixin.qq.com/index.php/apply/applyment_home/guide_normal" class="btn-primary btn-apply" target="_blank" data-v-24ca267f>接入微信支付</a></div></div></header><section class="t-layout subnavbar-layout" data-v-45cd89fe><div class="sub-navbar" data-v-204f5510><div class="sub-navbar-wrap" data-v-204f5510><div class="segment-nav" data-v-204f5510><div class="segment-nav-left" data-v-204f5510><a href="javascript:" class="selected" data-v-204f5510>产品文档（V2）</a><a href="javascript:" class="" data-v-204f5510>通用规则</a><a href="javascript:" class="" data-v-204f5510>SDK&amp;开发工具</a><a href="javascript:" class="" data-v-204f5510>更新日志</a></div></div><div class="segment-nav-box" data-v-204f5510><div class="segment-nav-toggle" data-v-204f5510><div class="sub-navbar-toggle" data-v-204f5510><img class="sub-navbar-toggle__icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/6926a37e3d500f8a9446546bb16252ad_80x80.svg" alt="" data-v-204f5510><div class="sub-navbar-toggle__des" data-v-204f5510>产品文档（V2）</div></div></div><div class="online-service" data-v-204f5510><button class="t-button t-button--variant-base t-button--theme-primary" type="button" href tabindex="0" data-v-204f5510><span class="t-button__text"> 技术咨询 </span></button></div></div></div></div></section><section class="t-layout content-layout" data-v-45cd89fe><aside class="t-layout__sider wrap" id="sidebar" data-v-45cd89fe data-v-c3fa0a07><div class="sidebar" data-v-c3fa0a07><div class="inner" data-v-c3fa0a07><ul class="sidebar-links sidebar-links-spacing" data-v-c3fa0a07><li><section class="sidebar-group collapsable depth-0"><p class="open sidebar-heading ellipsis"><span><span>支付产品</span></span><span class="up arrow"></span></p><ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><span>付款码支付</span></span><span class="down arrow"></span></p></section></li><li><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><span>JSAPI支付</span></span><span class="down arrow"></span></p></section></li><li><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><span>Native支付</span></span><span class="down arrow"></span></p></section></li><li><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><span>APP支付</span></span><span class="down arrow"></span></p></section></li><li><section class="sidebar-group collapsable depth-1"><p class="open sidebar-heading ellipsis"><span><span>H5支付</span></span><span class="up arrow"></span></p><ul class="sidebar-links sidebar-group-items"><li><div><a href="4011988025.html" class="sidebar-link ellipsis"><span>支付账户</span></a></div></li><li><div><a href="4011936237.html" class="sidebar-link ellipsis"><span>场景介绍</span></a></div></li><li><div><a href="4011936298.html" class="sidebar-link ellipsis"><span>案例介绍</span></a></div></li><li><div><a href="4011936317.html" class="sidebar-link ellipsis"><span>业务流程</span></a></div></li><li><div><a href="4011986641.html" class="sidebar-link ellipsis"><span>协议规则</span></a></div></li><li><div><a href="4011936565.html" class="active sidebar-link ellipsis"><span>开发指引</span></a></div></li><li><div><a href="4011937139.html" class="sidebar-link ellipsis"><span>获取用户ip指引</span></a></div></li><li><section class="sidebar-group collapsable depth-2"><p class="sidebar-heading ellipsis"><span><span>API列表</span></span><span class="down arrow"></span></p></section></li><li><div><a href="4011936869.html" class="sidebar-link ellipsis"><span>常见问题</span></a></div></li></ul></section></li><li><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><span>小程序支付</span></span><span class="down arrow"></span></p></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading ellipsis"><span><span>运营工具</span></span><span class="up arrow"></span></p><ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><span>现金红包</span></span><span class="down arrow"></span></p></section></li><li><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><span>小程序红包</span></span><span class="down arrow"></span></p></section></li><li><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><span>付款到银行卡</span></span><span class="down arrow"></span></p></section></li><li></li><li><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><span>委托代扣</span></span><span class="down arrow"></span></p></section></li><li></li><li></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading ellipsis"><span><span>扩展工具</span></span><span class="up arrow"></span></p><ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><span>分账</span></span><span class="down arrow"></span></p></section></li><li><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><span>清关报关</span></span><span class="down arrow"></span></p></section></li><li></li><li></li><li></li></ul></section></li></ul></div></div></aside><main class="t-layout__content" data-v-45cd89fe><div class="page-container" data-v-45cd89fe><main class="page" data-v-45cd89fe><div class="page-inner-container" data-v-45cd89fe><div id="page-content" class="page-content" data-v-45cd89fe><h1 class="content-title" data-v-45cd89fe>开发指引</h1><span class="last-updated-date" data-v-45cd89fe> 更新时间：2025.03.21</span><div id="main-content" class="theme-default-content" data-v-45cd89fe><div data-v-45cd89fe><html><head></head><body><div class="iwiki-wrapper"><div><h2 class="iwiki-h2" id="接口流程图"><span>接口流程图</span></h2></div><div><p class="iwiki-p"><span class="iwiki-inlineExtension-outer iwiki-border-none"><img src="https://gtimg.wechatpay.cn/resource/xres/mmpaydoc/static/img/164aabf688164444a7676e652d6075a5.png" name="image.png" class="iwiki-image iwiki-border-none" type="image" width="800" height="800"></span> </p></div><p class="iwiki-p">&nbsp;</p><h2 class="iwiki-h2" id="安全标准规范流程图"><span>安全标准规范流程图</span></h2><div><p class="iwiki-p"><span class="iwiki-inlineExtension-outer iwiki-border-none"><img src="https://gtimg.wechatpay.cn/resource/xres/mmpaydoc/static/img/898c764723df4b494a50b449419e98ae.png" name="image.png" class="iwiki-image iwiki-border-none" type="image" width="800" height="1102"></span> </p></div><p class="iwiki-p"><span><span>1、 用户向商户系统后台请求下单，商户后台</span></span><span><span><span>必须做好安全校验</span></span></span></p><ul class="iwiki-ul"><li class="iwiki-li"><p class="iwiki-p"><span>当跨域请求不是</span><span><span><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS#%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82" target="_blank">简单请求</a></span></span><span>时，浏览器会发起Options</span><span><span><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS#%E9%A2%84%E6%A3%80%E8%AF%B7%E6%B1%82" target="_blank">预检请求</a></span></span><span>，此时商户后台需要支持Options请求且校验Origin头部，如果不在允许的白名单列表内，则返回403且不返回</span><code><span>Access-Control-Allow-*</span></code><span> 相关头部</span></p></li><li class="iwiki-li"><p class="iwiki-p"><span>针对GET/POST的跨域下单请求，商户后台需要校验Origin头部是否合法且用户Cookie是否完备（若用户未登陆则先引导登陆商户站点），否则返回403且不返回</span><code><span>Access-Control-Allow-*</span></code><span> 相关头部</span></p></li></ul><p class="iwiki-p"><span><span>2、由商户后台向微信支付发起下单请求（</span></span><span><span><a href="4011937163.html" target="_blank">调用统一下单接口</a></span></span><span>）注：交易类型trade_type=MWEB</span></p><p class="iwiki-p"><span><span>3、统一下单接口返回支付相关参数给商户后台，如支付跳转url（参数名“mweb_url”），商户通过mweb_url调起微信支付中间页</span></span></p><p class="iwiki-p"><span><span>4、中间页进行H5权限的校验，安全性检查（此处常见错误请见下文）</span></span></p><p class="iwiki-p"><span><span>5、如支付成功，商户后台会接收到微信侧的异步通知</span></span></p><p class="iwiki-p"><span><span>6、用户在微信支付收银台完成支付或取消支付,返回商户页面（默认为返回支付发起页面）</span></span></p><p class="iwiki-p"><span><span>7、商户在展示页面，引导用户主动发起支付结果的查询</span></span></p><p class="iwiki-p"><span><span>8,、商户后台判断是否接收到微信侧的支付结果通知，如没有，后台调用我们的</span></span><span><span><a href="4011937309.html" target="_blank">订单查询接口</a></span></span><span>确认订单状态（查单实现可参考：</span><span><span><a href="https://pay.weixin.qq.com/doc/v2/merchant/4011984682" target="_blank">支付回调和查单实现指引</a></span></span><span>）</span></p><p class="iwiki-p"><span><span>9、展示最终的订单支付结果给用户</span></span></p><table cellspacing="0" cellpadding="0" border="0" class=" iwiki-commonTable" width="100%"><tbody><tr><td class="iwiki-panel" width="100%"><table cellspacing="0" cellpadding="0" border="0" class="iwiki-panel-innerTable iwiki-panel-type-success iwiki-commonTable" width="100%"><tbody><tr><td class="iwiki-panel-iconTd success" width="24" height="24" valign="top"><svg focusable="false" aria-hidden="true" viewBox="0 0 16 16"><path d="M8 1C4.13 1 1 4.13 1 8C1 11.87 4.13 15 8 15C11.87 15 15 11.87 15 8C15 4.13 11.87 1 8 1ZM11.05 6.59L7.51 10.13C7.41 10.23 7.25 10.23 7.16 10.13L4.95 7.92C4.85 7.82 4.85 7.66 4.95 7.57L5.3 7.22C5.4 7.12 5.56 7.12 5.65 7.22L7.33 8.9L10.34 5.89C10.44 5.79 10.6 5.79 10.69 5.89L11.04 6.24C11.14 6.34 11.14 6.5 11.04 6.59H11.05Z" fill="currentColor"></path></svg></td><td class="iwiki-panel-inner" width="100%"><div><p class="iwiki-p"><span><span><span>注意：</span></span></span></p></div><ul class="iwiki-ul"><li class="iwiki-li"><p class="iwiki-p"><span>商户需按照安全规范进行接入，若因未遵循规范接入而出现安全问题，财付通将根据《</span><span><span><a href="https://pay.weixin.qq.com/index.php/public/apply_sign/protocol" target="_blank">微信支付服务协议</a></span></span><span>》条款处理</span></p></li><li class="iwiki-li"><p class="iwiki-p"><span>以上图示，仅为示例，只供参考。请商户自行确认是否实现了跨越访问白名单限制和用户登录态校验。</span></p></li></ul></td></tr></tbody></table></td></tr></tbody></table><p class="iwiki-p">&nbsp;</p></div></body></html></div><div class="hr-line" data-v-45cd89fe></div></div><div class="feedback-and-moresupport" data-v-45cd89fe><div class="feedback-box" data-v-45cd89fe data-v-77eca616><div class="feedback-panel-text" data-v-77eca616> 文档是否有帮助 </div><div class="feedback-panel-choices" data-v-77eca616><button class="feedback-option" data-v-77eca616><i class="icon help-icon" data-v-77eca616></i>是 </button><button class="feedback-option" data-v-77eca616><i class="icon no-help-icon" data-v-77eca616></i>否 </button></div></div></div><div class="relative-doc-and-moresupport" data-v-45cd89fe><div class="more-support" data-v-45cd89fe data-v-e0c53a30><div class="more-support__title" data-v-e0c53a30> 更多支持 </div><div class="more-support__lists" data-v-e0c53a30><a href="https://pay.weixin.qq.com/doc/v3/partner/4012069852" target="_blank" data-v-e0c53a30>开发文档(服务商)</a><a href="https://pay.weixin.qq.com/doc/v2" target="_blank" data-v-e0c53a30>开发文档(V2版)</a><a href="https://developers.weixin.qq.com/community/pay" target="_blank" data-v-e0c53a30>开发者社区</a><a href="https://open.weixin.qq.com/" target="_blank" data-v-e0c53a30>微信开放平台</a><a href="https://mp.weixin.qq.com/" target="_blank" data-v-e0c53a30>微信公众平台</a><a href="https://kf.qq.com/product/wechatpaymentmerchant.html" target="_blank" data-v-e0c53a30>腾讯客服</a></div></div></div></div><div class="sub-sidebar" data-v-45cd89fe data-v-7f9bf920><div class="toc" data-v-7f9bf920><div class="mb32" data-v-7f9bf920><div class="feedback-box" data-v-7f9bf920 data-v-77eca616><div class="feedback-panel-text" data-v-77eca616> 文档是否有帮助 </div><div class="feedback-panel-choices" data-v-77eca616><button class="feedback-option" data-v-77eca616><i class="icon help-icon" data-v-77eca616></i>是 </button><button class="feedback-option" data-v-77eca616><i class="icon no-help-icon" data-v-77eca616></i>否 </button></div></div></div><div class="toc-container mb40" data-v-7f9bf920 data-v-c65b4426><div class="toc-h2 toc-active toc-item" data-v-c65b4426><a href="4011936565.html#接口流程图" title="接口流程图" class="ellipsis" data-v-c65b4426><span data-v-c65b4426>接口流程图</span></a></div><div class="toc-h2 toc-item" data-v-c65b4426><a href="4011936565.html#安全标准规范流程图" title="安全标准规范流程图" class="ellipsis" data-v-c65b4426><span data-v-c65b4426>安全标准规范流程图</span></a></div></div><div class="support-container" data-v-7f9bf920 data-v-787fd1f1><a href="https://support.pay.weixin.qq.com/aidevhelper?from=wechatpaydoc" target="_blank" class="support-btn" data-v-787fd1f1><i class="support-icon" data-v-787fd1f1></i><span class="support-text" data-v-787fd1f1>AI开发助手</span></a></div></div><div class="toc-mobile" data-v-7f9bf920><div class="sub-sidebar-group" data-v-7f9bf920 data-v-18ea8254><div class="group-item" data-v-18ea8254><img class="group-icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202509/441b156fa07f0548ddda2a0b711b478e_20x20.svg" alt="" data-v-18ea8254><img class="group-icon-hover" src="https://gtimg.wechatpay.cn/resource/xres/img/202511/d17b46871fb8b4187e40e334c9564e6f_84x84.png" alt="" data-v-18ea8254><div class="group-info" data-v-18ea8254> 元宝AI </div></div><div class="group-items" data-v-18ea8254><div class="group-item" data-v-18ea8254><img class="group-icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/5c7b6ed2432ae0401a49a60329a1c5c9_80x80.svg" alt="" data-v-18ea8254><img class="group-icon-hover" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/c2c45e34bb7e9c67c51b22550d44b813_80x80.svg" alt="" data-v-18ea8254><div class="group-info" data-v-18ea8254> 反馈 </div></div><div class="group-item" data-v-18ea8254><img class="group-icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/55b0d9d534b0ccd145bcbe8e932f3053_80x80.svg" alt="" data-v-18ea8254><img class="group-icon-hover" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/88d0ba6a5d2578733aa9f3c586f07224_80x80.svg" alt="" data-v-18ea8254><div class="group-info" data-v-18ea8254> 目录 </div></div><div class="group-item" data-v-18ea8254><img class="group-icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/70ba1309ab6ade7e84f4f6d006c15621_48x49.png" alt="" data-v-18ea8254><img class="group-icon-hover" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/eb04b4d41529b9413c0cba2a825c9d95_48x49.png" alt="" data-v-18ea8254><div class="group-info" data-v-18ea8254> 置顶 </div></div></div></div></div></div></div></main><footer class="t-layout__footer footer" data-v-45cd89fe><div class="footer-copyright" data-v-45cd89fe> Powered By Tencent &amp; Tenpay Copyright 2005-2025 Tenpay All Rights Reserved. </div><div class="footer-copyright footer-copyright-mobile" data-v-45cd89fe> Powered By Tencent &amp; Tenpay<br data-v-45cd89fe>Copyright 2005-2025 Tenpay All Rights Reserved. </div></footer></div></main></section></section></div>
        <div id="teleported"></div>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </body>
    </html>