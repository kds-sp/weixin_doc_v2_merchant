<!DOCTYPE html>
    <html>
      <head>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <meta />
        
    <title>付款码支付_产品文档（V2）|微信支付商户文档中心</title><meta>
    <meta>
    
    
    
    
  
      </head>
      <body>
        
        <div><section><header><div><div><div><a><img></a></div><div><a>首页</a><a>接入指引</a><a>产品中心</a><a>解决方案</a><a>文档中心</a><a>接入微信支付</a></div><div><div> 文档中心 </div><img></div></div></div><div><img><div><a>首页</a><a>接入指引</a><a>产品中心</a><a>解决方案</a><a>文档中心</a><a>接入微信支付</a></div></div></header><section><div><div><div><div><a>产品文档（V2）</a><a>通用规则</a><a>SDK&amp;开发工具</a><a>更新日志</a></div></div><div><div><div><img><div>产品文档（V2）</div></div></div><div><button><span> 技术咨询 </span></button></div></div></div></div></section><section><aside><div><div><ul><li><section><p><span><span>支付产品</span></span><span></span></p><ul><li><section><p><span><span>付款码支付</span></span><span></span></p><ul><li><div><a><span>支付账户</span></a></div></li><li><div><a><span>场景介绍</span></a></div></li><li><div><a><span>验证密码规则</span></a></div></li><li><div><a><span>案例介绍</span></a></div></li><li><div><a><span>协议规则</span></a></div></li><li><div><a><span>开发指引</span></a></div></li><li><section><p><span><span>API列表</span></span><span></span></p><ul><li><div><a><span>付款码支付</span></a></div></li><li><div><a><span>查询订单</span></a></div></li><li><div><a><span>撤销订单</span></a></div></li><li><div><a><span>申请退款</span></a></div></li><li><div><a><span>查询退款</span></a></div></li><li><div><a><span>下载交易账单</span></a></div></li><li><div><a><span>下载资金账单</span></a></div></li><li><div><a><span>交易保障</span></a></div></li><li><div><a><span>付款码查询openid</span></a></div></li><li><div><a><span>退款结果通知</span></a></div></li></ul></section></li><li><div><a><span>常见问题</span></a></div></li></ul></section></li><li><section><p><span><span>JSAPI支付</span></span><span></span></p></section></li><li><section><p><span><span>Native支付</span></span><span></span></p></section></li><li><section><p><span><span>APP支付</span></span><span></span></p></section></li><li><section><p><span><span>H5支付</span></span><span></span></p></section></li><li><section><p><span><span>小程序支付</span></span><span></span></p></section></li></ul></section></li><li><section><p><span><span>运营工具</span></span><span></span></p><ul><li><section><p><span><span>现金红包</span></span><span></span></p></section></li><li><section><p><span><span>小程序红包</span></span><span></span></p></section></li><li><section><p><span><span>付款到银行卡</span></span><span></span></p></section></li><li></li><li><section><p><span><span>委托代扣</span></span><span></span></p></section></li><li></li><li></li></ul></section></li><li><section><p><span><span>扩展工具</span></span><span></span></p><ul><li><section><p><span><span>分账</span></span><span></span></p></section></li><li><section><p><span><span>清关报关</span></span><span></span></p></section></li><li></li><li></li><li></li></ul></section></li></ul></div></div></aside><main><div><main><div><div><h1>付款码支付</h1><span> 更新时间：2025.08.14</span><div><div><html><head></head><body><div><div><h2>应用场景</h2></div><div><p><span><span>收银员使用扫码设备读取微信用户付款码以后，二维码或条码信息会传送至商户收银台，由商户收银台或者商户后台调用该接口发起支付。</span></span></p></div><table><tbody><tr><td><table><tbody><tr><td><svg><path></path></svg></td><td><div><p><span><span><span>注意</span></span></span></p></div><div><p><span><span>1、提交支付请求后微信会同步返回支付结果。当返回结果为“系统错误”时，商户系统等待5秒后调用【</span></span><span><span><a>查询订单API</a></span></span><span>】，查询支付实际交易结果；当返回结果为“USERPAYING”时，商户系统可设置间隔时间(建议10秒)重新查询支付结果，直到支付成功或超时(建议45秒)；</span></p></div><div><p><span><span>2、在调用查询接口返回后，如果交易状况不明晰，请调用【</span></span><span><span><a>撤销订单API</a></span></span><span>】，此时如果交易失败则关闭订单，该单不能再支付成功；如果交易成功，则将扣款退回到用户账户。当撤销无返回或错误时，请再次调用。注意：请勿扣款后立即调用【</span><span><span><a>撤销订单API</a></span></span><span>】,建议至少15秒后再调用。撤销订单API需要双向证书。</span></p></div></td></tr></tbody></table></td></tr></tbody></table><div><h2>状态机</h2></div><div><p><span><span>支付状态转变如下：</span></span></p></div><div><p><span><img></span>&nbsp;</p></div><div><h2>接口地址【<span><a>SDK下载</a></span>】</h2></div><div><p><span><span>URL地址：https://api.mch.weixin.qq.com/pay/micropay</span></span></p></div><div><p><span><span>URL地址：https://api2.mch.weixin.qq.com/pay/micropay(备用域名)</span></span><span><span><a>见跨城冗灾方案</a></span></span></p></div><div><h2>是否需要证书</h2></div><div><p><span><span>不需要。</span></span></p></div><div><h2><span>输入参数</span></h2></div><div><table><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><th><p><span><span>名称</span></span></p></th><th><p><span><span>变量名</span></span></p></th><th><p><span><span>必填</span></span></p></th><th><p><span><span>类型</span></span></p></th><th><p><span><span>示例值</span></span></p></th><th><p><span><span>描述</span></span></p></th></tr><tr><td><p><span><span>公众账号ID</span></span></p></td><td><p><span><span>appid</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>String(32)</span></span></p></td><td><p><span><span>wx8888888888888888</span></span></p></td><td><p><span>appid</span><span><span>(开发者ID)是商户在微信</span></span><span><span><a>开放平台</a></span></span><span><span>(移动应用)或</span></span><span><span><a>企业号corpid</a></span></span><span><span>(即为appid)</span></span><span><span>或</span></span><span><span><a>公众平台</a></span></span><span><span>(服务号/政府或媒体类型的公众号/小程序)上的账号开发识别码，该</span></span><code><span>appid</span></code><span><span>必须与商户号</span></span><span>mchid</span><span><span>进行</span></span><span><span><a>绑定</a></span></span><span><span>。</span></span></p></td></tr><tr><td><p><span><span>商户号</span></span></p></td><td><p><span><span>mch_id</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>String(32)</span></span></p></td><td><p><span><span>1900000109</span></span></p></td><td><p><span><span>微信支付分配的商户号</span></span></p></td></tr><tr><td><p><span><span>设备号</span></span></p></td><td><p><span><span>device_info</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>String(32)</span></span></p></td><td><p><span><span>013467007045764</span></span></p></td><td><p><span><span>终端设备号(商户自定义，如门店编号)</span></span></p></td></tr><tr><td><p><span><span>随机字符串</span></span></p></td><td><p><span><span>nonce_str</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>String(32)</span></span></p></td><td><p><span><span>5K8264ILTKCH16CQ2502SI8ZNMTM67VS</span></span></p></td><td><p><span><span>随机字符串，不长于32位。推荐</span></span><span><span><a>随机数生成算法</a></span></span></p></td></tr><tr><td><p><span><span>签名</span></span></p></td><td><p><span><span>sign</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>String(32)</span></span></p></td><td><p><span><span>C380BEC2BFD727A4B6845133519F3AD6</span></span></p></td><td><p><span><span>签名，</span></span><span><span><a>详见签名生成算法</a></span></span></p></td></tr><tr><td><p><span><span>签名类型</span></span></p></td><td><p><span><span>sign_type</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>String(32)</span></span></p></td><td><p><span><span>HMAC-SHA256</span></span></p></td><td><p><span><span>签名类型，目前支持HMAC-SHA256和MD5，默认为MD5</span></span></p></td></tr><tr><td><p><span><span>商品描述</span></span></p></td><td><p><span><span>body</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>String(127)</span></span></p></td><td><p><span><span>image形象店-深圳腾大-&nbsp;QQ公仔</span></span></p></td><td><p><span><span>商品简单描述，该字段须严格按照规范传递，具体请见</span></span><span><span><a>参数规定</a></span></span></p></td></tr><tr><td><p><span><span>商品详情</span></span></p></td><td><p><span><span>detail</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>String(6000)</span></span></p></td><td><p><span><span>[{</span></span><br><span><span>"goods_detail":[</span></span><br><span><span>{</span></span><br><span><span>"goods_id":"iphone6s_16G",</span></span><br><span><span>"wxpay_goods_id":"1001",</span></span><br><span><span>"goods_name":"iPhone6s&nbsp;16G",</span></span><br><span><span>"quantity":1,</span></span><br><span><span>"price":528800,</span></span><br><span><span>"goods_category":"123456",</span></span><br><span><span>"body":"苹果手机"</span></span><br><span><span>},</span></span><br><span><span>{</span></span><br><span><span>"goods_id":"iphone6s_32G",</span></span><br><span><span>"wxpay_goods_id":"1002",</span></span><br><span><span>"goods_name":"iPhone6s&nbsp;32G",</span></span><br><span><span>"quantity":1,</span></span><br><span><span>"price":608800,</span></span><br><span><span>"goods_category":"123789",</span></span><br><span><span>"body":"苹果手机"</span></span><br><span><span>}</span></span><br><span><span>]</span></span><br><span><span>}]</span></span></p></td><td><p><span><span>单品优惠功能字段，需要接入详见</span></span><span><span><a>单品优惠详细说明</a></span></span></p></td></tr><tr><td><p><span><span>附加数据</span></span></p></td><td><p><span><span>attach</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>String(127)</span></span></p></td><td><p><span><span>说明</span></span></p></td><td><p><span><span>附加数据，在查询API和支付通知中原样返回，该字段主要用于商户携带订单的自定义数据</span></span></p></td></tr><tr><td><p><span><span>商户订单号</span></span></p></td><td><p><span><span>out_trade_no</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>String(32)</span></span></p></td><td><p><span><span>1217752501201407033233368018</span></span></p></td><td><p><span><span>商户系统内部订单号，要求32个字符内（最少6个字符），只能是数字、大小写字母_-|*且在同一个商户号下唯一。详见</span></span><span><span><a>商户订单号</a></span></span></p></td></tr><tr><td><p><span><span>订单金额</span></span></p></td><td><p><span><span>total_fee</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>int</span></span></p></td><td><p><span><span>888</span></span></p></td><td><p><span><span>订单总金额，单位为分，只能为整数，详见</span></span><span><span><a>支付金额</a></span></span></p></td></tr><tr><td><p><span><span>货币类型</span></span></p></td><td><p><span><span>fee_type</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>String(16)</span></span></p></td><td><p><span><span>CNY</span></span></p></td><td><p><span><span>符合ISO4217标准的三位字母代码，默认人民币：CNY，详见</span></span><span><span><a>货币类型</a></span></span></p></td></tr><tr><td><p><span><span>终端IP</span></span></p></td><td><p><span><span>spbill_create_ip</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>String(64)</span></span></p></td><td><p><span><span>8.8.8.8</span></span></p></td><td><p><span><span>支持IPV4和IPV6两种格式的IP地址。调用微信支付API的机器IP</span></span></p></td></tr><tr><td><p><span><span>订单优惠标记</span></span></p></td><td><p><span><span>goods_tag</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>String(32)</span></span></p></td><td><p><span><span>WXG</span></span></p></td><td><p><span><span>订单优惠标记，代金券或立减优惠功能的参数，详见</span></span><span><span><a>代金券或立减优惠</a></span></span></p></td></tr><tr><td><p><span><span>交易起始时间</span></span></p></td><td><p><span><span>time_start</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>String(14)</span></span></p></td><td><p><span><span>20091225091010</span></span></p></td><td><p><span><span>订单生成时间，格式为yyyyMMddHHmmss，如2009年12月25日9点10分10秒表示为20091225091010。其他详见</span></span><span><span><a>时间规则</a></span></span></p></td></tr><tr><td><p><span><span>交易结束时间</span></span></p></td><td><p><span><span>time_expire</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>String(14)</span></span></p></td><td><p><span><span>20091227091010</span></span></p></td><td><p><span><span>订单失效时间，格式为yyyyMMddHHmmss，如2009年12月27日9点10分10秒表示为20091227091010。</span></span></p></td></tr><tr><td><p><span><span>电子发票入口开放标识</span></span></p></td><td><p><span><span>receipt</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>String(8)</span></span></p></td><td><p><span><span>Y</span></span></p></td><td><p><span><span>Y，传入Y时，支付成功消息和支付详情页将出现开票入口。需要在微信支付商户平台或微信公众平台开通电子发票功能，传此字段才可生效</span></span></p></td></tr><tr><td><p><span><span>付款码</span></span></p></td><td><p><span><span>auth_code</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>String(128)</span></span></p></td><td><p><span><span>120061098828009406</span></span></p></td><td><p><span><span>扫码支付付款码，设备读取用户微信中的条码或者二维码信息</span></span><br><span><span>（用户付款码规则：18位纯数字，前缀以10、11、12、13、14、15开头）</span></span></p></td></tr><tr><td><p><span><span>是否需要分账</span></span></p></td><td><p><span><span>profit_sharing</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>String(16)</span></span></p></td><td><p><span><span>Y</span></span></p></td><td><p><span><span>Y-是，需要分账</span></span><br><span><span>N-否，不分账</span></span><br><span><span>字母要求大写，不传默认不分账</span></span></p></td></tr><tr><td><p><span><span>场景信息</span></span></p></td><td><p><span><span>scene_info</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>String(256)</span></span></p></td><td><p><span><span>{"store_info"&nbsp;: {</span></span><br><span><span>"id":&nbsp;"SZTX001",</span></span><br><span><span>"name":&nbsp;"腾大餐厅",</span></span><br><span><span>"area_code":&nbsp;"440305",</span></span><br><span><span>"address":&nbsp;"科技园中一路腾讯大厦" }}</span></span></p></td><td><p><span><span>该字段用于上报场景信息，目前支持上报实际门店信息。该字段为JSON对象数据，对象格式为{"store_info":{"id":&nbsp;"门店ID","name": "名称","area_code": "编码","address": "地址" }} ，字段详细说明请点击下行的&gt;展开</span></span></p></td></tr><tr><td><table><tbody><tr><td><img></td><td>场景信息</td></tr><tr><td></td><td><div><table><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><th><p><span><span>字段名</span></span></p></th><th><p><span><span>变量名</span></span></p></th><th><p><span><span>必填</span></span></p></th><th><p><span><span>类型</span></span></p></th><th><p><span><span>示例值</span></span></p></th><th><p><span><span>描述</span></span></p></th></tr><tr><td><p><span><span>门店id</span></span></p></td><td><p><span><span>id</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>String(32)</span></span></p></td><td><p><span><span>SZTX001</span></span></p></td><td><p><span><span>门店唯一标识</span></span></p></td></tr><tr><td><p><span><span>门店名称</span></span></p></td><td><p><span><span>name</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>String(64)</span></span></p></td><td><p><span><span>腾讯大厦腾大餐厅</span></span></p></td><td><p><span><span>门店名称&nbsp;</span></span></p></td></tr><tr><td><p><span><span>门店行政区划码</span></span></p></td><td><p><span><span>area_code</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>String(6)</span></span></p></td><td><p><span><span>440305</span></span></p></td><td><p><span><span>门店所在地行政区划码，详细见</span></span><span><span><span><svg><g><path></path></g><defs><clipPath><path></path></clipPath></defs></svg></span><a>最新县及县以上行政区划代码.csv</a></span></span></p></td></tr><tr><td><p><span><span>门店详细地址</span></span></p></td><td><p><span><span>address</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>String(128)</span></span></p></td><td><p><span><span>科技园中一路腾讯大厦</span></span></p></td><td><p><span><span>门店详细地址</span></span></p></td></tr></tbody></table></div></td></tr></tbody></table></td></tr></tbody></table></div><div><p><span><span>举例如下：</span></span></p></div><div><img><pre><span><span>1</span><span><span>&lt;xml&gt;</span><span>
</span></span></span><span><span>2</span><span><span>&nbsp; &nbsp;&lt;appid&gt;wx2421b1c4370ec43b&lt;/appid&gt;</span><span>
</span></span></span><span><span>3</span><span><span>&nbsp; &nbsp;&lt;attach&gt;订单额外描述&lt;/attach&gt;</span><span>
</span></span></span><span><span>4</span><span><span>&nbsp; &nbsp;&lt;auth_code&gt;120269300684844649&lt;/auth_code&gt;</span><span>
</span></span></span><span><span>5</span><span><span>&nbsp; &nbsp;&lt;body&gt;付款码支付测试&lt;/body&gt;</span><span>
</span></span></span><span><span>6</span><span><span>&nbsp; &nbsp;&lt;device_info&gt;1000&lt;/device_info&gt;</span><span>
</span></span></span><span><span>7</span><span><span>&nbsp; &nbsp;&lt;goods_tag&gt;&lt;/goods_tag&gt;</span><span>
</span></span></span><span><span>8</span><span><span>&nbsp; &nbsp;&lt;mch_id&gt;10000100&lt;/mch_id&gt;</span><span>
</span></span></span><span><span>9</span><span><span>&nbsp; &nbsp;&lt;nonce_str&gt;8aaee146b1dee7cec9100add9b96cbe2&lt;/nonce_str&gt;</span><span>
</span></span></span><span><span>10</span><span><span>&nbsp; &nbsp;&lt;out_trade_no&gt;1415757673&lt;/out_trade_no&gt;</span><span>
</span></span></span><span><span>11</span><span><span>&nbsp; &nbsp;&lt;spbill_create_ip&gt;14.17.22.52&lt;/spbill_create_ip&gt;</span><span>
</span></span></span><span><span>12</span><span><span>&nbsp; &nbsp;&lt;time_expire&gt;&lt;/time_expire&gt;</span><span>
</span></span></span><span><span>13</span><span><span>&nbsp; &nbsp;&lt;total_fee&gt;1&lt;/total_fee&gt;</span><span>
</span></span></span><span><span>14</span><span><span>&nbsp; &nbsp;&lt;sign&gt;C29DB7DB1FD4136B84AE35604756362C&lt;/sign&gt;</span><span>
</span></span></span><span><span>15</span><span><span>&lt;/xml&gt;</span></span></span></pre></div><div><p><span>注：参数值用XML转义即可，CDATA标签用于说明数据不被XML解析器解析。</span></p></div><div><h2>返回结果</h2></div><div><table><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><th><p>名称</p></th><th><p>变量名</p></th><th><p>必填</p></th><th><p>类型</p></th><th><p>示例值</p></th><th><p>描述</p></th></tr><tr><td><p>返回状态码</p></td><td><p>return_code</p></td><td><p>是</p></td><td><p>String(16)</p></td><td><p>SUCCESS</p></td><td><p>SUCCESS/FAIL</p><p>此字段是接口通信情况标识，非交易成功与否的标识</p></td></tr><tr><td><p>返回信息</p></td><td><p>return_msg</p></td><td><p>是</p></td><td><p>String(128)</p></td><td><p>OK</p></td><td><p>当return_code为FAIL时返回信息为错误原因&nbsp;，例如</p><p>签名失败</p><p>参数格式校验错误</p></td></tr></tbody></table></div><div><p><span>当return_code为SUCCESS的时候，还会包括以下字段：</span></p></div><div><table><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><th><p><span>名称</span></p></th><th><p><span>变量名</span></p></th><th><p><span>必填</span></p></th><th><p><span>类型</span></p></th><th><p><span>示例值</span></p></th><th><p><span>描述</span></p></th></tr><tr><td><p><span>公众账号ID</span></p></td><td><p><span>appid</span></p></td><td><p><span>是</span></p></td><td><p><span>String(32)</span></p></td><td><p><span>wx8888888888888888</span></p></td><td><p><span>调用接口提交的公众账号ID</span></p></td></tr><tr><td><p><span>商户号</span></p></td><td><p><span>mch_id</span></p></td><td><p><span>是</span></p></td><td><p><span>String(32)</span></p></td><td><p><span>1900000109</span></p></td><td><p><span>调用接口提交的商户号</span></p></td></tr><tr><td><p><span>设备号</span></p></td><td><p><span>device_info</span></p></td><td><p><span>否</span></p></td><td><p><span>String(32)</span></p></td><td><p><span>013467007045764</span></p></td><td><p><span>调用接口提交的终端设备号，</span></p></td></tr><tr><td><p><span>随机字符串</span></p></td><td><p><span>nonce_str</span></p></td><td><p><span>是</span></p></td><td><p><span>String(32)</span></p></td><td><p><span>5K8264ILTKCH16CQ2502SI8ZNMTM67VS</span></p></td><td><p><span>微信返回的随机字符串</span></p></td></tr><tr><td><p><span>签名</span></p></td><td><p><span>sign</span></p></td><td><p><span>是</span></p></td><td><p><span>String(32)</span></p></td><td><p><span>C380BEC2BFD727A4B6845133519F3AD6</span></p></td><td><p><span>微信返回的签名，详见</span><span><span><a>签名生成算法</a></span></span></p></td></tr><tr><td><p><span>业务结果</span></p></td><td><p><span>result_code</span></p></td><td><p><span>是</span></p></td><td><p><span>String(16)</span></p></td><td><p><span>SUCCESS</span></p></td><td><p><span>SUCCESS/FAIL</span></p></td></tr><tr><td><p><span>错误代码</span></p></td><td><p><span>err_code</span></p></td><td><p><span>否</span></p></td><td><p><span>String(32)</span></p></td><td><p><span>SYSTEMERROR</span></p></td><td><p><span>详细参见错误列表</span></p></td></tr><tr><td><p><span>错误代码描述</span></p></td><td><p><span>err_code_des</span></p></td><td><p><span>否</span></p></td><td><p><span>String(128)</span></p></td><td><p><span>系统错误</span></p></td><td><p><span>错误返回的信息描述</span></p></td></tr></tbody></table></div><div><p><span>当return_code&nbsp;和result_code都为SUCCESS的时，还会包括以下字段：</span></p></div><div><p><span><span>交易成功判断条件：return_code</span></span><span>和</span><span><span>result_code</span></span><span>都为SUCCESS且</span><span><span>trade_type</span></span><span>为MICROPAY</span></p></div><div><table><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><th><p><span>名称</span></p></th><th><p><span>变量名</span></p></th><th><p><span>必填</span></p></th><th><p><span>类型</span></p></th><th><p><span>示例值</span></p></th><th><p><span>描述</span></p></th></tr><tr><td><p><span>用户标识</span></p></td><td><p><span>openid</span></p></td><td><p><span>是</span></p></td><td><p><span>String(128)</span></p></td><td><p><span>Y</span></p></td><td><p><span>用户在商户appid&nbsp;下的唯一标识</span></p></td></tr><tr><td><p><span>是否关注公众账号</span></p></td><td><p><span>is_subscribe</span></p></td><td><p><span>是</span></p></td><td><p><span>String(1)</span></p></td><td><p><span>N</span></p></td><td><p><span>已废弃，默认统一返回N</span></p></td></tr><tr><td><p><span>交易类型</span></p></td><td><p><span>trade_type</span></p></td><td><p><span>是</span></p></td><td><p><span>String(16)</span></p></td><td><p><span>MICROPAY</span></p></td><td><p><span>MICROPAY&nbsp;付款码支付</span></p></td></tr><tr><td><p><span>付款银行</span></p></td><td><p><span>bank_type</span></p></td><td><p><span>是</span></p></td><td><p><span>String(32)</span></p></td><td><p><span>CMC</span></p></td><td><p><span>银行类型，采用字符串类型的银行标识，详见</span><span><span><a>银行类型</a></span></span></p></td></tr><tr><td><p><span>货币类型</span></p></td><td><p><span>fee_type</span></p></td><td><p><span>否</span></p></td><td><p><span>String(16)</span></p></td><td><p><span>CNY</span></p></td><td><p><span>符合ISO&nbsp;4217标准的三位字母代码，默认人民币：CNY，详见</span><span><span><a>货币类型</a></span></span></p></td></tr><tr><td><p><span>订单金额</span></p></td><td><p><span>total_fee</span></p></td><td><p><span>是</span></p></td><td><p><span>int</span></p></td><td><p><span>888</span></p></td><td><p><span>订单总金额，单位为分，只能为整数，详见</span><span><span><a>支付金额</a></span></span></p></td></tr><tr><td><p><span>应结订单金额</span></p></td><td><p><span>settlement_total_fee</span></p></td><td><p><span>否</span></p></td><td><p><span>int</span></p></td><td><p><span>100</span></p></td><td><p><span>当订单使用了免充值型优惠券后返回该参数，应结订单金额=订单金额-免充值优惠券金额。</span></p></td></tr><tr><td><p><span>代金券金额</span></p></td><td><p><span>coupon_fee</span></p></td><td><p><span>否</span></p></td><td><p><span>int</span></p></td><td><p><span>100</span></p></td><td><p><span>“代金券”金额&lt;=订单金额，订单金额-“代金券”金额=现金支付金额，详见</span><span><span><a>支付金额</a></span></span></p></td></tr><tr><td><p><span>现金支付货币类型</span></p></td><td><p><span>cash_fee_type</span></p></td><td><p><span>否</span></p></td><td><p><span>String(16)</span></p></td><td><p><span>CNY</span></p></td><td><p><span>符合ISO&nbsp;4217标准的三位字母代码，默认人民币：CNY，其他值列表详见</span><span><span><a>货币类型</a></span></span></p></td></tr><tr><td><p><span>现金支付金额</span></p></td><td><p><span>cash_fee</span></p></td><td><p><span>是</span></p></td><td><p><span>int</span></p></td><td><p><span>100</span></p></td><td><p><span>订单现金支付金额，详见</span><span><span><a>支付金额</a></span></span></p></td></tr><tr><td><p><span>微信支付订单号</span></p></td><td><p><span>transaction_id</span></p></td><td><p><span>是</span></p></td><td><p><span>String(32)</span></p></td><td><p><span>1217752501201407033233368018</span></p></td><td><p><span>微信支付订单号</span></p></td></tr><tr><td><p><span>商户订单号</span></p></td><td><p><span>out_trade_no</span></p></td><td><p><span>是</span></p></td><td><p><span>String(32)</span></p></td><td><p><span>1217752501201407033233368018</span></p></td><td><p><span>商户系统内部订单号，要求32个字符内（最少6个字符），只能是数字、大小写字母_-|*且在同一个商户号下唯一。详见</span><span><span><a>商户订单号</a></span></span></p></td></tr><tr><td><p><span>商家数据包</span></p></td><td><p><span>attach</span></p></td><td><p><span>否</span></p></td><td><p><span>String(127)</span></p></td><td><p><span>123456</span></p></td><td><p><span>商家数据包，原样返回</span></p></td></tr><tr><td><p><span>支付完成时间</span></p></td><td><p><span>time_end</span></p></td><td><p><span>是</span></p></td><td><p><span>String(14)</span></p></td><td><p><span>20141030133525</span></p></td><td><p><span>订单生成时间，格式为yyyyMMddHHmmss，如2009年12月25日9点10分10秒表示为20091225091010。详见</span><span><span><a>时间规则</a></span></span></p></td></tr><tr><td><p><span>营销详情</span></p></td><td><p><span>promotion_detail</span></p></td><td><p><span>否</span></p></td><td><p><span>String(6000)</span></p></td><td><p><span>示例见下文</span></p></td><td><p><span>新增返回，单品优惠功能字段，需要接入请见</span><span><span><a>详细说明</a></span></span></p></td></tr></tbody></table></div><div><p><span>举例如下：</span></p></div><div><img><pre><span><span>1</span><span><span>&lt;xml&gt;</span><span>
</span></span></span><span><span>2</span><span><span>&nbsp; &nbsp;&lt;return_code&gt;&lt;![CDATA[SUCCESS]]&gt;&lt;/return_code&gt;</span><span>
</span></span></span><span><span>3</span><span><span>&nbsp; &nbsp;&lt;return_msg&gt;&lt;![CDATA[OK]]&gt;&lt;/return_msg&gt;</span><span>
</span></span></span><span><span>4</span><span><span>&nbsp; &nbsp;&lt;appid&gt;&lt;![CDATA[wx2421b1c4370ec43b]]&gt;&lt;/appid&gt;</span><span>
</span></span></span><span><span>5</span><span><span>&nbsp; &nbsp;&lt;mch_id&gt;&lt;![CDATA[10000100]]&gt;&lt;/mch_id&gt;</span><span>
</span></span></span><span><span>6</span><span><span>&nbsp; &nbsp;&lt;device_info&gt;&lt;![CDATA[1000]]&gt;&lt;/device_info&gt;</span><span>
</span></span></span><span><span>7</span><span><span>&nbsp; &nbsp;&lt;nonce_str&gt;&lt;![CDATA[GOp3TRyMXzbMlkun]]&gt;&lt;/nonce_str&gt;</span><span>
</span></span></span><span><span>8</span><span><span>&nbsp; &nbsp;&lt;sign&gt;&lt;![CDATA[D6C76CB785F07992CDE05494BB7DF7FD]]&gt;&lt;/sign&gt;</span><span>
</span></span></span><span><span>9</span><span><span>&nbsp; &nbsp;&lt;result_code&gt;&lt;![CDATA[SUCCESS]]&gt;&lt;/result_code&gt;</span><span>
</span></span></span><span><span>10</span><span><span>&nbsp; &nbsp;&lt;openid&gt;&lt;![CDATA[oUpF8uN95-Ptaags6E_roPHg7AG0]]&gt;&lt;/openid&gt;</span><span>
</span></span></span><span><span>11</span><span><span>&nbsp; &nbsp;&lt;is_subscribe&gt;&lt;![CDATA[N]]&gt;&lt;/is_subscribe&gt;</span><span>
</span></span></span><span><span>12</span><span><span>&nbsp; &nbsp;&lt;trade_type&gt;&lt;![CDATA[MICROPAY]]&gt;&lt;/trade_type&gt;</span><span>
</span></span></span><span><span>13</span><span><span>&nbsp; &nbsp;&lt;bank_type&gt;&lt;![CDATA[CCB_DEBIT]]&gt;&lt;/bank_type&gt;</span><span>
</span></span></span><span><span>14</span><span><span>&nbsp; &nbsp;&lt;total_fee&gt;1&lt;/total_fee&gt;</span><span>
</span></span></span><span><span>15</span><span><span>&nbsp; &nbsp;&lt;coupon_fee&gt;0&lt;/coupon_fee&gt;</span><span>
</span></span></span><span><span>16</span><span><span>&nbsp; &nbsp;&lt;fee_type&gt;&lt;![CDATA[CNY]]&gt;&lt;/fee_type&gt;</span><span>
</span></span></span><span><span>17</span><span><span>&nbsp; &nbsp;&lt;transaction_id&gt;&lt;![CDATA[1008450740201411110005820873]]&gt;&lt;/transaction_id&gt;</span><span>
</span></span></span><span><span>18</span><span><span>&nbsp; &nbsp;&lt;out_trade_no&gt;&lt;![CDATA[1415757673]]&gt;&lt;/out_trade_no&gt;</span><span>
</span></span></span><span><span>19</span><span><span>&nbsp; &nbsp;&lt;attach&gt;&lt;![CDATA[订单额外描述]]&gt;&lt;/attach&gt;</span><span>
</span></span></span><span><span>20</span><span><span>&nbsp; &nbsp;&lt;time_end&gt;&lt;![CDATA[20141111170043]]&gt;&lt;/time_end&gt;</span><span>
</span></span></span><span><span>21</span><span><span>&lt;/xml&gt;</span></span></span></pre></div><div><h2>错误码</h2></div><table><tbody><tr><td><table><tbody><tr><td><svg><path></path></svg></td><td><div><p><span><span>注意：</span></span></p></div><div><p><span>如果当前交易返回的支付状态是明确的错误原因造成的支付失败（支付确认失败），请重新下单支付；如果当前交易返回的支付状态是不明错误（支付结果未知），请调用查询订单接口确认状态，如果长时间（建议30秒）都得不到明确状态请调用撤销订单接口。</span></p></div></td></tr></tbody></table></td></tr></tbody></table><div><table><colgroup><col><col><col><col><col></colgroup><tbody><tr><th><p><span>名称</span></p></th><th><p><span>描述</span></p></th><th><p><span>支付状态</span></p></th><th><p><span>原因</span></p></th><th><p><span>解决方案</span></p></th></tr><tr><td><p><span>SYSTEMERROR</span></p></td><td><p><span>接口返回错误</span></p></td><td><p><span>支付结果未知</span></p></td><td><p><span>系统超时</span></p></td><td><p><span>请立即调用被扫订单结果查询API，查询当前订单状态，并根据订单的状态决定下一步的操作。</span></p></td></tr><tr><td><p><span>PARAM_ERROR</span></p></td><td><p><span>参数错误</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>请求参数未按指引进行填写</span></p></td><td><p><span>请根据接口返回的详细信息检查您的程序</span></p></td></tr><tr><td><p><span>ORDERPAID</span></p></td><td><p><span>订单已支付</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>订单号重复</span></p></td><td><p><span>请确认该订单号是否重复支付，如果是新订单，请使用新订单号提交</span></p></td></tr><tr><td><p><span>NOAUTH</span></p></td><td><p><span>商户无权限</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>商户没有开通被扫支付权限</span></p></td><td><p><span>请开通商户号权限。请联系产品或商务申请</span></p></td></tr><tr><td><p><span>AUTHCODEEXPIRE</span></p></td><td><p><span>二维码已过期，请用户在微信上刷新后再试</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>用户的条码已经过期</span></p></td><td><p><span>请收银员提示用户，请用户在微信上刷新条码，然后请收银员重新扫码。&nbsp;直接将错误展示给收银员</span></p></td></tr><tr><td><p><span>NOTENOUGH</span></p></td><td><p><span>余额不足</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>用户的零钱余额不足</span></p></td><td><p><span>请收银员提示用户更换当前支付的卡，然后请收银员重新扫码。建议：商户系统返回给收银台的提示为“用户余额不足.提示用户换卡支付”</span></p></td></tr><tr><td><p><span>NOTSUPORTCARD</span></p></td><td><p><span>不支持卡类型</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>用户使用卡种不支持当前支付形式</span></p></td><td><p><span>请用户重新选择卡种&nbsp;建议：商户系统返回给收银台的提示为“该卡不支持当前支付，提示用户换卡支付或绑新卡支付”</span></p></td></tr><tr><td><p><span>ORDERCLOSED</span></p></td><td><p><span>订单已关闭</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>该订单已关</span></p></td><td><p><span>商户订单号异常，请重新下单支付</span></p></td></tr><tr><td><p><span>ORDERREVERSED</span></p></td><td><p><span>订单已撤销</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>当前订单已经被撤销</span></p></td><td><p><span>当前订单状态为“订单已撤销”，请提示用户重新支付</span></p></td></tr><tr><td><p><span>BANKERROR</span></p></td><td><p><span>银行系统异常</span></p></td><td><p><span>支付结果未知</span></p></td><td><p><span>银行端超时</span></p></td><td><p><span>请立即调用被扫订单结果查询API，查询当前订单的不同状态，决定下一步的操作。</span></p></td></tr><tr><td><p><span>USERPAYING</span></p></td><td><p><span>用户支付中，需要输入密码</span></p></td><td><p><span>支付结果未知</span></p></td><td><p><span>该笔交易因为业务规则要求，需要用户输入支付密码。</span></p></td><td><p><span>等待5秒，然后调用被扫订单结果查询API，查询当前订单的不同状态，决定下一步的操作。</span></p></td></tr><tr><td><p><span>AUTH_CODE_ERROR</span></p></td><td><p><span>付款码参数错误</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>请求参数未按指引进行填写</span></p></td><td><p><span>每个二维码仅限使用一次，请刷新再试</span></p></td></tr><tr><td><p><span>AUTH_CODE_INVALID</span></p></td><td><p><span>付款码检验错误</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>收银员扫描的不是微信支付的条码</span></p></td><td><p><span>请扫描微信支付被扫条码/二维码</span></p></td></tr><tr><td><p><span>XML_FORMAT_ERROR</span></p></td><td><p><span>XML格式错误</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>XML格式错误</span></p></td><td><p><span>请检查XML参数格式是否正确</span></p></td></tr><tr><td><p><span>REQUIRE_POST_METHOD</span></p></td><td><p><span>请使用post方法</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>未使用post传递参数</span></p></td><td><p><span>请检查请求参数是否通过post方法提交</span></p></td></tr><tr><td><p><span>SIGNERROR</span></p></td><td><p><span>签名错误</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>参数签名结果不正确</span></p></td><td><p><span>请检查签名参数和方法是否都符合签名算法要求</span></p></td></tr><tr><td><p><span>LACK_PARAMS</span></p></td><td><p><span>缺少参数</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>缺少必要的请求参数</span></p></td><td><p><span>请检查参数是否齐全</span></p></td></tr><tr><td><p><span>NOT_UTF8</span></p></td><td><p><span>编码格式错误</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>未使用指定编码格式</span></p></td><td><p><span>请使用UTF-8编码格式</span></p></td></tr><tr><td><p><span>BUYER_MISMATCH</span></p></td><td><p><span>支付账号错误</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>暂不支持同一笔订单更换支付方</span></p></td><td><p><span>请确认支付方是否相同</span></p></td></tr><tr><td><p><span>APPID_NOT_EXIST</span></p></td><td><p><span>APPID不存在</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>参数中缺少APPID</span></p></td><td><p><span>请检查APPID是否正确</span></p></td></tr><tr><td><p><span>MCHID_NOT_EXIST</span></p></td><td><p><span>MCHID不存在</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>参数中缺少MCHID</span></p></td><td><p><span>请检查MCHID是否正确</span></p></td></tr><tr><td><p><span>OUT_TRADE_NO_USED</span></p></td><td><p><span>商户订单号重复</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>同一笔交易不能多次提交</span></p></td><td><p><span>请核实商户订单号是否重复提交</span></p></td></tr><tr><td><p><span>APPID_MCHID_NOT_MATCH</span></p></td><td><p><span>appid和mch_id不匹配</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>appid和mch_id不匹配</span></p></td><td><p><span>请确认appid和mch_id是否匹配</span></p></td></tr><tr><td><p><span>INVALID_REQUEST</span></p></td><td><p><span>无效请求</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>商户系统异常导致，商户权限异常、重复请求支付、证书错误、频率限制等</span></p></td><td><p><span>请确认商户系统是否正常，是否具有相应支付权限，确认证书是否正确，控制频率</span></p></td></tr><tr><td><p><span>TRADE_ERROR</span></p></td><td><p><span>交易错误</span></p></td><td><p><span>支付确认失败</span></p></td><td><p><span>业务错误导致交易失败、用户账号异常、风控、规则限制等</span></p></td><td><p><span>请确认账号是否存在异常</span></p></td></tr></tbody></table></div><div><p>&nbsp;</p></div></div></body></html></div><div></div></div><div><div><div> 文档是否有帮助 </div><div><button><i></i>是 </button><button><i></i>否 </button></div></div></div><div><div><div> 更多支持 </div><div><a>开发文档(服务商)</a><a>开发文档(V2版)</a><a>开发者社区</a><a>微信开放平台</a><a>微信公众平台</a><a>腾讯客服</a></div></div></div></div><div><div><div><div><div> 文档是否有帮助 </div><div><button><i></i>是 </button><button><i></i>否 </button></div></div></div><div><div><a><span>应用场景</span></a></div><div><a><span>状态机</span></a></div><div><a><span>接口地址【SDK下载】</span></a></div><div><a><span>是否需要证书</span></a></div><div><a><span>输入参数</span></a></div><div><a><span>返回结果</span></a></div><div><a><span>错误码</span></a></div></div><div><a><i></i><span>AI开发助手</span></a></div></div><div><div><div><img><img><div> 元宝AI </div></div><div><div><img><img><div> 反馈 </div></div><div><img><img><div> 目录 </div></div><div><img><img><div> 置顶 </div></div></div></div></div></div></div></main><footer><div> Powered By Tencent &amp; Tenpay Copyright 2005-2025 Tenpay All Rights Reserved. </div><div> Powered By Tencent &amp; Tenpay<br>Copyright 2005-2025 Tenpay All Rights Reserved. </div></footer></div></main></section></section></div>
        <div></div>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </body>
    </html>