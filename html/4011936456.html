<!DOCTYPE html>
    <html>
      <head>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <meta />
        
    <title>开发指引_产品文档（V2）|微信支付商户文档中心</title><meta>
    <meta>
    
    
    
    
  
      </head>
      <body>
        
        <div><section><header><div><div><div><a><img></a></div><div><a>首页</a><a>接入指引</a><a>产品中心</a><a>解决方案</a><a>文档中心</a><a>接入微信支付</a></div><div><div> 文档中心 </div><img></div></div></div><div><img><div><a>首页</a><a>接入指引</a><a>产品中心</a><a>解决方案</a><a>文档中心</a><a>接入微信支付</a></div></div></header><section><div><div><div><div><a>产品文档（V2）</a><a>通用规则</a><a>SDK&amp;开发工具</a><a>更新日志</a></div></div><div><div><div><img><div>产品文档（V2）</div></div></div><div><button><span> 技术咨询 </span></button></div></div></div></div></section><section><aside><div><div><ul><li><section><p><span><span>支付产品</span></span><span></span></p><ul><li><section><p><span><span>付款码支付</span></span><span></span></p></section></li><li><section><p><span><span>JSAPI支付</span></span><span></span></p></section></li><li><section><p><span><span>Native支付</span></span><span></span></p><ul><li><div><a><span>支付账户</span></a></div></li><li><div><a><span>场景介绍</span></a></div></li><li><div><a><span>案例及规范</span></a></div></li><li><div><a><span>协议规则</span></a></div></li><li><div><a><span>开发指引</span></a></div></li><li><section><p><span><span>API列表</span></span><span></span></p></section></li></ul></section></li><li><section><p><span><span>APP支付</span></span><span></span></p></section></li><li><section><p><span><span>H5支付</span></span><span></span></p></section></li><li><section><p><span><span>小程序支付</span></span><span></span></p></section></li></ul></section></li><li><section><p><span><span>运营工具</span></span><span></span></p><ul><li><section><p><span><span>现金红包</span></span><span></span></p></section></li><li><section><p><span><span>小程序红包</span></span><span></span></p></section></li><li><section><p><span><span>付款到银行卡</span></span><span></span></p></section></li><li></li><li><section><p><span><span>委托代扣</span></span><span></span></p></section></li><li></li><li></li></ul></section></li><li><section><p><span><span>扩展工具</span></span><span></span></p><ul><li><section><p><span><span>分账</span></span><span></span></p></section></li><li><section><p><span><span>清关报关</span></span><span></span></p></section></li><li></li><li></li><li></li></ul></section></li></ul></div></div></aside><main><div><main><div><div><h1>开发指引</h1><span> 更新时间：2025.03.21</span><div><div><html><head></head><body><div><div><p><span><span>商户后台系统先调用微信支付的统一下单接口，微信后台系统返回链接参数code_url，商户后台系统将code_url值生成二维码图片，用户使用微信客户端扫码后发起支付。注意：code_url有效期为2小时，过期后扫码不能再发起支付。</span></span></p></div><div><h2>业务流程时序图</h2></div><div><p><span><img></span> </p></div><div><p><span><span>图6.9 原生扫码支付时序图</span></span></p></div><p><span><span>业务流程说明：</span></span></p><p><span><span>（1）商户后台系统根据用户选购的商品生成订单。</span></span></p><p><span><span>（2）用户确认支付后调用微信支付【</span></span><span><span><a>统一下单API</a></span></span><span>】生成预支付交易；</span></p><p><span><span>（3）微信支付系统收到请求后生成预支付交易单，并返回交易会话的二维码链接code_url。</span></span></p><p><span><span>（4）商户后台系统根据返回的code_url生成二维码。</span></span></p><p><span><span>（5）用户打开微信“扫一扫”扫描二维码，微信客户端将扫码内容发送到微信支付系统。</span></span></p><p><span><span>（6）微信支付系统收到客户端请求，验证链接有效性后发起用户支付，要求用户授权。</span></span></p><p><span><span>（7）用户在微信客户端输入密码，确认支付后，微信客户端提交授权。</span></span></p><p><span><span>（8）微信支付系统根据用户授权完成支付交易。</span></span></p><p><span><span>（9）微信支付系统完成支付交易后给微信客户端返回交易结果，并将交易结果通过短信、微信消息提示用户。微信客户端展示支付交易结果页面。</span></span></p><p><span><span>（10）微信支付系统通过发送异步消息通知商户后台系统支付结果。商户后台系统需回复接收情况，通知微信后台系统不再发送该单的支付通知。</span></span></p><p><span><span>（11）未收到支付通知的情况，商户后台系统调用【</span></span><span><span><a>查询订单API</a></span></span><span>】（查单实现可参考：</span><span><span><a>支付回调和查单实现指引</a></span></span><span>）。</span></p><p><span><span>（12）商户确认订单已支付后给用户发货。</span></span></p><div><h2>生成二维码规则</h2></div><div><p><span><span>对应链接格式：weixin://wxpay/bizpayurl?sr=123456。请商户调用第三方库将code_url生成二维码图片。该模式链接较短，生成的二维码打印到结账小票上的识别率较高。</span></span></p></div><div><p><span><span>例如，将weixin://wxpay/bizpayurl?sr=123456生成二维码见图6.10。</span></span></p></div><div><p><span><img></span> </p></div><div><p><span><span>    图6.10 原生扫码支付二维码示例</span></span></p></div><div><h2>二维码相关知识</h2></div><div><p><span><span>参考文献：</span></span></p></div><div><p><span><span>商品二维码标准： </span></span><span><span><a>国家商品二维码标准</a></span></span></p></div><div><p><span><span>名片二维码： </span></span><span><span><a>名片二维码通用技术规范</a></span></span></p></div><div><p><span><span>QR码官方介绍： </span></span><span><span><a>QR码官方</a></span></span></p></div></div></body></html></div><div></div></div><div><div><div> 文档是否有帮助 </div><div><button><i></i>是 </button><button><i></i>否 </button></div></div></div><div><div><div> 更多支持 </div><div><a>开发文档(服务商)</a><a>开发文档(V2版)</a><a>开发者社区</a><a>微信开放平台</a><a>微信公众平台</a><a>腾讯客服</a></div></div></div></div><div><div><div><div><div> 文档是否有帮助 </div><div><button><i></i>是 </button><button><i></i>否 </button></div></div></div><div><div><a><span>业务流程时序图</span></a></div><div><a><span>生成二维码规则</span></a></div><div><a><span>二维码相关知识</span></a></div></div><div><a><i></i><span>AI开发助手</span></a></div></div><div><div><div><img><img><div> 元宝AI </div></div><div><div><img><img><div> 反馈 </div></div><div><img><img><div> 目录 </div></div><div><img><img><div> 置顶 </div></div></div></div></div></div></div></main><footer><div> Powered By Tencent &amp; Tenpay Copyright 2005-2025 Tenpay All Rights Reserved. </div><div> Powered By Tencent &amp; Tenpay<br>Copyright 2005-2025 Tenpay All Rights Reserved. </div></footer></div></main></section></section></div>
        <div></div>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </body>
    </html>