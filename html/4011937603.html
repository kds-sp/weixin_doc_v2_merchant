<!DOCTYPE html>
    <html>
      <head>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <meta />
        
    <title>下载资金账单_产品文档（V2）|微信支付商户文档中心</title><meta>
    <meta>
    
    
    
    
  
      </head>
      <body>
        
        <div><section><header><div><div><div><a><img></a></div><div><a>首页</a><a>接入指引</a><a>产品中心</a><a>解决方案</a><a>文档中心</a><a>接入微信支付</a></div><div><div> 文档中心 </div><img></div></div></div><div><img><div><a>首页</a><a>接入指引</a><a>产品中心</a><a>解决方案</a><a>文档中心</a><a>接入微信支付</a></div></div></header><section><div><div><div><div><a>产品文档（V2）</a><a>通用规则</a><a>SDK&amp;开发工具</a><a>更新日志</a></div></div><div><div><div><img><div>产品文档（V2）</div></div></div><div><button><span> 技术咨询 </span></button></div></div></div></div></section><section><aside><div><div><ul><li><section><p><span><span>支付产品</span></span><span></span></p><ul><li><section><p><span><span>付款码支付</span></span><span></span></p></section></li><li><section><p><span><span>JSAPI支付</span></span><span></span></p></section></li><li><section><p><span><span>Native支付</span></span><span></span></p></section></li><li><section><p><span><span>APP支付</span></span><span></span></p></section></li><li><section><p><span><span>H5支付</span></span><span></span></p><ul><li><div><a><span>支付账户</span></a></div></li><li><div><a><span>场景介绍</span></a></div></li><li><div><a><span>案例介绍</span></a></div></li><li><div><a><span>业务流程</span></a></div></li><li><div><a><span>协议规则</span></a></div></li><li><div><a><span>开发指引</span></a></div></li><li><div><a><span>获取用户ip指引</span></a></div></li><li><section><p><span><span>API列表</span></span><span></span></p><ul><li><div><a><span>统一下单</span></a></div></li><li><div><a><span>查询订单</span></a></div></li><li><div><a><span>关闭订单</span></a></div></li><li><div><a><span>申请退款</span></a></div></li><li><div><a><span>查询退款</span></a></div></li><li><div><a><span>下载交易账单</span></a></div></li><li><div><a><span>下载资金账单</span></a></div></li><li><div><a><span>支付结果通知</span></a></div></li><li><div><a><span>交易保障</span></a></div></li><li><div><a><span>退款结果通知</span></a></div></li></ul></section></li><li><div><a><span>常见问题</span></a></div></li></ul></section></li><li><section><p><span><span>小程序支付</span></span><span></span></p></section></li></ul></section></li><li><section><p><span><span>运营工具</span></span><span></span></p><ul><li><section><p><span><span>现金红包</span></span><span></span></p></section></li><li><section><p><span><span>小程序红包</span></span><span></span></p></section></li><li><section><p><span><span>付款到银行卡</span></span><span></span></p></section></li><li></li><li><section><p><span><span>委托代扣</span></span><span></span></p></section></li><li></li><li></li></ul></section></li><li><section><p><span><span>扩展工具</span></span><span></span></p><ul><li><section><p><span><span>分账</span></span><span></span></p></section></li><li><section><p><span><span>清关报关</span></span><span></span></p></section></li><li></li><li></li><li></li></ul></section></li></ul></div></div></aside><main><div><main><div><div><h1>下载资金账单</h1><span> 更新时间：2024.11.13</span><div><div><html><head></head><body><div><div><div><h2>应用场景</h2></div><div><p><span><span>商户可以通过该接口下载</span></span><span><span>自2017年6月1日起</span></span><span><span>的历史资金流水账单。</span></span></p></div><table><tbody><tr><td><table><tbody><tr><td><svg><path></path></svg></td><td><div><p><span><span>说明：</span></span></p></div><div><p><span><span>1、资金账单中的数据反映的是商户微信账户资金变动情况；</span></span></p></div><div><p><span><span>2、当日账单在次日上午9点开始生成，建议商户在上午10点以后获取；</span></span></p></div><div><p><span><span>3、资金账单中涉及金额的字段单位为“元”。</span></span></p></div></td></tr></tbody></table></td></tr></tbody></table><div><h2>接口链接</h2></div><div><p><span><span>https://api.mch.weixin.qq.com/pay/downloadfundflow</span></span></p></div><div><h2>是否需要证书</h2></div><div><p><span><span>请求需要双向证书。 详见</span></span><span><span><a>证书使用</a></span></span></p></div><div><h2>请求参数</h2></div><div><table><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><th><p><span><span>字段名</span></span></p></th><th><p><span><span>变量名</span></span></p></th><th><p><span><span>必填</span></span></p></th><th><p><span><span>类型</span></span></p></th><th><p><span><span>示例值</span></span></p></th><th><p><span><span>描述</span></span></p></th></tr><tr><td><p><span><span>公众账号ID</span></span></p></td><td><p><span><span>appid</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>String(32)</span></span></p></td><td><p><span><span>wx8888888888888888</span></span></p></td><td><p><span><span>微信分配的公众账号ID（企业号corpid即为此appId）</span></span></p></td></tr><tr><td><p><span><span>商户号</span></span></p></td><td><p><span><span>mch_id</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>String(32)</span></span></p></td><td><p><span><span>1900000109</span></span></p></td><td><p><span><span>微信支付分配的商户号</span></span></p></td></tr><tr><td><p><span><span>随机字符串</span></span></p></td><td><p><span><span>nonce_str</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>String(32)</span></span></p></td><td><p><span><span>5K8264ILTKCH16CQ2502SI8ZNMTM67VS</span></span></p></td><td><p><span><span>随机字符串，不长于32位。推荐</span></span><span><span><a>随机数生成算法</a></span></span></p></td></tr><tr><td><p><span><span>签名</span></span></p></td><td><p><span><span>sign</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>String(32)</span></span></p></td><td><p><span><span>C380BEC2BFD727A4B6845133519F3AD6</span></span></p></td><td><p><span><span>签名，详见</span></span><span><span><a>签名生成算法</a></span></span></p></td></tr><tr><td><p><span><span>签名类型</span></span></p></td><td><p><span><span>sign_type</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>String(32)</span></span></p></td><td><p><span><span>HMAC-SHA256</span></span></p></td><td><p><span><span>签名类型，目前仅支持HMAC-SHA256</span></span></p></td></tr><tr><td><p><span>资金账单日期</span></p></td><td><p><span>bill_date</span></p></td><td><p><span>是</span></p></td><td><p><span>String(8)</span></p></td><td><p><span>20140603</span></p></td><td><p><span>下载对账单的日期，格式：20140603</span></p></td></tr><tr><td><p><span>资金账户类型</span></p></td><td><p><span>account_type</span></p></td><td><p><span>是</span></p></td><td><p><span>String(8)</span></p></td><td><p><span>Basic</span></p></td><td><p><span>账单的资金来源账户：</span></p><p><span>Basic&nbsp;&nbsp;基本账户</span></p><p><span>Operation&nbsp;运营账户</span></p><p><span>Fees&nbsp;手续费账户</span></p></td></tr><tr><td><p><span>压缩账单</span></p></td><td><p><span>tar_type</span></p></td><td><p><span>否</span></p></td><td><p><span>String(8)</span></p></td><td><p><span>GZIP</span></p></td><td><p><span>非必传参数，固定值：GZIP，返回格式为.gzip的压缩包账单。不传则默认为数据流形式。</span></p></td></tr></tbody></table></div><div><img><pre><span><span>1</span><span><span>&lt;xml&gt;</span><span>
</span></span></span><span><span>2</span><span><span>&nbsp;&nbsp;&lt;appid&gt;wx2421b1c4370ec43b&lt;/appid&gt;</span><span>
</span></span></span><span><span>3</span><span><span>&nbsp;&nbsp;&lt;bill_date&gt;20141110&lt;/bill_date&gt;</span><span>
</span></span></span><span><span>4</span><span><span>&nbsp;&nbsp;&lt;account_type&gt;Basic&lt;/account_type&gt;</span><span>
</span></span></span><span><span>5</span><span><span>&nbsp;&nbsp;&lt;mch_id&gt;10000100&lt;/mch_id&gt;</span><span>
</span></span></span><span><span>6</span><span><span>&nbsp;&nbsp;&lt;nonce_str&gt;21df7dc9cd8616b56919f20d9f679233&lt;/nonce_str&gt;</span><span>
</span></span></span><span><span>7</span><span><span>&nbsp;&nbsp;&lt;sign&gt;332F17B766FC787203EBE9D6E40457A1&lt;/sign&gt;</span><span>
</span></span></span><span><span>8</span><span><span>&lt;/xml&gt;</span></span></span></pre></div><div><h2>返回结果</h2></div><div><p><span><span>接口请求成功时，数据以文本表格的方式返回</span></span></p></div><div><p><span>1、第一行为表头</span></p></div><div><p><span>记账时间,微信支付业务单号,资金流水单号,业务名称,业务类型,收支类型,收支金额（元）,账户结余（元）,资金变更提交申请人,备注,业务凭证号</span></p></div><div><p><span>2、从第二行起，为资金流水数据，各参数以逗号分隔，参数前增加`符号，为标准键盘1左边键的字符，字段顺序与表头一致</span></p></div><div><p><span>3、倒数第二行为资金账单统计标题</span></p></div><div><p><span>资金流水总笔数,收入笔数,收入金额,支出笔数,支出金额</span></p></div><div><p><span>4、最后一行为统计数据</span></p></div><div><p><span>账单示例如下：</span></p></div><div><img><pre><span><span>1</span><span><span>记账时间,微信支付业务单号,资金流水单号,业务名称,业务类型,收支类型,收支金额（元）,账户结余（元）,资金变更提交申请人,备注,业务凭证号</span><span>
</span></span></span><span><span>2</span><span><span>`2018-02-01&nbsp;04:21:23,`50000305742018020103387128253,`1900009231201802015884652186,`退款,`退款,`支出,`0.02,`0.17,`system,`缺货,`REF4200000068201801293084726067</span><span>
</span></span></span><span><span>3</span><span><span>资金流水总笔数,收入笔数,收入金额,支出笔数,支出金额</span><span>
</span></span></span><span><span>4</span><span><span>`20.0,`17.0,`0.35,`3.0,`0.18</span></span></span></pre></div><div><p><span>5</span><span><span>、</span></span><span>header中Digest为完整性校验信息，内容格式为：签名类型=签名</span></p></div><div><p><span>举例如下：</span></p></div><div><img><pre><span><span>1</span><span><span>Digest:&nbsp;SHA=ec45d7c24492dcd62d92472b0f2816c8d9a2d773</span></span></span></pre></div><div><p><span>注：当前仅支持sha1签名返回</span></p></div><div><p><span><span>接口请求时如有协议错误，将返回以下字段</span></span></p></div><div><table><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><th><p><span>字段名</span></p></th><th><p><span>变量名</span></p></th><th><p><span>必填</span></p></th><th><p><span>类型</span></p></th><th><p><span>示例值</span></p></th><th><p><span>描述</span></p></th></tr><tr><td><p><span>返回状态码</span></p></td><td><p><span>return_code</span></p></td><td><p><span>是</span></p></td><td><p><span>String(16)</span></p></td><td><p><span>SUCCESS</span></p></td><td><p><span>SUCCESS/FAIL</span></p><p><span>此字段是通信标识，非交易标识，交易是否成功需要查看trade_state来判断</span></p></td></tr><tr><td><p><span>返回信息</span></p></td><td><p><span>return_msg</span></p></td><td><p><span>是</span></p></td><td><p><span>String(128)</span></p></td><td><p><span>OK</span></p></td><td><p><span>当return_code为FAIL时返回信息为错误原因 ，例如：签名失败、参数格式校验错误、请求频率过快，请稍后再试</span></p></td></tr></tbody></table></div><div><p><span>当return_code为SUCCESS时，进一步返回以下字段指明业务失败的原因</span></p></div><div><table><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><th><p><span>字段名</span></p></th><th><p><span>变量名</span></p></th><th><p><span>必填</span></p></th><th><p><span>类型</span></p></th><th><p><span>示例值</span></p></th><th><p><span>描述</span></p></th></tr><tr><td><p><span>业务结果</span></p></td><td><p><span>result_code</span></p></td><td><p><span>是</span></p></td><td><p><span>string(16)</span></p></td><td><p><span>FAIL</span></p></td><td><p><span>FAIL</span><br><span>此字段是业务标识，表示业务是否成功。目前只在失败时返回这个字段，所以只会出现FAIL值</span></p></td></tr><tr><td><p><span>错误代码</span></p></td><td><p><span>err_code</span></p></td><td><p><span>是</span></p></td><td><p><span>String(16)</span></p></td><td><p><span>SYSTEMERROR</span></p></td><td><p><span>见错误码列表</span></p></td></tr><tr><td><p><span>错误代码描述</span></p></td><td><p><span>err_code_des</span></p></td><td><p><span>否</span></p></td><td><p><span>String(128)</span></p></td><td><p><span>账单不存在</span></p></td><td><p><span>错误信息描述</span></p></td></tr></tbody></table></div><div><p><span><span>请求协议错误示例：</span></span></p></div><div><img><pre><span><span>1</span><span><span>&lt;xml&gt;</span><span>
</span></span></span><span><span>2</span><span><span>&lt;return_code&gt;&lt;![CDATA[SUCCESS]]&gt;&lt;/return_code&gt;</span><span>
</span></span></span><span><span>3</span><span><span>&lt;return_msg&gt;&lt;![CDATA[OK]]&gt;&lt;/return_msg&gt;</span><span>
</span></span></span><span><span>4</span><span><span>&lt;result_code&gt;&lt;![CDATA[FAIL]]&gt;&lt;/result_code&gt;</span><span>
</span></span></span><span><span>5</span><span><span>&lt;err_code&gt;&lt;![CDATA[NO_BILL_EXIST]]&gt;&lt;/err_code&gt;</span><span>
</span></span></span><span><span>6</span><span><span>&lt;err_code_des&gt;&lt;![CDATA[商户查询账户当日无资金账单]]&gt;&lt;/err_code_des&gt;</span><span>
</span></span></span><span><span>7</span><span><span>&lt;/xml&gt;</span></span></span></pre></div><div><h2>错误码</h2></div><div><table><colgroup><col><col><col></colgroup><tbody><tr><th><p><span>错误码</span></p></th><th><p><span>描述</span></p></th><th><p><span>解决方案</span></p></th></tr><tr><td><p><span>SYSTEMERROR</span></p></td><td><p><span>微信支付内部错误</span></p></td><td><p><span>请稍后重试。</span></p></td></tr><tr><td><p><span>PARAM_ERROR</span></p></td><td><p><span>参数错误</span></p></td><td><p><span>请对照文档的请求参数说明检查参数。</span></p></td></tr><tr><td><p><span>NO_BILL_EXIST</span></p></td><td><p><span>账单不存在</span></p></td><td><p><span>请检查当前商户号在指定日期内是否有成功的交易。</span></p></td></tr><tr><td><p><span>BILL_CREATING</span></p></td><td><p><span>账单未生成</span></p></td><td><p><span>请先检查当前商户号在指定日期内是否有成功的交易，如指定日期有交易则表示账单正在生成中，请在上午10点以后再下载。</span></p></td></tr></tbody></table></div><p>&nbsp;</p></div><p>&nbsp;</p></div></body></html></div><div></div></div><div><div><div> 文档是否有帮助 </div><div><button><i></i>是 </button><button><i></i>否 </button></div></div></div><div><div><div> 更多支持 </div><div><a>开发文档(服务商)</a><a>开发文档(V2版)</a><a>开发者社区</a><a>微信开放平台</a><a>微信公众平台</a><a>腾讯客服</a></div></div></div></div><div><div><div><div><div> 文档是否有帮助 </div><div><button><i></i>是 </button><button><i></i>否 </button></div></div></div><div><div><a><span>应用场景</span></a></div><div><a><span>接口链接</span></a></div><div><a><span>是否需要证书</span></a></div><div><a><span>请求参数</span></a></div><div><a><span>返回结果</span></a></div><div><a><span>错误码</span></a></div></div><div><a><i></i><span>AI开发助手</span></a></div></div><div><div><div><img><img><div> 元宝AI </div></div><div><div><img><img><div> 反馈 </div></div><div><img><img><div> 目录 </div></div><div><img><img><div> 置顶 </div></div></div></div></div></div></div></main><footer><div> Powered By Tencent &amp; Tenpay Copyright 2005-2025 Tenpay All Rights Reserved. </div><div> Powered By Tencent &amp; Tenpay<br>Copyright 2005-2025 Tenpay All Rights Reserved. </div></footer></div></main></section></section></div>
        <div></div>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </body>
    </html>