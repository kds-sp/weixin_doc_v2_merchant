<!DOCTYPE html>
    <html>
      <head>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <meta />
        
    <title>撤销订单_产品文档（V2）|微信支付商户文档中心</title><meta>
    <meta>
    
    
    
    
  
      </head>
      <body>
        
        <div><section><header><div><div><div><a><img></a></div><div><a>首页</a><a>接入指引</a><a>产品中心</a><a>解决方案</a><a>文档中心</a><a>接入微信支付</a></div><div><div> 文档中心 </div><img></div></div></div><div><img><div><a>首页</a><a>接入指引</a><a>产品中心</a><a>解决方案</a><a>文档中心</a><a>接入微信支付</a></div></div></header><section><div><div><div><div><a>产品文档（V2）</a><a>通用规则</a><a>SDK&amp;开发工具</a><a>更新日志</a></div></div><div><div><div><img><div>产品文档（V2）</div></div></div><div><button><span> 技术咨询 </span></button></div></div></div></div></section><section><aside><div><div><ul><li><section><p><span><span>支付产品</span></span><span></span></p><ul><li><section><p><span><span>付款码支付</span></span><span></span></p><ul><li><div><a><span>支付账户</span></a></div></li><li><div><a><span>场景介绍</span></a></div></li><li><div><a><span>验证密码规则</span></a></div></li><li><div><a><span>案例介绍</span></a></div></li><li><div><a><span>协议规则</span></a></div></li><li><div><a><span>开发指引</span></a></div></li><li><section><p><span><span>API列表</span></span><span></span></p><ul><li><div><a><span>付款码支付</span></a></div></li><li><div><a><span>查询订单</span></a></div></li><li><div><a><span>撤销订单</span></a></div></li><li><div><a><span>申请退款</span></a></div></li><li><div><a><span>查询退款</span></a></div></li><li><div><a><span>下载交易账单</span></a></div></li><li><div><a><span>下载资金账单</span></a></div></li><li><div><a><span>交易保障</span></a></div></li><li><div><a><span>付款码查询openid</span></a></div></li><li><div><a><span>退款结果通知</span></a></div></li></ul></section></li><li><div><a><span>常见问题</span></a></div></li></ul></section></li><li><section><p><span><span>JSAPI支付</span></span><span></span></p></section></li><li><section><p><span><span>Native支付</span></span><span></span></p></section></li><li><section><p><span><span>APP支付</span></span><span></span></p></section></li><li><section><p><span><span>H5支付</span></span><span></span></p></section></li><li><section><p><span><span>小程序支付</span></span><span></span></p></section></li></ul></section></li><li><section><p><span><span>运营工具</span></span><span></span></p><ul><li><section><p><span><span>现金红包</span></span><span></span></p></section></li><li><section><p><span><span>小程序红包</span></span><span></span></p></section></li><li><section><p><span><span>付款到银行卡</span></span><span></span></p></section></li><li></li><li><section><p><span><span>委托代扣</span></span><span></span></p></section></li><li></li><li></li></ul></section></li><li><section><p><span><span>扩展工具</span></span><span></span></p><ul><li><section><p><span><span>分账</span></span><span></span></p></section></li><li><section><p><span><span>清关报关</span></span><span></span></p></section></li><li></li><li></li><li></li></ul></section></li></ul></div></div></aside><main><div><main><div><div><h1>撤销订单</h1><span> 更新时间：2024.08.06</span><div><div><html><head></head><body><div><div><h3>应用场景</h3></div><div><p><span>支付交易返回失败或支付系统超时，调用该接口撤销交易。如果此订单用户支付失败，微信支付系统会将此订单关闭；如果用户支付成功，微信支付系统会将此订单资金退还给用户。</span></p></div><table><tbody><tr><td><table><tbody><tr><td><svg><path></path></svg></td><td><div><p><span>注意：</span></p></div><div><p><span>7天以内的交易单可调用撤销，其他正常支付的单如需实现相同功能请调用申请退款API。提交支付交易后调用【</span><span><a>查询订单API</a></span>】，没有明确的支付结果再调用【撤销订单API】。</p></div><div><p><span><span>调用支付接口后请勿立即调用撤销订单API，建议支付后至少15s后再调用撤销订单接口。</span></span></p></div></td></tr></tbody></table></td></tr></tbody></table><div><h3>接口链接</h3></div><div><p><span>URL地址：https://api.mch.weixin.qq.com/secapi/pay/reverse</span></p></div><div><p><span>URL地址：https://api2.mch.weixin.qq.com/secapi/pay/reverse(备用域名)</span><span><a>见跨城冗灾方案</a></span></p></div><div><h3>是否需要证书</h3></div><div><p><span>请求需要双向证书。 详见</span><span><a>证书使用</a></span></p></div><div><h3>请求参数</h3></div><div><table><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><th><p><span>字段名</span></p></th><th><p><span>变量名</span></p></th><th><p><span>必填</span></p></th><th><p><span>类型</span></p></th><th><p><span>示例值</span></p></th><th><p><span>描述</span></p></th></tr><tr><td><p><span>公众账号ID</span></p></td><td><p><span>appid</span></p></td><td><p><span>是</span></p></td><td><p><span>String(32)</span></p></td><td><p><span>wx8888888888888888</span></p></td><td><p><span>微信分配的公众账号ID（企业号corpid即为此appid）</span></p></td></tr><tr><td><p><span>商户号</span></p></td><td><p><span>mch_id</span></p></td><td><p><span>是</span></p></td><td><p><span>String(32)</span></p></td><td><p><span>1900000109</span></p></td><td><p><span>微信支付分配的商户号</span></p></td></tr><tr><td><p><span>微信订单号</span></p></td><td><p><span>transaction_id</span></p></td><td><p><span>否</span></p></td><td><p><span>String(32)</span></p></td><td><p><span>1217752501201407033233368018</span></p></td><td><p><span>微信的订单号，优先使用</span></p></td></tr><tr><td><p><span>商户订单号</span></p></td><td><p><span>out_trade_no</span></p></td><td><p><span>是</span></p></td><td><p><span>String(32)</span></p></td><td><p><span>1217752501201407033233368018</span></p></td><td><p><span>商户系统内部的订单号,transaction_id、out_trade_no二选一，如果同时存在优先级：transaction_id&gt; out_trade_no</span></p></td></tr><tr><td><p><span>随机字符串</span></p></td><td><p><span>nonce_str</span></p></td><td><p><span>是</span></p></td><td><p><span>String(32)</span></p></td><td><p><span>5K8264ILTKCH16CQ2502SI8ZNMTM67VS</span></p></td><td><p><span>随机字符串，不长于32位。推荐</span><span><a>随机数生成算法</a></span></p></td></tr><tr><td><p><span>签名</span></p></td><td><p><span>sign</span></p></td><td><p><span>是</span></p></td><td><p><span>String(32)</span></p></td><td><p><span>C380BEC2BFD727A4B6845133519F3AD6</span></p></td><td><p><span>签名，详见</span><span><a>签名生成算法</a></span></p></td></tr><tr><td><p><span>签名类型</span></p></td><td><p><span>sign_type</span></p></td><td><p><span>否</span></p></td><td><p><span>String(32)</span></p></td><td><p><span>HMAC-SHA256</span></p></td><td><p><span>签名类型，目前支持HMAC-SHA256和MD5，默认为MD5</span></p></td></tr></tbody></table></div><div><p><span>提交参数举例如下：</span></p></div><div><img><pre><span><span>1</span><span><span>&lt;xml&gt;</span><span>
</span></span></span><span><span>2</span><span><span>&nbsp; &nbsp;&lt;appid&gt;wx2421b1c4370ec43b&lt;/appid&gt;</span><span>
</span></span></span><span><span>3</span><span><span>&nbsp; &nbsp;&lt;mch_id&gt;10000100&lt;/mch_id&gt;</span><span>
</span></span></span><span><span>4</span><span><span>&nbsp; &nbsp;&lt;nonce_str&gt;b7ffb16a7150cf08639db472c5f5bdae&lt;/nonce_str&gt;</span><span>
</span></span></span><span><span>5</span><span><span>&nbsp; &nbsp;&lt;out_trade_no&gt;1415717424&lt;/out_trade_no&gt;</span><span>
</span></span></span><span><span>6</span><span><span>&nbsp; &nbsp;&lt;sign&gt;9B2EA16C05A5CEF8E53B14D53932D012&lt;/sign&gt;</span><span>
</span></span></span><span><span>7</span><span><span>&lt;/xml&gt;</span></span></span></pre></div><div><h3>返回结果</h3></div><div><table><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><th><p>字段名</p></th><th><p>变量名</p></th><th><p>必填</p></th><th><p>类型</p></th><th><p>示例值</p></th><th><p>描述</p></th></tr><tr><td><p>返回状态码</p></td><td><p>return_code</p></td><td><p>是</p></td><td><p>String(16)</p></td><td><p>SUCCESS</p></td><td><p>SUCCESS/FAIL</p><p>此字段是通信标识，非交易标识</p></td></tr><tr><td><p>返回信息</p></td><td><p>return_msg</p></td><td><p>是</p></td><td><p>String(128)</p></td><td><p>OK</p></td><td><p>当return_code为FAIL时返回信息为错误原因 ，例如签名失败<span><span>、</span></span>参数格式校验错误</p></td></tr></tbody></table></div><div><p>当return_code为SUCCESS的时候，还会包括以下字段：</p></div><div><table><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><th><p>字段名</p></th><th><p>变量名</p></th><th><p>必填</p></th><th><p>类型</p></th><th><p>示例值</p></th><th><p>描述</p></th></tr><tr><td><p>公众账号ID</p></td><td><p>appid</p></td><td><p>是</p></td><td><p>String(32)</p></td><td><p>wx8888888888888888</p></td><td><p>返回提交的公众账号ID</p></td></tr><tr><td><p>商户号</p></td><td><p>mch_id</p></td><td><p>是</p></td><td><p>String(32)</p></td><td><p>1900000109</p></td><td><p>返回提交的商户号</p></td></tr><tr><td><p>随机字符串</p></td><td><p>nonce_str</p></td><td><p>是</p></td><td><p>String(32)</p></td><td><p>5K8264ILTKCH16CQ2502SI8ZNMTM67VS</p></td><td><p>微信返回的随机字符串</p></td></tr><tr><td><p>签名</p></td><td><p>sign</p></td><td><p>是</p></td><td><p>String(32)</p></td><td><p>C380BEC2BFD727A4B6845133519F3AD6</p></td><td><p>返回数据的签名，详见<span><a>签名算法</a></span></p></td></tr><tr><td><p>业务结果</p></td><td><p>result_code</p></td><td><p>是</p></td><td><p>String(16)</p></td><td><p>SUCCESS</p></td><td><p>SUCCESS/FAIL</p></td></tr><tr><td><p>错误代码</p></td><td><p>err_code</p></td><td><p>否</p></td><td><p>String(32)</p></td><td><p>SYSTEMERROR</p></td><td><p>详细参见错误列表</p></td></tr><tr><td><p>错误描述</p></td><td><p>err_code_des</p></td><td><p>否</p></td><td><p>String(128)</p></td><td><p>系统错误</p></td><td><p>结果信息描述</p></td></tr><tr><td><p>是否重调</p></td><td><p>recall</p></td><td><p>否</p></td><td><p>String(1)</p></td><td><p>Y</p></td><td><p>是否需要继续调用撤销，Y-需要，N-不需要</p></td></tr></tbody></table></div><div><p>返回参数举例如下：</p></div><div><img><pre><span><span>1</span><span><span>&lt;xml&gt;</span><span>
</span></span></span><span><span>2</span><span><span>&nbsp; &nbsp;&lt;return_code&gt;&lt;![CDATA[SUCCESS]]&gt;&lt;/return_code&gt;</span><span>
</span></span></span><span><span>3</span><span><span>&nbsp; &nbsp;&lt;return_msg&gt;&lt;![CDATA[OK]]&gt;&lt;/return_msg&gt;</span><span>
</span></span></span><span><span>4</span><span><span>&nbsp; &nbsp;&lt;appid&gt;&lt;![CDATA[wx2421b1c4370ec43b]]&gt;&lt;/appid&gt;</span><span>
</span></span></span><span><span>5</span><span><span>&nbsp; &nbsp;&lt;mch_id&gt;&lt;![CDATA[10000100]]&gt;&lt;/mch_id&gt;</span><span>
</span></span></span><span><span>6</span><span><span>&nbsp; &nbsp;&lt;nonce_str&gt;&lt;![CDATA[o5bAKF3o2ypC8hwa]]&gt;&lt;/nonce_str&gt;</span><span>
</span></span></span><span><span>7</span><span><span>&nbsp; &nbsp;&lt;sign&gt;&lt;![CDATA[6F5080EDDD196FFCDE53F786BBB93899]]&gt;&lt;/sign&gt;</span><span>
</span></span></span><span><span>8</span><span><span>&nbsp; &nbsp;&lt;result_code&gt;&lt;![CDATA[SUCCESS]]&gt;&lt;/result_code&gt;</span><span>
</span></span></span><span><span>9</span><span><span>&nbsp; &nbsp;&lt;recall&gt;&lt;![CDATA[N]]&gt;&lt;/recall&gt;</span><span>
</span></span></span><span><span>10</span><span><span>&lt;/xml&gt;</span></span></span></pre></div><div><h3>错误码</h3></div><div><table><colgroup><col><col><col><col></colgroup><tbody><tr><th><p>名称</p></th><th><p>描述</p></th><th><p>原因</p></th><th><p>解决方案</p></th></tr><tr><td><p>SYSTEMERROR</p></td><td><p>接口返回错误</p></td><td><p>系统超时</p></td><td><p>请立即调用被扫订单结果查询API，查询当前订单状态，并根据订单的状态决定下一步的操作。</p></td></tr><tr><td><p>INVALID_TRANSACTIONID</p></td><td><p>无效transaction_id</p></td><td><p>请求参数未按指引进行填写</p></td><td><p>参数错误，请重新检查</p></td></tr><tr><td><p>PARAM_ERROR</p></td><td><p>参数错误</p></td><td><p>请求参数未按指引进行填写</p></td><td><p>请根据接口返回的详细信息检查您的程序</p></td></tr><tr><td><p>REQUIRE_POST_METHOD</p></td><td><p>请使用post方法</p></td><td><p>未使用post传递参数</p></td><td><p>请检查请求参数是否通过post方法提交</p></td></tr><tr><td><p>SIGNERROR</p></td><td><p>签名错误</p></td><td><p>参数签名结果不正确</p></td><td><p>请检查签名参数和方法是否都符合签名算法要求</p></td></tr><tr><td><p>REVERSE_EXPIRE</p></td><td><p>订单无法撤销</p></td><td><p>订单有7天的撤销有效期，过期将不能撤销</p></td><td><p>请检查需要撤销的订单是否超过可撤销有效期</p></td></tr><tr><td><p>INVALID_REQUEST</p></td><td><p>无效请求</p></td><td><p>商户系统异常导致</p></td><td><p>请检查商户权限是否异常、重复请求支付、证书错误、频率限制等</p></td></tr><tr><td><p>TRADE_ERROR</p></td><td><p>订单错误</p></td><td><p>业务错误导致交易失败</p></td><td><p>请检查用户账号是否异常、被风控、是否符合规则限制等</p></td></tr><tr><td><p>USERPAYING</p></td><td><p>用户支付中</p></td><td><p>用户正在支付中的订单不允许撤销</p></td><td><p>用户正在支付中的订单不允许撤销，请稍后再试</p></td></tr></tbody></table></div><p>&nbsp;</p></div></body></html></div><div></div></div><div><div><div> 文档是否有帮助 </div><div><button><i></i>是 </button><button><i></i>否 </button></div></div></div><div><div><div> 更多支持 </div><div><a>开发文档(服务商)</a><a>开发文档(V2版)</a><a>开发者社区</a><a>微信开放平台</a><a>微信公众平台</a><a>腾讯客服</a></div></div></div></div><div><div><div><div><div> 文档是否有帮助 </div><div><button><i></i>是 </button><button><i></i>否 </button></div></div></div><div><div><a><span>应用场景</span></a></div><div><a><span>接口链接</span></a></div><div><a><span>是否需要证书</span></a></div><div><a><span>请求参数</span></a></div><div><a><span>返回结果</span></a></div><div><a><span>错误码</span></a></div></div><div><a><i></i><span>AI开发助手</span></a></div></div><div><div><div><img><img><div> 元宝AI </div></div><div><div><img><img><div> 反馈 </div></div><div><img><img><div> 目录 </div></div><div><img><img><div> 置顶 </div></div></div></div></div></div></div></main><footer><div> Powered By Tencent &amp; Tenpay Copyright 2005-2025 Tenpay All Rights Reserved. </div><div> Powered By Tencent &amp; Tenpay<br>Copyright 2005-2025 Tenpay All Rights Reserved. </div></footer></div></main></section></section></div>
        <div></div>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </body>
    </html>