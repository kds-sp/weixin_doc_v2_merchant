<!DOCTYPE html>
    <html>
      <head>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <meta />
        
    <title>申请扣款_产品文档（V2）|微信支付商户文档中心</title><meta>
    <meta>
    
    
    
    
  
      </head>
      <body>
        
        <div><section><header><div><div><div><a><img></a></div><div><a>首页</a><a>接入指引</a><a>产品中心</a><a>解决方案</a><a>文档中心</a><a>接入微信支付</a></div><div><div> 文档中心 </div><img></div></div></div><div><img><div><a>首页</a><a>接入指引</a><a>产品中心</a><a>解决方案</a><a>文档中心</a><a>接入微信支付</a></div></div></header><section><div><div><div><div><a>产品文档（V2）</a><a>通用规则</a><a>SDK&amp;开发工具</a><a>更新日志</a></div></div><div><div><div><img><div>产品文档（V2）</div></div></div><div><button><span> 技术咨询 </span></button></div></div></div></div></section><section><aside><div><div><ul><li><section><p><span><span>支付产品</span></span><span></span></p><ul><li><section><p><span><span>付款码支付</span></span><span></span></p></section></li><li><section><p><span><span>JSAPI支付</span></span><span></span></p></section></li><li><section><p><span><span>Native支付</span></span><span></span></p></section></li><li><section><p><span><span>APP支付</span></span><span></span></p></section></li><li><section><p><span><span>H5支付</span></span><span></span></p></section></li><li><section><p><span><span>小程序支付</span></span><span></span></p></section></li></ul></section></li><li><section><p><span><span>运营工具</span></span><span></span></p><ul><li><section><p><span><span>现金红包</span></span><span></span></p></section></li><li><section><p><span><span>小程序红包</span></span><span></span></p></section></li><li><section><p><span><span>付款到银行卡</span></span><span></span></p></section></li><li></li><li><section><p><span><span>委托代扣</span></span><span></span></p><ul><li><div><a><span>产品介绍</span></a></div></li><li><section><p><span><span>接入指引</span></span><span></span></p></section></li><li><section><p><span><span>API列表</span></span><span></span></p><ul><li><section><p><span><span>纯签约API</span></span><span></span></p></section></li><li><section><p><span><span>支付中签约</span></span><span></span></p></section></li><li><section><p><span><span>扣款及解约API</span></span><span></span></p><ul><li><div><a><span>申请扣款</span></a></div></li><li><div><a><span>预扣费通知API</span></a></div></li><li><div><a><span>申请解约</span></a></div></li></ul></section></li><li><section><p><span><span>查询及回调通知API</span></span><span></span></p></section></li><li><section><p><span><span>基础API</span></span><span></span></p></section></li></ul></section></li><li><div><a><span>常见问题</span></a></div></li></ul></section></li><li></li><li></li></ul></section></li><li><section><p><span><span>扩展工具</span></span><span></span></p><ul><li><section><p><span><span>分账</span></span><span></span></p></section></li><li><section><p><span><span>清关报关</span></span><span></span></p></section></li><li></li><li></li><li></li></ul></section></li></ul></div></div></aside><main><div><main><div><div><h1>申请扣款</h1><span> 更新时间：2024.11.18</span><div><div><html><head></head><body><div><div><p><span><span>委托代扣可应用于定期扣款或需事后扣款以期提高效率的场景。</span></span><br><span><span>例如但不限于，会员制缴费、水电煤缴费、黄钻绿钻增值服务、打车类软件、停车场或高速公路无人缴费、理财通基金定投、信用卡还款等通过用户授权给商户，进行委托扣款的场景。</span></span></p></div><table><tbody><tr><td><table><tbody><tr><td><svg><path></path></svg></td><td><div><p><span><span><span>注意：</span></span></span></p></div><ul><li><p><span>扣费请求首先按签约协议中记录的优先支付方式扣费，否则按以下可用方式进行扣费：零钱、信用卡、借记卡{零钱（含零钱、零钱通），该顺序不固定，与用户的支付习惯有关}</span></p></li></ul><ul><li><p><span>在周期扣费类场景，扣费前需要确保为用户下发扣费前通知，详见【</span><span><span><a>周期扣费</a></span></span><span>】</span></p></li><li><p><span>特殊情况：周期扣费为通知后24小时扣费方式情况下，如果用户为首次签约（包含解约后重新签约），从用户签约成功时间开始算，商户在12小时内发起的扣款，会被立即执行，无延迟。商户超过12小时以后发起的扣款，都按24小时扣费规则执行；周期扣费为预扣款通知方式情况下，如果用户为首次签约｛包含解约后重新签约｝，从用户签约成功时间开始算，商户在12小时内发起的扣款无需先调用【</span><span><span><a>预扣费通知API</a></span></span><span>】接口，直接调用【</span><span><span><a>申请扣款</a></span></span><span>】接口，且会被立即执行，无延迟。商户超过12小时以后发起的扣款，都按预扣费通知执行</span></p></li><li><p><span>同一个商户号+同一个商户订单号，只会扣款一次。但如果更换商户号，商户订单号不变，会扣款多次。</span></p></li></ul><ul><li><p><span>周期扣费为预扣费通知方式情况下，要求扣费操作不可在晚上执行，避免影响用户，若扣费前已下发通知，则需在指定的可扣费期内，北京时间每天7:00～22:00发起扣款</span></p></li></ul></td></tr></tbody></table></td></tr></tbody></table><div><h2><span>接口说明</span></h2></div><div><p><span><span><span>适用对象：</span></span></span><span><span>直连商户</span></span></p></div><div><p><span><span><span>请求URL：</span></span></span><span><span>&nbsp;https://api.mch.weixin.qq.com/pay/pappayapply</span></span></p></div><div><p><span><span><span>请求方式：</span></span></span><span><span>&nbsp;POST</span></span></p></div><div><p><span><span><span>数据格式：</span></span></span><span><span>&nbsp;XML</span></span></p></div><div><p><span><span><span>是否需要证书：</span></span></span><span><span>&nbsp;否</span></span></p></div><div><p><span><span><span>请求频率限制：</span></span></span><span><span>150qps，即每秒钟正常的申请扣款请求次数不超过150次。</span></span></p></div><div><h2><span>请求参数</span></h2></div><div><table><colgroup><col><col><col><col><col></colgroup><tbody><tr><th><p><span><span>参数名</span></span></p></th><th><p><span><span>变量</span></span></p></th><th><p><span><span>类型[长度限制]</span></span></p></th><th><p><span><span>必填</span></span></p></th><th><p><span><span>描述</span></span></p></th></tr><tr><td><p><span><span>应用ID</span></span></p></td><td><p><span><span>appid</span></span></p></td><td><p><span><span>string[1,32]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>直连商户申请的公众号或移动应用appid。</span></span><br><span><span>示例值：wxcbda96de0b165486</span></span></p></td></tr><tr><td><p><span><span>商户号</span></span></p></td><td><p><span><span>mch_id</span></span></p></td><td><p><span><span>string[1,32]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>商户号是商户在微信申请微信支付成功后分配的账号ID，登录平台为pay.weixin.qq.com</span></span><br><span><span>示例值：10000098</span></span></p></td></tr><tr><td><p><span><span>随机字符串</span></span></p></td><td><p><span><span>nonce_str</span></span></p></td><td><p><span><span>string[1,32]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>随机字符串，不长于32位。推荐</span></span><span><span><a>随机数生成算法</a></span></span><br><span><span>示例值：5K8264ILTKCH16CQ2502SI8ZNMTM67VS</span></span></p></td></tr><tr><td><p><span><span>签名</span></span></p></td><td><p><span><span>sign</span></span></p></td><td><p><span><span>string[1,64]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>签名，</span></span><span><span><a>详见签名生成算法</a></span></span><br><span><span>示例值：C380BEC2BFD727A4B6845133519F3AD6</span></span></p></td></tr><tr><td><p><span><span>商品描述</span></span></p></td><td><p><span><span>body</span></span></p></td><td><p><span><span>string[1,127]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>商品或支付单简要描述</span></span><br><span><span>示例值：水电代扣</span></span></p></td></tr><tr><td><p><span><span>商品详情</span></span></p></td><td><p><span><span>detail</span></span></p></td><td><p><span><span>string[1,8192]</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>商品名称明细列表</span></span><br><span><span>示例值：水电代扣：A</span></span><br><span><span>水电代扣：B</span></span><br><span><span>水电代扣：C</span></span></p></td></tr><tr><td><p><span><span>附加数据</span></span></p></td><td><p><span><span>attach</span></span></p></td><td><p><span><span>string[1,128]</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>附加数据，在查询API和支付通知中原样返回，该字段主要用于商户携带订单的自定义数据</span></span><br><span><span>示例值：自定义参数</span></span></p></td></tr><tr><td><p><span><span>商户订单号</span></span></p></td><td><p><span><span>out_trade_no</span></span></p></td><td><p><span><span>string[1,32]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>商户系统内部的订单号,32个字符内、可包含字母,&nbsp;其他说明见</span></span><span><span><a>商户订单号</a></span></span><br><span><span>示例值：1217752501201407033233368018</span></span></p></td></tr><tr><td><p><span><span>总金额</span></span></p></td><td><p><span><span>total_fee</span></span></p></td><td><p><span><span>int</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>订单总金额，单位为分，只能为整数，详见</span></span><span><span><a>支付金额</a></span></span><br><span><span>示例值：888</span></span></p></td></tr><tr><td><p><span><span>货币类型</span></span></p></td><td><p><span><span>fee_type</span></span></p></td><td><p><span><span>string[1,16]</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>符合ISO&nbsp;4217标准的三位字母代码，默认人民币：CNY</span></span><br><span><span>示例值：CNY</span></span></p></td></tr><tr><td><p><span><span>终端IP</span></span></p></td><td><p><span><span>spbill_create_ip</span></span></p></td><td><p><span><span>string[1,16]</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>用户的客户端IP&nbsp;，支持IPV4和支持IPV6</span></span><br><span><span>示例值：8.8.8.8</span></span></p></td></tr><tr><td><p><span><span>商品标记</span></span></p></td><td><p><span><span>goods_tag</span></span></p></td><td><p><span><span>string[1,32]</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>商品标记，代金券或立减优惠功能的参数，说明详见代金券或立减优惠</span></span><br><span><span>示例值：WXG</span></span></p></td></tr><tr><td><p><span><span>回调通知url</span></span></p></td><td><p><span><span>notify_url</span></span></p></td><td><p><span><span>string[1,256]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>接受扣款结果异步回调通知的url,&nbsp;以http或https开头，通知url必须为外网可访问的url，不能携带参数。</span></span><br><span><span>示例值：http://yoursite.com/wxpay.html</span></span></p></td></tr><tr><td><p><span><span>交易类型</span></span></p></td><td><p><span><span>trade_type</span></span></p></td><td><p><span><span>string[1,3]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>交易类型，枚举值</span></span><br><span><span>PAP：微信委托代扣支付</span></span><br><span><span>示例值：PAP</span></span></p></td></tr><tr><td><p><span><span>委托代扣协议id</span></span></p></td><td><p><span><span>contract_id</span></span></p></td><td><p><span><span>string[1,32]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>签约成功后，微信返回的委托代扣协议id</span></span><br><span><span>示例值：Wx15463511252015071056489715</span></span></p></td></tr></tbody></table></div><div><h2><span><span>请求示例：</span></span></h2></div><p><span><span>XML</span></span></p><div><img><pre><span><span>1</span><span><span>&lt;xml&gt;</span><span>
</span></span></span><span><span>2</span><span><span>  &lt;mch_id&gt;10000098&lt;/mch_id&gt;</span><span>
</span></span></span><span><span>3</span><span><span>  &lt;appid&gt;wxcbda96de0b165486&lt;/appid&gt;</span><span>
</span></span></span><span><span>4</span><span><span>  &lt;nonce_str&gt;5K8264ILTKCH16CQ2502SI8ZNMTM67VS&lt;/nonce_str&gt;</span><span>
</span></span></span><span><span>5</span><span><span>  &lt;sign&gt;C380BEC2BFD727A4B6845133519F3AD6&lt;/sign&gt;</span><span>
</span></span></span><span><span>6</span><span><span>  &lt;body&gt;水电代扣&lt;/body&gt;</span><span>
</span></span></span><span><span>7</span><span><span>  &lt;out_trade_no&gt;217752501201407033233368018&lt;/out_trade_no&gt;</span><span>
</span></span></span><span><span>8</span><span><span>  &lt;total_fee&gt;888&lt;/total_fee&gt;</span><span>
</span></span></span><span><span>9</span><span><span>  &lt;spbill_create_ip&gt;8.8.8.8&lt;/spbill_create_ip&gt;</span><span>
</span></span></span><span><span>10</span><span><span>  &lt;notify_url&gt;http://yoursite.com/wxpay.html&lt;/notify_url&gt;</span><span>
</span></span></span><span><span>11</span><span><span>  &lt;contract_id&gt;Wx15463511252015071056489715&lt;/contract_id&gt;</span><span>
</span></span></span><span><span>12</span><span><span>&lt;/xml&gt;</span></span></span></pre></div><div><h2><span><span>返回参数</span></span></h2></div><div><table><colgroup><col><col><col><col><col></colgroup><tbody><tr><th><p><span><span>参数名</span></span></p></th><th><p><span><span>变量</span></span></p></th><th><p><span><span>类型[长度限制]</span></span></p></th><th><p><span><span>必填</span></span></p></th><th><p><span><span>描述</span></span></p></th></tr><tr><td><p><span><span>返回状态码</span></span></p></td><td><p><span><span>return_code</span></span></p></td><td><p><span><span>string[1,16]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>SUCCESS/FAIL</span></span><br><span><span>此字段是通信标识，非交易标识</span></span><br><span><span>示例值：SUCCESS</span></span></p></td></tr><tr><td><p><span><span>返回信息</span></span></p></td><td><p><span><span>return_msg</span></span></p></td><td><p><span><span>string[1,128]</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>返回信息，如非空，为错误原因</span></span><br><span><span>如：签名失败&nbsp;等。</span></span><br><span><span>示例值：签名失败</span></span></p></td></tr></tbody></table></div><div><p><span><span><span>以下字段在return_code为SUCCESS的时候有返回</span></span></span></p></div><div><table><colgroup><col><col><col><col><col></colgroup><tbody><tr><th><p><span><span>参数名</span></span></p></th><th><p><span><span>变量</span></span></p></th><th><p><span><span>类型[长度限制]</span></span></p></th><th><p><span><span>必填</span></span></p></th><th><p><span><span>描述</span></span></p></th></tr><tr><td><p><span><span>商户号</span></span></p></td><td><p><span><span>mch_id</span></span></p></td><td><p><span><span>string[1,32]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>微信支付分配的商户号</span></span><br><span><span>示例值：10000098</span></span></p></td></tr><tr><td><p><span><span>应用ID</span></span></p></td><td><p><span><span>appid</span></span></p></td><td><p><span><span>string[1,32]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>直连商户申请的公众号或移动应用appid。</span></span><br><span><span>示例值：wxcbda96de0b165486</span></span></p></td></tr><tr><td><p><span><span>随机字符串</span></span></p></td><td><p><span><span>nonce_str</span></span></p></td><td><p><span><span>string[1,32]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>随机字符串,不长于32位.</span></span><br><span><span>示例值：5K8264ILTKCH16CQ2502SI8ZNMTM67VS</span></span></p></td></tr><tr><td><p><span><span>签名</span></span></p></td><td><p><span><span>sign</span></span></p></td><td><p><span><span>string[1,64]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span><a>详见签名生成算法</a></span></span><br><span><span>示例值：C380BEC2BFD727A4B6845133519F3AD6</span></span></p></td></tr><tr><td><p><span><span>业务结果</span></span></p></td><td><p><span><span>result_code</span></span></p></td><td><p><span><span>string[1,16]</span></span></p></td><td><p><span><span>是</span></span></p></td><td><p><span><span>SUCCESS/FAIL</span></span><br><span><span>示例值：SUCCESS</span></span></p></td></tr><tr><td><p><span><span>错误代码</span></span></p></td><td><p><span><span>err_code</span></span></p></td><td><p><span><span>string[1,32]</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>错误码</span></span><br><span><span>示例值：SIGN_ERROR</span></span></p></td></tr><tr><td><p><span><span>错误代码描述</span></span></p></td><td><p><span><span>err_code_des</span></span></p></td><td><p><span><span>string[1,32]</span></span></p></td><td><p><span><span>否</span></span></p></td><td><p><span><span>错误码描述</span></span><br><span><span>示例值：签名错误</span></span></p></td></tr></tbody></table></div><div><h2><span><span>返回示例：</span></span></h2></div><p><span><span>正常示例</span></span></p><div><img><pre><span><span>1</span><span><span>&lt;xml&gt;</span><span>
</span></span></span><span><span>2</span><span><span>  &lt;return_code&gt;&lt;![CDATA[SUCCESS]]&gt;&lt;/return_code&gt;</span><span>
</span></span></span><span><span>3</span><span><span>  &lt;return_msg&gt;&lt;![CDATA[OK]]&gt;&lt;/return_msg&gt;</span><span>
</span></span></span><span><span>4</span><span><span>  &lt;appid&gt;&lt;![CDATA[wxcbda96de0b165486]]&gt;&lt;/appid&gt;&nbsp;&nbsp;</span><span>
</span></span></span><span><span>5</span><span><span>  &lt;mch_id&gt;&lt;![CDATA[10000098]]&gt;&lt;/mch_id&gt;</span><span>
</span></span></span><span><span>6</span><span><span>  &lt;nonce_str&gt;&lt;![CDATA[IITRi8Iabbblz1Jc]]&gt;&lt;/nonce_str&gt;</span><span>
</span></span></span><span><span>7</span><span><span>  &lt;sign&gt;&lt;![CDATA[E1EE61A91C8E90F299DE6AE075D60A2D]]&gt;&lt;/sign&gt;</span><span>
</span></span></span><span><span>8</span><span><span>  &lt;result_code&gt;&lt;![CDATA[SUCCESS]]&gt;&lt;/result_code&gt;</span><span>
</span></span></span><span><span>9</span><span><span>&lt;/xml&gt;							</span></span></span></pre></div><div><h2><span>错误码</span></h2></div><div><table><colgroup><col><col><col></colgroup><tbody><tr><th><p><span>错误码</span></p></th><th><p><span>描述</span></p></th><th><p><span>解决方案</span></p></th></tr><tr><td><p><span>SYSTEMERROR</span></p></td><td><p><span>接口返回错误</span></p></td><td><p><span>系统异常，请使用相同参数重新调用接口</span></p></td></tr><tr><td><p><span>CONTRACT_NOT_EXIST</span></p></td><td><p><span>签约协议不存在</span></p></td><td><p><span>请检查申请扣款接口的“contract_id”是否正确，或者用户是否解约，解约可以调用</span><span><span><a>查询签约关系</a></span></span><span>接口确认一下签约状态</span></p></td></tr><tr><td><p><span>PARAM_ERROR</span></p></td><td><p><span>参数错误</span></p></td><td><p><span>请根据接口返回的详细信息检查您的程序</span></p></td></tr><tr><td><p><span>ORDERPAID</span></p></td><td><p><span>订单已支付</span></p></td><td><p><span>请确认该订单号是否重复支付，如果是新订单，请使用新订单号提交</span></p></td></tr><tr><td><p><span>ORDERCLOSED</span></p></td><td><p><span>订单已关闭</span></p></td><td><p><span>商户订单号异常，请重新下单支付</span></p></td></tr><tr><td><p><span>SIGN_ERROR</span></p></td><td><p><span>签名错误</span></p></td><td><p><span>请检查签名参数和方法是否都符合签名算法要求</span></p></td></tr><tr><td><p><span>APPID_MCHID_NOT_MATCH</span></p></td><td><p><span>appid和mch_id不匹配</span></p></td><td><p><span>请确认appid和mch_id是否匹配</span></p></td></tr><tr><td><p><span>ORDER_ACCEPTED</span></p></td><td><p><span>扣款请求已受理，请勿重复发起</span></p></td><td><p><span>请调用查询订单接口查看订单最新状态</span></p></td></tr><tr><td><p><span>CONTRACTERROR</span></p></td><td><p><span>协议已过期</span></p></td><td><p><span>请检查签约协议号是否已过期</span></p></td></tr><tr><td><p><span>INVALID_REQUEST</span></p></td><td><p><span>无效请求</span></p></td><td><p><span>请检查请求方式是否是post方法等</span></p></td></tr><tr><td><p><span>FREQUENCY_LIMITED</span></p></td><td><p><span>频率限制</span></p></td><td><p><span>请检查接口请求频率是否超过限制</span></p></td></tr><tr><td><p><span>RULELIMIT</span></p></td><td><p><span>该笔交易存在风险</span></p></td><td><p><span>请联系用户，明确微信号是否有违规操作，如有疑问可联系微信客服解除风险控制</span></p></td></tr></tbody></table></div><p>&nbsp;</p></div></body></html></div><div></div></div><div><div><div> 文档是否有帮助 </div><div><button><i></i>是 </button><button><i></i>否 </button></div></div></div><div><div><div> 更多支持 </div><div><a>开发文档(服务商)</a><a>开发文档(V2版)</a><a>开发者社区</a><a>微信开放平台</a><a>微信公众平台</a><a>腾讯客服</a></div></div></div></div><div><div><div><div><div> 文档是否有帮助 </div><div><button><i></i>是 </button><button><i></i>否 </button></div></div></div><div><div><a><span>接口说明</span></a></div><div><a><span>请求参数</span></a></div><div><a><span>请求示例：</span></a></div><div><a><span>返回参数</span></a></div><div><a><span>返回示例：</span></a></div><div><a><span>错误码</span></a></div></div><div><a><i></i><span>AI开发助手</span></a></div></div><div><div><div><img><img><div> 元宝AI </div></div><div><div><img><img><div> 反馈 </div></div><div><img><img><div> 目录 </div></div><div><img><img><div> 置顶 </div></div></div></div></div></div></div></main><footer><div> Powered By Tencent &amp; Tenpay Copyright 2005-2025 Tenpay All Rights Reserved. </div><div> Powered By Tencent &amp; Tenpay<br>Copyright 2005-2025 Tenpay All Rights Reserved. </div></footer></div></main></section></section></div>
        <div></div>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </body>
    </html>