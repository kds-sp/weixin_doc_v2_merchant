<!DOCTYPE html>
    <html lang="zh-CN">
      <head>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <meta charset="UTF-8" />
        
    <title>JSAPI调起支付_产品文档（V2）|微信支付商户文档中心</title><meta property="og:title" content="JSAPI调起支付_产品文档（V2）|微信支付商户文档中心">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <!--[--><!--]-->
    
    
    
  
      </head>
      <body>
        
        <div id="app"><!--[--><section class="t-layout" data-v-45cd89fe><!--[--><header class="t-layout__header wrap" data-v-45cd89fe data-v-24ca267f><!--[--><div class="header" data-v-24ca267f><div class="header-wrap" data-v-24ca267f><div class="logo" data-v-24ca267f><a href="https://pay.weixin.qq.com/" data-v-24ca267f><img class="logo-partner" src="https://wx.gtimg.com/pay/img/common/logo.svg?v=20190327" alt data-v-24ca267f></a></div><div class="link" data-v-24ca267f><!--[--><a href="https://pay.weixin.qq.com/index.php/core/home/login?return_url=%2F" class="" data-v-24ca267f>首页</a><a href="https://pay.weixin.qq.com/static/applyment_guide/applyment_index.shtml" class="" data-v-24ca267f>接入指引</a><a href="https://pay.weixin.qq.com/static/product/product_index.shtml" class="" data-v-24ca267f>产品中心</a><a href="https://pay.weixin.qq.com/static/solution/solution_index.shtml" class="" data-v-24ca267f>解决方案</a><a href="https://pay.weixin.qq.com/doc/v3/merchant/4012062524" class="selected" data-v-24ca267f>文档中心</a><a href="http://pay.weixin.qq.com/index.php/apply/applyment_home/guide_normal" class="btn-primary btn-apply" target="_blank" data-v-24ca267f>接入微信支付</a><!--]--></div><div class="navbar-toggle" data-v-24ca267f><div class="navbar-toggle__des" data-v-24ca267f> 文档中心 </div><img class="navbar-toggle__icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/55b0d9d534b0ccd145bcbe8e932f3053_80x80.svg" alt data-v-24ca267f></div></div></div><!----><div class="navbar-collapse" data-v-24ca267f><img class="close-icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/cbbd950ece1f5688079a7f55da0798f9_48x48.svg" alt data-v-24ca267f><div class="link" data-v-24ca267f><!--[--><a href="https://pay.weixin.qq.com/index.php/core/home/login?return_url=%2F" class="" data-v-24ca267f>首页</a><a href="https://pay.weixin.qq.com/static/applyment_guide/applyment_index.shtml" class="" data-v-24ca267f>接入指引</a><a href="https://pay.weixin.qq.com/static/product/product_index.shtml" class="" data-v-24ca267f>产品中心</a><a href="https://pay.weixin.qq.com/static/solution/solution_index.shtml" class="" data-v-24ca267f>解决方案</a><a href="https://pay.weixin.qq.com/doc/v3/partner/4012069852" class="selected" data-v-24ca267f>文档中心</a><a href="https://pay.weixin.qq.com/index.php/apply/applyment_home/guide_normal" class="btn-primary btn-apply" target="_blank" data-v-24ca267f>接入微信支付</a><!--]--></div></div><!--]--></header><section class="t-layout subnavbar-layout" data-v-45cd89fe><!--[--><!--[--><div class="sub-navbar" data-v-204f5510><div class="sub-navbar-wrap" data-v-204f5510><div class="segment-nav" data-v-204f5510><div class="segment-nav-left" data-v-204f5510><!--[--><!--[--><a href="javascript:" class="selected" data-v-204f5510>产品文档（V2）</a><!--]--><!--[--><a href="javascript:" class="" data-v-204f5510>通用规则</a><!--]--><!--[--><a href="javascript:" class="" data-v-204f5510>SDK&amp;开发工具</a><!--]--><!--[--><a href="javascript:" class="" data-v-204f5510>更新日志</a><!--]--><!--]--></div><!----></div><div class="segment-nav-box" data-v-204f5510><div class="segment-nav-toggle" data-v-204f5510><div class="sub-navbar-toggle" data-v-204f5510><img class="sub-navbar-toggle__icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/6926a37e3d500f8a9446546bb16252ad_80x80.svg" alt="" data-v-204f5510><div class="sub-navbar-toggle__des" data-v-204f5510>产品文档（V2）</div></div></div><div class="online-service" data-v-204f5510><button class="t-button t-button--variant-base t-button--theme-primary" type="button" href tabindex="0" data-v-204f5510><span class="t-button__text"><!--[--> 技术咨询 <!--]--></span></button></div><!----><!----><!----><!----></div></div></div><!----><!----><!--]--><!--]--></section><section class="t-layout content-layout" data-v-45cd89fe><!--[--><aside class="t-layout__sider wrap" id="sidebar" data-v-45cd89fe data-v-c3fa0a07><!--[--><div class="sidebar" data-v-c3fa0a07><div class="inner" data-v-c3fa0a07><ul class="sidebar-links sidebar-links-spacing" data-v-c3fa0a07><!--[--><li><!--[--><section class="sidebar-group collapsable depth-0"><p class="open sidebar-heading ellipsis"><span><!--[--><span><!--[-->支付产品<!--]--></span><!----><!--]--></span><span class="up arrow"></span></p><ul class="sidebar-links sidebar-group-items"><!--[--><li><!--[--><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><!--[--><span><!--[-->付款码支付<!--]--></span><!----><!--]--></span><span class="down arrow"></span></p><!----></section><!--]--></li><li><!--[--><section class="sidebar-group collapsable depth-1"><p class="open sidebar-heading ellipsis"><span><!--[--><span><!--[-->JSAPI支付<!--]--></span><!----><!--]--></span><span class="up arrow"></span></p><ul class="sidebar-links sidebar-group-items"><!--[--><li><!--[--><div><a href="4011987995.html" class="sidebar-link ellipsis"><!--[--><span><!--[-->支付账户<!--]--></span><!----><!--]--></a></div><!--]--></li><li><!--[--><div><a href="4011935206.html" class="sidebar-link ellipsis"><!--[--><span><!--[-->场景介绍<!--]--></span><!----><!--]--></a></div><!--]--></li><li><!--[--><div><a href="4011935207.html" class="sidebar-link ellipsis"><!--[--><span><!--[-->案例介绍<!--]--></span><!----><!--]--></a></div><!--]--></li><li><!--[--><div><a href="4011935208.html" class="sidebar-link ellipsis"><!--[--><span><!--[-->接入前准备<!--]--></span><!----><!--]--></a></div><!--]--></li><li><!--[--><div><a href="4011986592.html" class="sidebar-link ellipsis"><!--[--><span><!--[-->协议规则<!--]--></span><!----><!--]--></a></div><!--]--></li><li><!--[--><div><a href="4011935209.html" class="sidebar-link ellipsis"><!--[--><span><!--[-->开发指引<!--]--></span><!----><!--]--></a></div><!--]--></li><li><!--[--><div><a href="4011935210.html" class="sidebar-link ellipsis"><!--[--><span><!--[-->获取微信版本号<!--]--></span><!----><!--]--></a></div><!--]--></li><li><!--[--><section class="sidebar-group collapsable depth-2"><p class="open sidebar-heading ellipsis"><span><!--[--><span><!--[-->API列表<!--]--></span><!----><!--]--></span><span class="up arrow"></span></p><ul class="sidebar-links sidebar-group-items"><!--[--><li><!--[--><div><a href="4011935214.html" class="sidebar-link ellipsis"><!--[--><span><!--[-->统一下单<!--]--></span><!----><!--]--></a></div><!--]--></li><li><!--[--><div><a href="4011935213.html" class="active sidebar-link ellipsis"><!--[--><span><!--[-->JSAPI调起支付<!--]--></span><!----><!--]--></a></div><!--]--></li><li><!--[--><div><a href="4011935215.html" class="sidebar-link ellipsis"><!--[--><span><!--[-->查询订单<!--]--></span><!----><!--]--></a></div><!--]--></li><li><!--[--><div><a href="4011935216.html" class="sidebar-link ellipsis"><!--[--><span><!--[-->关闭订单<!--]--></span><!----><!--]--></a></div><!--]--></li><li><!--[--><div><a href="4011935217.html" class="sidebar-link ellipsis"><!--[--><span><!--[-->申请退款<!--]--></span><!----><!--]--></a></div><!--]--></li><li><!--[--><div><a href="4011935218.html" class="sidebar-link ellipsis"><!--[--><span><!--[-->查询退款<!--]--></span><!----><!--]--></a></div><!--]--></li><li><!--[--><div><a href="4011935219.html" class="sidebar-link ellipsis"><!--[--><span><!--[-->下载交易账单<!--]--></span><!----><!--]--></a></div><!--]--></li><li><!--[--><div><a href="4011935220.html" class="sidebar-link ellipsis"><!--[--><span><!--[-->下载资金账单<!--]--></span><!----><!--]--></a></div><!--]--></li><li><!--[--><div><a href="4011935221.html" class="sidebar-link ellipsis"><!--[--><span><!--[-->支付结果通知<!--]--></span><!----><!--]--></a></div><!--]--></li><li><!--[--><div><a href="4011935222.html" class="sidebar-link ellipsis"><!--[--><span><!--[-->交易保障<!--]--></span><!----><!--]--></a></div><!--]--></li><li><!--[--><div><a href="4011935223.html" class="sidebar-link ellipsis"><!--[--><span><!--[-->退款结果通知<!--]--></span><!----><!--]--></a></div><!--]--></li><!--]--></ul></section><!--]--></li><li><!--[--><div><a href="4011935211.html" class="sidebar-link ellipsis"><!--[--><span><!--[-->常见问题<!--]--></span><!----><!--]--></a></div><!--]--></li><!--]--></ul></section><!--]--></li><li><!--[--><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><!--[--><span><!--[-->Native支付<!--]--></span><!----><!--]--></span><span class="down arrow"></span></p><!----></section><!--]--></li><li><!--[--><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><!--[--><span><!--[-->APP支付<!--]--></span><!----><!--]--></span><span class="down arrow"></span></p><!----></section><!--]--></li><li><!--[--><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><!--[--><span><!--[-->H5支付<!--]--></span><!----><!--]--></span><span class="down arrow"></span></p><!----></section><!--]--></li><li><!--[--><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><!--[--><span><!--[-->小程序支付<!--]--></span><!----><!--]--></span><span class="down arrow"></span></p><!----></section><!--]--></li><!--]--></ul></section><!--]--></li><li><!--[--><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading ellipsis"><span><!--[--><span><!--[-->运营工具<!--]--></span><!----><!--]--></span><span class="up arrow"></span></p><ul class="sidebar-links sidebar-group-items"><!--[--><li><!--[--><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><!--[--><span><!--[-->现金红包<!--]--></span><!----><!--]--></span><span class="down arrow"></span></p><!----></section><!--]--></li><li><!--[--><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><!--[--><span><!--[-->小程序红包<!--]--></span><!----><!--]--></span><span class="down arrow"></span></p><!----></section><!--]--></li><li><!--[--><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><!--[--><span><!--[-->付款到银行卡<!--]--></span><!----><!--]--></span><span class="down arrow"></span></p><!----></section><!--]--></li><li><!----></li><li><!--[--><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><!--[--><span><!--[-->委托代扣<!--]--></span><!----><!--]--></span><span class="down arrow"></span></p><!----></section><!--]--></li><li><!----></li><li><!----></li><!--]--></ul></section><!--]--></li><li><!--[--><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading ellipsis"><span><!--[--><span><!--[-->扩展工具<!--]--></span><!----><!--]--></span><span class="up arrow"></span></p><ul class="sidebar-links sidebar-group-items"><!--[--><li><!--[--><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><!--[--><span><!--[-->分账<!--]--></span><!----><!--]--></span><span class="down arrow"></span></p><!----></section><!--]--></li><li><!--[--><section class="sidebar-group collapsable depth-1"><p class="sidebar-heading ellipsis"><span><!--[--><span><!--[-->清关报关<!--]--></span><!----><!--]--></span><span class="down arrow"></span></p><!----></section><!--]--></li><li><!----></li><li><!----></li><li><!----></li><!--]--></ul></section><!--]--></li><!--]--></ul></div></div><!--]--></aside><main class="t-layout__content" data-v-45cd89fe><!--[--><div class="page-container" data-v-45cd89fe><main class="page" data-v-45cd89fe><div class="page-inner-container" data-v-45cd89fe><div id="page-content" class="page-content" data-v-45cd89fe><h1 class="content-title" data-v-45cd89fe>JSAPI调起支付</h1><span class="last-updated-date" data-v-45cd89fe> 更新时间：2024.11.13</span><div id="main-content" class="theme-default-content" data-v-45cd89fe><div data-v-45cd89fe><html><head></head><body><div class="iwiki-wrapper"><div><p class="iwiki-p"><span><span>在微信浏览器里面打开H5网页中执行JS调起支付。接口输入输出数据格式为JSON。</span></span></p></div><div><p class="iwiki-p"><span><span>注意：WeixinJSBridge内置对象在其他浏览器中无效。</span></span></p></div><div><p class="iwiki-p"><span><span>getBrandWCPayRequest参数以及返回值定义：</span></span></p></div><div><p class="iwiki-p"><span><span>1、网页端接口请求参数列表</span></span><span><span><span>（参数需要重新进行签名计算，参与签名的参数为：appId、timeStamp、nonceStr、package、signType，参数区分大小写。）</span></span></span></p></div><div class="iwiki-tableNode-wrapper"><table class="iwiki-tableNode" width="100%"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><th colspan="1" rowspan="1" class="iwiki-tableHeader" bgcolor="#f4f5f9" align="left" valign="top"><p class="iwiki-p"><span><span>名称</span></span></p></th><th colspan="1" rowspan="1" class="iwiki-tableHeader" bgcolor="#f4f5f9" align="left" valign="top"><p class="iwiki-p"><span><span>变量名</span></span></p></th><th colspan="1" rowspan="1" class="iwiki-tableHeader" bgcolor="#f4f5f9" align="left" valign="top"><p class="iwiki-p"><span><span>必填</span></span></p></th><th colspan="1" rowspan="1" class="iwiki-tableHeader" bgcolor="#f4f5f9" align="left" valign="top"><p class="iwiki-p"><span><span>类型</span></span></p></th><th colspan="1" rowspan="1" class="iwiki-tableHeader" bgcolor="#f4f5f9" align="left" valign="top"><p class="iwiki-p"><span><span>示例值</span></span></p></th><th colspan="1" rowspan="1" class="iwiki-tableHeader" bgcolor="#f4f5f9" align="left" valign="top"><p class="iwiki-p"><span><span>描述</span></span></p></th></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>公众号id</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>appId</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>是</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>String(16)</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>wx8888888888888888</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>appId为当前服务商号绑定的appid</span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>时间戳</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>timeStamp</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>是</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>String(32)</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>1414561699</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>当前的时间，其他详见</span></span><span><span><a href="https://pay.weixin.qq.com/doc/v2/merchant/4011941162" target="_blank">时间戳规则</a></span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>随机字符串</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>nonceStr</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>是</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>String(32)</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>5K8264ILTKCH16CQ2502SI8ZNMTM67VS</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>随机字符串，不长于32位。推荐</span></span><span><span><a href="https://pay.weixin.qq.com/doc/v2/merchant/4011985891" target="_blank">随机数生成算法</a></span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>订单详情扩展字符串</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>package</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>是</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>String(128)</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>prepay_id=123456789</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>统一下单接口返回的prepay_id参数值，提交格式如：prepay_id=***</span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>签名方式</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>signType</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>是</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>String(32)</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>MD5</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>签名类型，默认为MD5，支持HMAC-SHA256和MD5。</span></span><span><span>注意此处需与统一下单的签名类型一致</span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>签名</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>paySign</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>是</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>String(64)</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>C380BEC2BFD727A4B6845133519F3AD6</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span>签名，详见</span></span><span><span><a href="https://pay.weixin.qq.com/doc/v2/merchant/4011985891" target="_blank">签名生成算法</a></span></span></p></td></tr></tbody></table></div><div><p class="iwiki-p"><span><span>2、返回结果值说明</span></span></p></div><div class="iwiki-tableNode-wrapper"><table class="iwiki-tableNode"><tbody><tr><th colspan="1" rowspan="1" class="iwiki-tableHeader" bgcolor="#f4f5f9" align="left" valign="top"><p class="iwiki-p"><span><span>返回值</span></span></p></th><th colspan="1" rowspan="1" class="iwiki-tableHeader" bgcolor="#f4f5f9" align="left" valign="top"><p class="iwiki-p"><span><span>描述</span></span></p></th></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="top"><p class="iwiki-p"><span><span>get_brand_wcpay_request:ok</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="top"><p class="iwiki-p"><span><span>支付成功</span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="top"><p class="iwiki-p"><span><span>get_brand_wcpay_request:cancel</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="top"><p class="iwiki-p"><span><span>支付过程中用户取消</span></span></p></td></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="top"><p class="iwiki-p"><span><span>get_brand_wcpay_request:fail</span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="top"><p class="iwiki-p"><span><span>支付失败</span></span></p></td></tr></tbody></table></div><div><p class="iwiki-p"><span><span>注：JS API的返回结果get_brand_wcpay_request:ok仅在用户成功完成支付时返回。由于前端交互复杂，get_brand_wcpay_request:cancel或者get_brand_wcpay_request:fail可以统一处理为用户遇到错误或者主动放弃，不必细化区分。</span></span></p></div><div><p class="iwiki-p"><span><span>示例代码如下：</span></span></p></div><div class="iwiki-codeBlock-div" language="javascript"><img class="iwiki-codeBlock-copy" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/5236a3a065efe1276d29855d7cad26f8_16x16.svg" width="20" height="20"><pre class="iwiki-codeBlock"><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber firstline">1</span><span class="iwiki-codeBlock-line"><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">2</span><span class="iwiki-codeBlock-line"><span class="cm-keyword">function</span><span> </span><span class="cm-def">onBridgeReady</span><span>(</span><span>)</span><span>{</span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">3</span><span class="iwiki-codeBlock-line"><span>   </span><span class="cm-variable">WeixinJSBridge</span><span>.</span><span class="cm-property">invoke</span><span>(</span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">4</span><span class="iwiki-codeBlock-line"><span>      </span><span class="cm-string">'getBrandWCPayRequest'</span><span>,</span><span> </span><span>{</span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">5</span><span class="iwiki-codeBlock-line"><span>         </span><span class="cm-string property">"appId"</span><span>:</span><span class="cm-string">"wx2421b1c4370ec43b"</span><span>,</span><span>     </span><span class="cm-comment">//公众号ID，由商户传入     </span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">6</span><span class="iwiki-codeBlock-line"><span>         </span><span class="cm-string property">"timeStamp"</span><span>:</span><span class="cm-string">"1395712654"</span><span>,</span><span>         </span><span class="cm-comment">//时间戳，自1970年以来的秒数     </span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">7</span><span class="iwiki-codeBlock-line"><span>         </span><span class="cm-string property">"nonceStr"</span><span>:</span><span class="cm-string">"e61463f8efa94090b1f366cccfbbb444"</span><span>,</span><span> </span><span class="cm-comment">//随机串     </span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">8</span><span class="iwiki-codeBlock-line"><span>         </span><span class="cm-string property">"package"</span><span>:</span><span class="cm-string">"prepay_id=u802345jgfjsdfgsdg888"</span><span>,</span><span>     </span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">9</span><span class="iwiki-codeBlock-line"><span>         </span><span class="cm-string property">"signType"</span><span>:</span><span class="cm-string">"MD5"</span><span>,</span><span>         </span><span class="cm-comment">//微信签名方式：     </span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">10</span><span class="iwiki-codeBlock-line"><span>         </span><span class="cm-string property">"paySign"</span><span>:</span><span class="cm-string">"70EA570631E4BB79628FBCA90534C63FF7FADD89"</span><span> </span><span class="cm-comment">//微信签名 </span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">11</span><span class="iwiki-codeBlock-line"><span>      </span><span>}</span><span>,</span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">12</span><span class="iwiki-codeBlock-line"><span>      </span><span class="cm-keyword">function</span><span>(</span><span class="cm-def">res</span><span>)</span><span>{</span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">13</span><span class="iwiki-codeBlock-line"><span>      </span><span class="cm-keyword">if</span><span>(</span><span class="cm-variable-2">res</span><span>.</span><span class="cm-property">err_msg</span><span> </span><span class="cm-operator">==</span><span> </span><span class="cm-string">"get_brand_wcpay_request:ok"</span><span> </span><span>)</span><span>{</span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">14</span><span class="iwiki-codeBlock-line"><span>      </span><span class="cm-comment">// 使用以上方式判断前端返回,微信团队郑重提示：</span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">15</span><span class="iwiki-codeBlock-line"><span>            </span><span class="cm-comment">//res.err_msg将在用户支付成功后返回ok，但并不保证它绝对可靠。</span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">16</span><span class="iwiki-codeBlock-line"><span>      </span><span>}</span><span> </span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">17</span><span class="iwiki-codeBlock-line"><span>   </span><span>}</span><span>)</span><span>;</span><span> </span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">18</span><span class="iwiki-codeBlock-line"><span>}</span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">19</span><span class="iwiki-codeBlock-line"><span class="cm-keyword">if</span><span> </span><span>(</span><span class="cm-keyword">typeof</span><span> </span><span class="cm-variable">WeixinJSBridge</span><span> </span><span class="cm-operator">==</span><span> </span><span class="cm-string">"undefined"</span><span>)</span><span>{</span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">20</span><span class="iwiki-codeBlock-line"><span>   </span><span class="cm-keyword">if</span><span>(</span><span> </span><span class="cm-variable">document</span><span>.</span><span class="cm-property">addEventListener</span><span> </span><span>)</span><span>{</span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">21</span><span class="iwiki-codeBlock-line"><span>       </span><span class="cm-variable">document</span><span>.</span><span class="cm-property">addEventListener</span><span>(</span><span class="cm-string">'WeixinJSBridgeReady'</span><span>,</span><span> </span><span class="cm-variable">onBridgeReady</span><span>,</span><span> </span><span class="cm-atom">false</span><span>)</span><span>;</span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">22</span><span class="iwiki-codeBlock-line"><span>   </span><span>}</span><span class="cm-keyword">else</span><span> </span><span class="cm-keyword">if</span><span> </span><span>(</span><span class="cm-variable">document</span><span>.</span><span class="cm-property">attachEvent</span><span>)</span><span>{</span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">23</span><span class="iwiki-codeBlock-line"><span>       </span><span class="cm-variable">document</span><span>.</span><span class="cm-property">attachEvent</span><span>(</span><span class="cm-string">'WeixinJSBridgeReady'</span><span>,</span><span> </span><span class="cm-variable">onBridgeReady</span><span>)</span><span>;</span><span> </span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">24</span><span class="iwiki-codeBlock-line"><span>       </span><span class="cm-variable">document</span><span>.</span><span class="cm-property">attachEvent</span><span>(</span><span class="cm-string">'onWeixinJSBridgeReady'</span><span>,</span><span> </span><span class="cm-variable">onBridgeReady</span><span>)</span><span>;</span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">25</span><span class="iwiki-codeBlock-line"><span>   </span><span>}</span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">26</span><span class="iwiki-codeBlock-line"><span>}</span><span class="cm-keyword">else</span><span>{</span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">27</span><span class="iwiki-codeBlock-line"><span>   </span><span class="cm-variable">onBridgeReady</span><span>(</span><span>)</span><span>;</span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber">28</span><span class="iwiki-codeBlock-line"><span>}</span><span>
</span></span></span><span class="iwiki-codeBlock-lines"><span class="iwiki-codeBlock-linenumber lastline">29</span><span class="iwiki-codeBlock-line"></span></span></pre></div><div><p class="iwiki-p"><span><span>3、客户端唤起支付常见错误</span></span></p></div><div class="iwiki-tableNode-wrapper"><table class="iwiki-tableNode"><tbody><tr><th colspan="1" rowspan="1" class="iwiki-tableHeader" bgcolor="#f4f5f9" align="left" valign="top"><p class="iwiki-p"><span><span>序号</span></span></p></th><th colspan="1" rowspan="1" class="iwiki-tableHeader" bgcolor="#f4f5f9" align="left" valign="top"><p class="iwiki-p"><span><span>错误描述</span></span></p></th><th colspan="1" rowspan="1" class="iwiki-tableHeader" bgcolor="#f4f5f9" align="left" valign="top"><p class="iwiki-p"><span><span>解决方法</span></span></p></th></tr><tr><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><p class="iwiki-p"><span><span><span>1</span></span></span></p></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="middle"><div><p class="iwiki-p"><span><span>调用支付JSAPI缺少参数：total_fee</span></span></p></div></td><td colspan="1" rowspan="1" class="iwiki-tableCell" bgcolor="white" valign="top"><p class="iwiki-p"><span><span>1、请检查预支付会话标识prepay_id是否已失效</span></span></p><p class="iwiki-p"><span><span>2、请求的appid与下单接口的appid是否一致</span></span></p></td></tr></tbody></table></div><div><p class="iwiki-p">&nbsp;</p></div><p class="iwiki-p">&nbsp;</p></div></body></html></div><div class="hr-line" data-v-45cd89fe></div></div><div class="feedback-and-moresupport" data-v-45cd89fe><div class="feedback-box" data-v-45cd89fe data-v-77eca616><div class="feedback-panel-text" data-v-77eca616> 文档是否有帮助 </div><!----><div class="feedback-panel-choices" data-v-77eca616><button class="feedback-option" data-v-77eca616><i class="icon help-icon" data-v-77eca616></i>是 </button><button class="feedback-option" data-v-77eca616><i class="icon no-help-icon" data-v-77eca616></i>否 </button></div></div></div><div class="relative-doc-and-moresupport" data-v-45cd89fe><div class="more-support" data-v-45cd89fe data-v-e0c53a30><div class="more-support__title" data-v-e0c53a30> 更多支持 </div><div class="more-support__lists" data-v-e0c53a30><!--[--><a href="https://pay.weixin.qq.com/doc/v3/partner/4012069852" target="_blank" data-v-e0c53a30>开发文档(服务商)</a><a href="https://pay.weixin.qq.com/doc/v2" target="_blank" data-v-e0c53a30>开发文档(V2版)</a><!--]--><a href="https://developers.weixin.qq.com/community/pay" target="_blank" data-v-e0c53a30>开发者社区</a><a href="https://open.weixin.qq.com/" target="_blank" data-v-e0c53a30>微信开放平台</a><a href="https://mp.weixin.qq.com/" target="_blank" data-v-e0c53a30>微信公众平台</a><a href="https://kf.qq.com/product/wechatpaymentmerchant.html" target="_blank" data-v-e0c53a30>腾讯客服</a></div></div></div></div><div class="sub-sidebar" data-v-45cd89fe data-v-7f9bf920><div class="toc" data-v-7f9bf920><div class="mb32" data-v-7f9bf920><div class="feedback-box" data-v-7f9bf920 data-v-77eca616><div class="feedback-panel-text" data-v-77eca616> 文档是否有帮助 </div><!----><div class="feedback-panel-choices" data-v-77eca616><button class="feedback-option" data-v-77eca616><i class="icon help-icon" data-v-77eca616></i>是 </button><button class="feedback-option" data-v-77eca616><i class="icon no-help-icon" data-v-77eca616></i>否 </button></div></div></div><!----><div class="support-container" data-v-7f9bf920 data-v-787fd1f1><a href="https://support.pay.weixin.qq.com/aidevhelper?from=wechatpaydoc" target="_blank" class="support-btn" data-v-787fd1f1><i class="support-icon" data-v-787fd1f1></i><span class="support-text" data-v-787fd1f1>AI开发助手</span></a></div></div><div class="toc-mobile" data-v-7f9bf920><div class="sub-sidebar-group" data-v-7f9bf920 data-v-18ea8254><div class="group-item" data-v-18ea8254><img class="group-icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202509/441b156fa07f0548ddda2a0b711b478e_20x20.svg" alt="" data-v-18ea8254><img class="group-icon-hover" src="https://gtimg.wechatpay.cn/resource/xres/img/202511/d17b46871fb8b4187e40e334c9564e6f_84x84.png" alt="" data-v-18ea8254><div class="group-info" data-v-18ea8254> 元宝AI </div></div><div class="group-items" data-v-18ea8254><div class="group-item" data-v-18ea8254><img class="group-icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/5c7b6ed2432ae0401a49a60329a1c5c9_80x80.svg" alt="" data-v-18ea8254><img class="group-icon-hover" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/c2c45e34bb7e9c67c51b22550d44b813_80x80.svg" alt="" data-v-18ea8254><div class="group-info" data-v-18ea8254> 反馈 </div></div><div class="group-item" data-v-18ea8254><img class="group-icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/55b0d9d534b0ccd145bcbe8e932f3053_80x80.svg" alt="" data-v-18ea8254><img class="group-icon-hover" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/88d0ba6a5d2578733aa9f3c586f07224_80x80.svg" alt="" data-v-18ea8254><div class="group-info" data-v-18ea8254> 目录 </div></div><div class="group-item" data-v-18ea8254><img class="group-icon" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/70ba1309ab6ade7e84f4f6d006c15621_48x49.png" alt="" data-v-18ea8254><img class="group-icon-hover" src="https://gtimg.wechatpay.cn/resource/xres/img/202409/eb04b4d41529b9413c0cba2a825c9d95_48x49.png" alt="" data-v-18ea8254><div class="group-info" data-v-18ea8254> 置顶 </div></div></div><!----><!----></div></div></div></div><!----></main><footer class="t-layout__footer footer" data-v-45cd89fe><!--[--><div class="footer-copyright" data-v-45cd89fe> Powered By Tencent &amp; Tenpay Copyright 2005-2025 Tenpay All Rights Reserved. </div><div class="footer-copyright footer-copyright-mobile" data-v-45cd89fe> Powered By Tencent &amp; Tenpay<br data-v-45cd89fe>Copyright 2005-2025 Tenpay All Rights Reserved. </div><!--]--></footer></div><!--]--></main><!--]--></section><!--]--></section><!--]--></div>
        <div id="teleported"></div>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </body>
    </html>